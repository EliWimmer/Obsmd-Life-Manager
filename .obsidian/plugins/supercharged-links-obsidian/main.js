/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');
var state = require('@codemirror/state');
var view = require('@codemirror/view');
var rangeset = require('@codemirror/rangeset');
var language = require('@codemirror/language');
var streamParser = require('@codemirror/stream-parser');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

class Field {
    constructor(name = "", values = {}, id = "", isMulti = false, isCycle = false, valuesListNotePath = "") {
        this.name = name;
        this.values = values;
        this.id = id;
        this.isCycle = isCycle;
        this.isMulti = isMulti;
        this.valuesListNotePath = valuesListNotePath;
        this.insertNewValue.bind(this);
    }
    insertNewValue(value) {
        return __awaiter(this, void 0, void 0, function* () {
            let newKey = 1;
            Object.keys(this.values).forEach(key => {
                if (parseInt(key) && parseInt(key) >= newKey) {
                    newKey = parseInt(key) + 1;
                }
            });
            this.values[newKey.toString()] = value;
            return newKey.toString();
        });
    }
    static copyProperty(target, source) {
        target.id = source.id;
        target.name = source.name;
        target.isCycle = source.isCycle;
        target.isMulti = source.isMulti;
        target.valuesListNotePath = source.valuesListNotePath;
        Object.keys(source.values).forEach(k => {
            target.values[k] = source.values[k];
        });
        Object.keys(target.values).forEach(k => {
            if (!Object.keys(source.values).includes(k)) {
                delete target.values[k];
            }
        });
    }
}

class FieldSetting extends obsidian.Setting {
    constructor(containerEl, property, app, plugin) {
        super(containerEl);
        this.containerEl = containerEl;
        this.property = property;
        this.app = app;
        this.plugin = plugin;
        this.setTextContentWithname();
        this.addEditButton();
        this.addDeleteButton();
    }
    setTextContentWithname() {
        this.infoEl.textContent =
            `${this.property.name}: [${Object.keys(this.property.values).map(k => this.property.values[k]).join(', ')}]`;
    }
    addEditButton() {
        this.addButton((b) => {
            b.setIcon("pencil")
                .setTooltip("Edit")
                .onClick(() => {
                let modal = new FieldSettingsModal(this.app, this.plugin, this.containerEl, this, this.property);
                modal.open();
            });
        });
    }
    addDeleteButton() {
        this.addButton((b) => {
            b.setIcon("trash")
                .setTooltip("Delete")
                .onClick(() => {
                const currentExistingProperty = this.plugin.initialProperties.filter(p => p.id == this.property.id)[0];
                if (currentExistingProperty) {
                    this.plugin.initialProperties.remove(currentExistingProperty);
                }
                this.settingEl.parentElement.removeChild(this.settingEl);
                this.plugin.saveSettings();
            });
        });
    }
    static getValuesListFromNote(notePath, app) {
        return new Promise((resolve, reject) => {
            let values = [];
            const files = app.vault.getMarkdownFiles().filter(mdFile => mdFile.path == notePath);
            if (files.length > 0) {
                const file = files[0];
                app.vault.read(file).then((result) => {
                    result.split('\n').forEach(line => {
                        if (/^(.*)$/.test(line)) {
                            values.push(line.trim());
                        }
                    });
                    resolve(values);
                });
            }
            else {
                resolve([]);
            }
        });
    }
}

class FieldSettingsModal extends obsidian.Modal {
    constructor(app, plugin, parentSettingContainer, parentSetting, property) {
        super(app);
        this.valuesPromptComponents = [];
        this.saved = false;
        this.new = true;
        this.plugin = plugin;
        this.parentSetting = parentSetting;
        this.initialProperty = new Field();
        this.parentSettingContainer = parentSettingContainer;
        if (property) {
            this.new = false;
            this.property = property;
            this.initialProperty.name = property.name;
            this.initialProperty.id = property.id;
            Object.keys(property.values).forEach(k => {
                this.initialProperty.values[k] = property.values[k];
            });
        }
        else {
            let newId = 1;
            this.plugin.initialProperties.forEach(prop => {
                if (parseInt(prop.id) && parseInt(prop.id) >= newId) {
                    newId = parseInt(prop.id) + 1;
                }
            });
            this.property = new Field();
            this.property.id = newId.toString();
            this.initialProperty.id = newId.toString();
        }
    }
    onOpen() {
        if (this.property.name == "") {
            this.titleEl.setText(`Add a property and set predefined`);
        }
        else {
            this.titleEl.setText(`Manage settings values for ${this.property.name}`);
        }
        this.createForm();
    }
    onClose() {
        Object.assign(this.property, this.initialProperty);
        if (!this.new) {
            this.parentSetting.infoEl.textContent =
                `${this.property.name}: [${Object.keys(this.property.values).map(k => this.property.values[k]).join(', ')}]`;
        }
        else if (this.saved) {
            new FieldSetting(this.parentSettingContainer, this.property, this.app, this.plugin);
        }
    }
    setValueListText(header) {
        header.setText(`Preset values: ${Object.values(this.property.values).join(', ')}`);
    }
    createnameInputContainer(parentNode) {
        const propertyNameContainerLabel = parentNode.createDiv();
        propertyNameContainerLabel.setText(`Property Name:`);
        const input = new obsidian.TextComponent(parentNode);
        const name = this.property.name;
        input.setValue(name);
        input.setPlaceholder("Name of the property");
        input.onChange(value => {
            this.property.name = value;
            this.titleEl.setText(`Manage predefined values for ${this.property.name}`);
            FieldSettingsModal.removeValidationError(input);
        });
        return input;
    }
    createTogglerContainer(parentNode, label) {
        const propertyContainerLabel = parentNode.createDiv({
            cls: 'frontmatter-checkbox-toggler'
        });
        propertyContainerLabel.setText(label);
        const toggler = new obsidian.ToggleComponent(parentNode);
        return toggler;
    }
    createListNoteContainer(parentNode) {
        const listNoteContainerLabel = parentNode.createDiv();
        listNoteContainerLabel.setText(`Path of the note containing the values:`);
        const input = new obsidian.TextComponent(parentNode);
        const listNotePath = this.property.valuesListNotePath;
        input.setValue(listNotePath);
        input.setPlaceholder("Path/of/the/note.md");
        input.onChange(value => this.property.valuesListNotePath = value);
        return input;
    }
    removePresetValue(key) {
        let newValues = {};
        for (let _key in this.property.values) {
            if (key !== _key) {
                newValues[_key] = this.property.values[_key];
            }
        }
        this.property.values = newValues;
    }
    createValueContainer(parentNode, header, key) {
        const values = this.property.values;
        const presetValue = values[key];
        const valueContainer = parentNode.createDiv({
            cls: 'frontmatter-prompt-container',
        });
        const input = new obsidian.TextComponent(valueContainer);
        input.setValue(presetValue);
        input.onChange(value => {
            this.property.values[key] = value;
            this.setValueListText(header);
            FieldSettingsModal.removeValidationError(input);
        });
        const valueRemoveButton = new obsidian.ButtonComponent(valueContainer);
        valueRemoveButton.setIcon("trash")
            .onClick((evt) => {
            evt.preventDefault;
            this.removePresetValue(key);
            this.setValueListText(header);
            parentNode.removeChild(valueContainer);
            this.valuesPromptComponents.remove(input);
        });
        if (key != Object.keys(this.property.values)[0]) {
            const valueUpgradeButton = new obsidian.ButtonComponent(valueContainer);
            valueUpgradeButton.setButtonText("▲");
            valueUpgradeButton.onClick((evt) => {
                const thisValue = values[key];
                const upperComponent = this.valuesPromptComponents[this.valuesPromptComponents.indexOf(input) - 1];
                if (upperComponent) {
                    const upperValue = upperComponent.inputEl.value;
                    const upperKey = Object.keys(values).filter(k => values[k] == upperValue)[0];
                    if (upperKey) {
                        upperComponent.setValue(thisValue);
                        values[upperKey] = thisValue;
                        input.setValue(upperValue);
                        values[key] = upperValue;
                    }
                }
            });
        }
        return input;
    }
    createForm() {
        const div = this.contentEl.createDiv({
            cls: "frontmatter-prompt-div"
        });
        const mainDiv = div.createDiv({
            cls: "frontmatter-prompt-form"
        });
        /* Property Name Section */
        const nameContainer = mainDiv.createDiv();
        this.namePromptComponent = this.createnameInputContainer(nameContainer);
        mainDiv.createDiv({ cls: 'frontmatter-separator' }).createEl("hr");
        /* Property is Multi section*/
        const multiContainer = mainDiv.createDiv();
        this.isMultiTogglerComponent = this.createTogglerContainer(multiContainer, "Is Multi: ");
        this.isMultiTogglerComponent.setValue(this.property.isMulti);
        this.isMultiTogglerComponent.setTooltip("Can this property have multiple values?");
        this.isMultiTogglerComponent.onChange(value => {
            this.property.isMulti = value;
            if (this.property.isCycle && this.property.isMulti) {
                this.property.isCycle = false;
                this.isCycleTogglerComponent.setValue(false);
            }
        });
        mainDiv.createDiv({ cls: 'frontmatter-separator' }).createEl("hr");
        /* Property is Cycle section*/
        const cycleContainer = mainDiv.createDiv();
        this.isCycleTogglerComponent = this.createTogglerContainer(cycleContainer, "Is Cycle: ");
        this.isCycleTogglerComponent.setValue(this.property.isCycle);
        this.isCycleTogglerComponent.setTooltip("Is this property's values set in cycle mode?");
        this.isCycleTogglerComponent.onChange(value => {
            this.property.isCycle = value;
            if (this.property.isCycle && this.property.isMulti) {
                this.property.isMulti = false;
                this.isMultiTogglerComponent.setValue(false);
            }
        });
        mainDiv.createDiv({ cls: 'frontmatter-separator' }).createEl("hr");
        /* Property's note for list of Values */
        const listNotePathContainer = mainDiv.createDiv();
        this.listNotePathComponent = this.createListNoteContainer(listNotePathContainer);
        mainDiv.createDiv({ cls: 'frontmatter-separator' }).createEl("hr");
        /* Property Values */
        const valuesList = mainDiv.createDiv();
        const valuesListHeader = valuesList.createDiv();
        valuesListHeader.createEl("h2");
        valuesListHeader.setText(`Preset values: ${Object.values(this.property.values).join(', ')}`);
        const valuesListBody = valuesList.createDiv();
        Object.keys(this.property.values).forEach(key => {
            this.valuesPromptComponents.push(this.createValueContainer(valuesListBody, valuesListHeader, key));
        });
        /* Add a new Values */
        const valuesListFooter = valuesList.createDiv();
        const addValue = valuesListFooter.createEl('button');
        addValue.type = 'button';
        addValue.textContent = 'Add';
        addValue.onClickEvent((evt) => {
            evt.preventDefault;
            this.property.insertNewValue("")
                .then(newKey => { this.createValueContainer(valuesListBody, valuesListHeader, newKey); });
        });
        mainDiv.createDiv({ cls: 'frontmatter-separator' }).createEl("hr");
        /* footer buttons*/
        const footerEl = this.contentEl.createDiv();
        const footerButtons = new obsidian.Setting(footerEl);
        footerButtons.addButton((b) => this.createSaveButton(b));
        footerButtons.addExtraButton((b) => this.createCancelButton(b));
    }
    createSaveButton(b) {
        b.setTooltip("Save")
            .setIcon("checkmark")
            .onClick(() => __awaiter(this, void 0, void 0, function* () {
            let error = false;
            if (/^[#>-]/.test(this.property.name)) {
                FieldSettingsModal.setValidationError(this.namePromptComponent, this.namePromptComponent.inputEl, "Property name cannot start with #, >, -");
                error = true;
            }
            if (this.property.name == "") {
                FieldSettingsModal.setValidationError(this.namePromptComponent, this.namePromptComponent.inputEl, "Property name can not be Empty");
                error = true;
            }
            this.valuesPromptComponents.forEach(input => {
                if (/^[#>-]/.test(input.inputEl.value)) {
                    FieldSettingsModal.setValidationError(input, input.inputEl.parentElement.lastElementChild, "Values cannot cannot start with #, >, -");
                    error = true;
                }
                if (/[,]/gu.test(input.inputEl.value)) {
                    FieldSettingsModal.setValidationError(input, input.inputEl.parentElement.lastElementChild, "Values cannot contain a comma");
                    error = true;
                }
                if (input.inputEl.value == "") {
                    FieldSettingsModal.setValidationError(input, input.inputEl.parentElement.lastElementChild, "Values can't be null.");
                    error = true;
                }
            });
            if (error) {
                new obsidian.Notice("Fix errors before saving.");
                return;
            }
            this.saved = true;
            const currentExistingProperty = this.plugin.initialProperties.filter(p => p.id == this.property.id)[0];
            if (currentExistingProperty) {
                Field.copyProperty(currentExistingProperty, this.property);
            }
            else {
                this.plugin.initialProperties.push(this.property);
            }
            this.initialProperty = this.property;
            this.plugin.saveSettings();
            this.close();
        }));
        return b;
    }
    createCancelButton(b) {
        b.setIcon("cross")
            .setTooltip("Cancel")
            .onClick(() => {
            this.saved = false;
            /* reset values from settings */
            if (this.initialProperty.name != "") {
                Object.assign(this.property, this.initialProperty);
            }
            this.close();
        });
        return b;
    }
    /* utils functions */
    static setValidationError(textInput, insertAfter, message) {
        textInput.inputEl.addClass("is-invalid");
        if (message) {
            let mDiv = textInput.inputEl.parentElement.querySelector(".invalid-feedback");
            if (!mDiv) {
                mDiv = createDiv({ cls: "invalid-feedback" });
            }
            mDiv.innerText = message;
            mDiv.insertAfter(insertAfter);
        }
    }
    static removeValidationError(textInput) {
        if (textInput.inputEl.hasClass("is-invalid")) {
            textInput.inputEl.removeClass("is-invalid");
            textInput.inputEl.parentElement.removeChild(textInput.inputEl.parentElement.lastElementChild);
        }
    }
}

const matchTypes = {
    'exact': "Exact match",
    'contains': "Contains value",
    'whiteSpace': "Value within whitespace separated words",
    'startswith': "Starts with this value",
    'endswith': "Ends with this value"
};
const matchSign = {
    'exact': "",
    'contains': "*",
    'startswith': "^",
    'endswith': "$",
    'whiteSpace': "~"
};
const matchPreview = {
    'exact': "with value",
    'contains': "containing",
    'whiteSpace': "containing",
    'startswith': "starting with",
    'endswith': "ending with"
};
const matchPreviewPath = {
    'exact': "is",
    'contains': "contains",
    'whiteSpace': "contains",
    'startswith': "starts with",
    'endswith': "ends with"
};
const selectorType = {
    'attribute': 'Attribute value',
    'tag': 'Tag',
    'path': 'Note path'
};
class CSSLink {
    constructor() {
        this.type = 'attribute';
        this.name = "";
        this.value = "";
        this.matchCaseSensitive = false;
        this.match = "exact";
        let s4 = () => {
            return Math.floor((1 + Math.random()) * 0x10000)
                .toString(16)
                .substring(1);
        };
        //return id of format 'aaaaaaaa'-'aaaa'-'aaaa'-'aaaa'-'aaaaaaaaaaaa'
        this.uid = s4() + "-" + s4();
        this.selectText = true;
        this.selectAppend = true;
        this.selectPrepend = true;
        this.selectBackground = true;
    }
}

function displayText(link, settings) {
    if (link.type === 'tag') {
        if (!link.value) {
            return "<b>Please choose a tag</b>";
        }
        return `<span class="data-link-icon data-link-text data-link-icon-after" data-link-tags="${link.value}">Note</span> has tag <a class="tag">#${link.value}</a>`;
    }
    else if (link.type === 'attribute') {
        if (settings.targetAttributes.length === 0) {
            return `<b>No attributes added to "Target attributes". Go to plugin settings to add them.</b>`;
        }
        if (!link.name) {
            return "<b>Please choose an attribute name.</b>";
        }
        if (!link.value) {
            return "<b>Please choose an attribute value.</b>";
        }
        return `<span class="data-link-icon data-link-text data-link-icon-after" data-link-${link.name}="${link.value}">Note</span> has attribute <b>${link.name}</b> ${matchPreview[link.match]} <b>${link.value}</b>.`;
    }
    if (!link.value) {
        return "<b>Please choose a path.</b>";
    }
    return `The path of the <span class="data-link-icon data-link-text data-link-icon-after" data-link-path="${link.value}">note</span> ${matchPreviewPath[link.match]} <b>${link.value}</b>`;
}
function updateDisplay(textArea, link, settings) {
    let toDisplay = displayText(link, settings);
    let disabled = false;
    if (link.type === 'tag') {
        if (!link.value) {
            disabled = true;
        }
    }
    else if (link.type === 'attribute') {
        if (settings.targetAttributes.length === 0) {
            disabled = true;
        }
        else if (!link.name) {
            disabled = true;
        }
        else if (!link.value) {
            disabled = true;
        }
    }
    else {
        if (!link.value) {
            disabled = true;
        }
    }
    textArea.innerHTML = toDisplay;
    return disabled;
}
class CSSBuilderModal extends obsidian.Modal {
    constructor(plugin, saveCallback, cssLink = null) {
        super(plugin.app);
        this.cssLink = cssLink;
        if (!cssLink) {
            this.cssLink = new CSSLink();
        }
        this.plugin = plugin;
        this.saveCallback = saveCallback;
    }
    onOpen() {
        this.titleEl.setText(`Select what links to style!`);
        // is tag
        const matchAttrPlaceholder = "Attribute value to match.";
        const matchTagPlaceholder = "Note tag to match (without #).";
        const matchPathPlaceholder = "File path to match.";
        const matchAttrTxt = "Attribute value";
        const matchTagTxt = "Tag";
        const matchPathTxt = "Path";
        const cssLink = this.cssLink;
        const plugin = this.plugin;
        this.contentEl.addClass("supercharged-modal");
        // Type
        new obsidian.Setting(this.contentEl)
            .setName("Type of selector")
            .setDesc("Attributes selects YAML and DataView attributes" +
            ", tags chooses the tags of a note, and path considers the name of the note including in what folder it is.")
            .addDropdown(dc => {
            Object.keys(selectorType).forEach((type) => {
                dc.addOption(type, selectorType[type]);
                if (type === this.cssLink.type) {
                    dc.setValue(type);
                }
            });
            dc.onChange((type) => {
                cssLink.type = type;
                updateContainer(cssLink.type);
                saveButton.setDisabled(updateDisplay(preview, this.cssLink, this.plugin.settings));
            });
        });
        // attribute name
        const attrName = new obsidian.Setting(this.contentEl)
            .setName("Attribute name")
            .setDesc("What attribute to target? Make sure to first add target attributes to the settings at the top!")
            .addDropdown(dc => {
            plugin.settings.targetAttributes.forEach((attribute) => {
                dc.addOption(attribute, attribute);
                if (attribute === cssLink.name) {
                    dc.setValue(attribute);
                }
            });
            dc.onChange(name => {
                cssLink.name = name;
                saveButton.setDisabled(updateDisplay(preview, cssLink, plugin.settings));
            });
        });
        // attribute value
        const attrValue = new obsidian.Setting(this.contentEl)
            .setName("Value to match")
            .setDesc("TODO")
            .addText(t => {
            t.setValue(cssLink.value);
            t.onChange(value => {
                cssLink.value = value;
                saveButton.setDisabled(updateDisplay(preview, cssLink, plugin.settings));
            });
        });
        this.contentEl.createEl('h4', { text: 'Advanced' });
        // matching type
        const matchingType = new obsidian.Setting(this.contentEl)
            .setName("Matching type")
            .setDesc("How to compare the attribute or path with the given value.")
            .addDropdown(dc => {
            Object.keys(matchTypes).forEach((key) => {
                dc.addOption(key, matchTypes[key]);
                if (key == cssLink.match) {
                    dc.setValue(key);
                }
            });
            dc.onChange((value) => {
                cssLink.match = value;
                saveButton.setDisabled(updateDisplay(preview, cssLink, plugin.settings));
            });
        });
        // case sensitive
        const caseSensitiveTogglerContainer = new obsidian.Setting(this.contentEl)
            .setName("Case sensitive matching")
            .setDesc("Should the matching of the value be case sensitive?")
            .addToggle(b => {
            b.setValue(cssLink.matchCaseSensitive);
            b.onChange(value => {
                cssLink.matchCaseSensitive = value;
                b.setDisabled(updateDisplay(preview, cssLink, plugin.settings));
            });
        });
        if (!this.cssLink.name && this.plugin.settings.targetAttributes.length > 0) {
            this.cssLink.name = this.plugin.settings.targetAttributes[0];
        }
        const updateContainer = function (type) {
            if (type === 'attribute') {
                attrName.settingEl.show();
                attrValue.nameEl.setText(matchAttrTxt);
                attrValue.descEl.setText(matchAttrPlaceholder);
                matchingType.settingEl.show();
                caseSensitiveTogglerContainer.settingEl.show();
            }
            else if (type === 'tag') {
                attrName.settingEl.hide();
                attrValue.nameEl.setText(matchTagTxt);
                attrValue.descEl.setText(matchTagPlaceholder);
                matchingType.settingEl.hide();
                caseSensitiveTogglerContainer.settingEl.hide();
            }
            else {
                attrName.settingEl.hide();
                attrValue.nameEl.setText(matchPathTxt);
                attrValue.descEl.setText(matchPathPlaceholder);
                matchingType.settingEl.show();
                caseSensitiveTogglerContainer.settingEl.show();
            }
        };
        new obsidian.Setting(this.contentEl)
            .setName("Style options")
            .setDesc("What styling options are active? " +
            "Disabling options you won't use can improve performance slightly.")
            .addToggle(t => {
            t.onChange(value => {
                cssLink.selectText = value;
            });
            t.setValue(cssLink.selectText);
            t.setTooltip("Style link text");
        })
            .addToggle(t => {
            t.onChange(value => {
                cssLink.selectPrepend = value;
            });
            t.setValue(cssLink.selectPrepend);
            t.setTooltip("Add content before link");
        })
            .addToggle(t => {
            t.onChange(value => {
                cssLink.selectAppend = value;
            });
            t.setValue(cssLink.selectAppend);
            t.setTooltip("Add content after link");
        })
            .addToggle(t => {
            t.onChange(value => {
                cssLink.selectBackground = value;
            });
            t.setValue(cssLink.selectBackground);
            t.setTooltip("Add optional background or underline to link");
        });
        this.contentEl.createEl('h4', { text: 'Result' });
        const modal = this;
        const saveButton = new obsidian.Setting(this.contentEl)
            .setName("Preview")
            .setDesc("")
            .addButton(b => {
            b.setButtonText("Save");
            b.onClick(() => {
                modal.saveCallback(cssLink);
                modal.close();
            });
        });
        // generate button
        const preview = saveButton.nameEl;
        updateContainer(cssLink.type);
        saveButton.setDisabled(updateDisplay(preview, this.cssLink, this.plugin.settings));
    }
}

const colorSet = [[
        '#0089BA',
        '#2C73D2',
        '#008E9B',
        '#0081CF',
        '#008F7A',
        '#008E9B',
    ], [
        '#D65DB1',
        '#0082C1',
        '#9270D3',
        '#007F93',
        '#007ED9',
        '#007660',
    ], [
        '#FF9671',
        '#A36AAA',
        '#F27D88',
        '#6967A9',
        '#D26F9D',
        '#1b6299',
    ], [
        '#FFC75F',
        '#4C9A52',
        '#C3BB4E',
        '#00855B',
        '#88AC4B',
        '#006F61',
    ], [
        '#FF6F91',
        '#6F7F22',
        '#E07250',
        '#257A3E',
        '#AC7C26',
        '#006F5F',
    ], [
        '#d9d867',
        '#2FAB63',
        '#B8E067',
        '#008E63',
        '#78C664',
        '#007160',
    ]];
const colors = [];
for (const i of Array(6).keys()) {
    for (const j of Array(6).keys()) {
        colors.push(colorSet[j][i]);
    }
}
function hash(uid) {
    let hash = 0;
    for (let i = 0; i < uid.length; i++) {
        const char = uid.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash; // Convert to 32bit integer
    }
    hash = Math.abs(hash);
    return hash;
}
function buildCSS(selectors, plugin) {
    return __awaiter(this, void 0, void 0, function* () {
        const instructions = [
            "/* WARNING: This file will be overwritten by the plugin.",
            "Do not edit this file directly! First copy this file and rename it if you want to edit things. */",
            "",
            ":root {"
        ];
        selectors.forEach((selector, i) => {
            if (selector.selectText) {
                instructions.push(`    --${selector.uid}-color: ${colors[hash(selector.uid) % 36]};`);
                instructions.push(`    --${selector.uid}-weight: initial;`);
            }
            if (selector.selectPrepend) {
                instructions.push(`    --${selector.uid}-before: '';`);
            }
            if (selector.selectAppend) {
                instructions.push(`    --${selector.uid}-after: '';`);
            }
            if (selector.selectBackground) {
                instructions.push(`    --${selector.uid}-background-color: #ffffff;`);
                instructions.push(`    --${selector.uid}-decoration: initial;`);
            }
        });
        instructions.push("}");
        selectors.forEach(selector => {
            let cssSelector;
            if (selector.type === 'attribute') {
                cssSelector = `[data-link-${selector.name}${matchSign[selector.match]}="${selector.value}" ${selector.matchCaseSensitive ? "" : " i"}]`;
            }
            else if (selector.type === 'tag') {
                cssSelector = `[data-link-tags*="${selector.value}" i]`;
            }
            else {
                cssSelector = `[data-link-path${matchSign[selector.match]}="${selector.value}" ${selector.matchCaseSensitive ? "" : "i"}]`;
            }
            if (selector.selectText) {
                instructions.push(...[
                    "",
                    `div[data-id="${selector.uid}"] div.setting-item-description,`,
                    cssSelector + " {",
                    `    color: var(--${selector.uid}-color) !important;`,
                    `    font-weight: var(--${selector.uid}-weight);`,
                    "}"
                ]);
            }
            if (selector.selectBackground) {
                instructions.push(...["",
                    `.c-${selector.uid}-use-background div[data-id="${selector.uid}"] div.setting-item-description,`,
                    `.c-${selector.uid}-use-background .data-link-text${cssSelector} {`,
                    `    background-color: var(--${selector.uid}-background-color) !important;`,
                    `    border-radius: 5px;`,
                    `    padding-left: 2px;`,
                    `    padding-right: 2px;`,
                    `    text-decoration: var(--${selector.uid}-decoration) !important;`,
                    "}"]);
            }
            if (selector.selectPrepend) {
                instructions.push(...["",
                    `div[data-id="${selector.uid}"] div.setting-item-description::before,`,
                    `.data-link-icon${cssSelector}::before {`,
                    `    content: var(--${selector.uid}-before);`,
                    "}"]);
            }
            if (selector.selectAppend) {
                instructions.push(...["",
                    `div[data-id="${selector.uid}"] div.setting-item-description::after,`,
                    `.data-link-icon-after${cssSelector}::after {`,
                    `    content: var(--${selector.uid}-after);`,
                    "}"]);
            }
        });
        instructions.push(...[
            "/* @settings",
            "name: Supercharged Links",
            "id: supercharged-links",
            "settings:",
        ]);
        selectors.forEach((selector, i) => {
            let name = selector.name;
            let value = selector.value;
            if (selector.type === 'tag') {
                name = 'tag';
                // value = "\#" + value;
            }
            else if (selector.type === 'path') {
                name = 'path';
            }
            instructions.push(...[
                "    - ",
                `        id: ${selector.uid}`,
                `        title: ${name} is ${value}`,
                `        description: Example note`,
                "        type: heading",
                "        collapsed: true",
                "        level: 3"
            ]);
            if (selector.selectText) {
                instructions.push(...[
                    "    - ",
                    `        id: ${selector.uid}-color`,
                    `        title: Link color`,
                    "        type: variable-color",
                    "        format: hex",
                    `        default: '${colors[hash(selector.uid) % 36]}'`,
                    "    - ",
                    `        id: ${selector.uid}-weight`,
                    `        title: Font weight`,
                    "        type: variable-select",
                    `        default: initial`,
                    `        options:`,
                    `            - initial`,
                    `            - lighter`,
                    `            - normal`,
                    `            - bold`,
                    `            - bolder`,
                    "    - ",
                    `        id: ${selector.uid}-decoration`,
                    `        title: Font decoration`,
                    "        type: variable-select",
                    `        default: initial`,
                    `        options:`,
                    `            - initial`,
                    `            - underline`,
                    `            - overline`,
                    `            - line-through`
                ]);
            }
            if (selector.selectPrepend) {
                instructions.push(...["    - ",
                    `        id: ${selector.uid}-before`,
                    `        title: Prepend text`,
                    `        description: Add some text, such as an emoji, before the links.`,
                    "        type: variable-text",
                    `        default: ''`,
                    `        quotes: true`]);
            }
            if (selector.selectAppend) {
                instructions.push(...["    - ",
                    `        id: ${selector.uid}-after`,
                    `        title: Append text`,
                    `        description: Add some text, such as an emoji, after the links.`,
                    "        type: variable-text",
                    `        default: ''`,
                    `        quotes: true`]);
            }
            if (selector.selectBackground) {
                instructions.push(...["    - ",
                    `        id: c-${selector.uid}-use-background`,
                    `        title: Use background color`,
                    `        description: Adds a background color to the link. This can look buggy in live preview.`,
                    "        type: class-toggle",
                    "    - ",
                    `        id: ${selector.uid}-background-color`,
                    `        title: Background color`,
                    "        type: variable-color",
                    "        format: hex",
                    `        default: '#ffffff'`]);
            }
        });
        instructions.push("*/");
        const vault = plugin.app.vault;
        const pathDir = ".obsidian/snippets";
        yield vault.adapter.mkdir(pathDir);
        const path = ".obsidian/snippets/supercharged-links-gen.css";
        if (yield vault.adapter.exists(path)) {
            yield vault.adapter.remove(path);
        }
        yield plugin.app.vault.create(path, instructions.join('\n'));
        // Activate snippet
        if (plugin.settings.activateSnippet) {
            // @ts-ignore
            const customCss = plugin.app.customCss;
            customCss.readCssFolders();
            customCss.setCssEnabledStatus('supercharged-links-gen', true);
        }
        // Ensure Style Settings reads changes
        plugin.app.workspace.trigger("parse-style-settings");
    });
}

class SuperchargedLinksSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
        this.debouncedGenerate = obsidian.debounce(this._generateSnippet, 1000, true);
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        /* Managing extra attirbutes for a.internal-link */
        new obsidian.Setting(containerEl)
            .setName('Target Attributes for styling')
            .setDesc('Frontmatter attributes to target, comma separated')
            .addTextArea((text) => {
            text
                .setPlaceholder('Enter attributes as string, comma separated')
                .setValue(this.plugin.settings.targetAttributes.join(', '))
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.targetAttributes = value.replace(/\s/g, '').split(',');
                if (this.plugin.settings.targetAttributes.length === 1 && !this.plugin.settings.targetAttributes[0]) {
                    this.plugin.settings.targetAttributes = [];
                }
                yield this.plugin.saveSettings();
            }));
            text.inputEl.rows = 6;
            text.inputEl.cols = 25;
        });
        containerEl.createEl('h4', { text: 'Styling' });
        const styleSettingDescription = containerEl.createDiv();
        styleSettingDescription.innerHTML = `
Styling can be done using the Style Settings plugin. Follow the steps below:
 <ol>
 <li>Create selectors down below.</li>
 <li>Go to the Style Settings tab and style your links!</li>
</ol>`;
        const selectorDiv = containerEl.createDiv();
        this.drawSelectors(selectorDiv);
        containerEl.createEl('h4', { text: 'Settings' });
        new obsidian.Setting(containerEl)
            .setName('Enable in Editor')
            .setDesc('If true, this will also supercharge internal links in the editor view of a note.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableEditor);
            toggle.onChange(value => {
                this.plugin.settings.enableEditor = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in File Browser')
            .setDesc('If true, this will also supercharge the file browser.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableFileList);
            toggle.onChange(value => {
                this.plugin.settings.enableFileList = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in Plugins')
            .setDesc('If true, this will also supercharge plugins like the backlinks and forward links panels.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableBacklinks);
            toggle.onChange(value => {
                this.plugin.settings.enableBacklinks = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in Quick Switcher')
            .setDesc('If true, this will also supercharge the quick switcher.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableQuickSwitcher);
            toggle.onChange(value => {
                this.plugin.settings.enableQuickSwitcher = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in Link Autocompleter')
            .setDesc('If true, this will also supercharge the link autocompleter.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableSuggestor);
            toggle.onChange(value => {
                this.plugin.settings.enableSuggestor = value;
                this.plugin.saveSettings();
            });
        });
        containerEl.createEl('h4', { text: 'Advanced' });
        // Managing choice wether you want to parse tags both from normal tags and in the frontmatter
        new obsidian.Setting(containerEl)
            .setName('Parse all tags in the file')
            .setDesc('Sets the `data-link-tags`-attribute to look for tags both in the frontmatter and in the file as #tag-name')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.targetTags);
            toggle.onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.targetTags = value;
                yield this.plugin.saveSettings();
            }));
        });
        // Managing choice wether you get attributes from inline fields and frontmatter or only frontmater
        new obsidian.Setting(containerEl)
            .setName('Search for attribute in Inline fields like <field::>')
            .setDesc('Sets the `data-link-<field>`-attribute to the value of inline fields')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.getFromInlineField);
            toggle.onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.getFromInlineField = value;
                yield this.plugin.saveSettings();
            }));
        });
        // Managing choice wether you get attributes from inline fields and frontmatter or only frontmater
        new obsidian.Setting(containerEl)
            .setName('Automatically activate snippet')
            .setDesc('If true, this will automatically activate the generated CSS snippet "supercharged-links-gen.css". ' +
            'Turn this off if you don\'t want this to happen.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.activateSnippet);
            toggle.onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.activateSnippet = value;
                yield this.plugin.saveSettings();
            }));
        });
        /* Managing predefined values for properties */
        /* Manage menu options display*/
        new obsidian.Setting(containerEl)
            .setName("Display field options in context menu")
            .setDesc("Choose to show or hide fields options in the context menu of a link or a file")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.displayFieldsInContextMenu);
            toggle.onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.displayFieldsInContextMenu = value;
                yield this.plugin.saveSettings();
            }));
        });
        /* Exclude Fields from context menu*/
        new obsidian.Setting(containerEl)
            .setName('Ignored fields')
            .setDesc('Fields to be ignored by the plugin when adding options to the context menu')
            .addTextArea((text) => {
            text
                .setPlaceholder('Enter fields as string, comma separated')
                .setValue(this.plugin.settings.globallyIgnoredFields.join(', '))
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.globallyIgnoredFields = value.replace(/\s/g, '').split(',');
                yield this.plugin.saveSettings();
            }));
            text.inputEl.rows = 6;
            text.inputEl.cols = 25;
        });
        /* Set classFiles Path*/
        new obsidian.Setting(containerEl)
            .setName('class Files path')
            .setDesc('Path to the files containing the authorized fields for a type of note')
            .addText((text) => {
            text
                .setPlaceholder('Path/')
                .setValue(this.plugin.settings.classFilesPath)
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.classFilesPath = value;
                yield this.plugin.saveSettings();
            }));
        });
        /* Add new property for which we want to preset values*/
        new obsidian.Setting(containerEl)
            .setName("Add New Property Manager")
            .setDesc("Add a new Frontmatter property for which you want preset values.")
            .addButton((button) => {
            return button
                .setTooltip("Add New Property Manager")
                .setButtonText("+")
                .onClick(() => __awaiter(this, void 0, void 0, function* () {
                let modal = new FieldSettingsModal(this.app, this.plugin, containerEl);
                modal.open();
            }));
        });
        /* Managed properties that currently have preset values */
        this.plugin.initialProperties.forEach(prop => {
            const property = new Field();
            Object.assign(property, prop);
            new FieldSetting(containerEl, property, this.app, this.plugin);
        });
    }
    generateSnippet() {
        this.debouncedGenerate();
    }
    _generateSnippet() {
        return __awaiter(this, void 0, void 0, function* () {
            yield buildCSS(this.plugin.settings.selectors, this.plugin);
            // new Notice("Generated supercharged-links-gen.css");
        });
    }
    drawSelectors(div) {
        div.empty();
        this.generateSnippet();
        const selectors = this.plugin.settings.selectors;
        selectors.forEach((selector, i) => {
            const s = new obsidian.Setting(div)
                .addButton(button => {
                button.onClick(() => {
                    const oldSelector = selectors[i + 1];
                    selectors[i + 1] = selector;
                    selectors[i] = oldSelector;
                    this.drawSelectors(div);
                });
                button.setIcon("down-arrow-with-tail");
                button.setTooltip("Move selector down");
                if (i === selectors.length - 1) {
                    button.setDisabled(true);
                }
            })
                .addButton(button => {
                button.onClick(() => {
                    const oldSelector = selectors[i - 1];
                    selectors[i - 1] = selector;
                    selectors[i] = oldSelector;
                    this.drawSelectors(div);
                });
                button.setIcon("up-arrow-with-tail");
                button.setTooltip("Move selector up");
                if (i === 0) {
                    button.setDisabled(true);
                }
            })
                .addButton(button => {
                button.onClick(() => {
                    const formModal = new CSSBuilderModal(this.plugin, (newSelector) => {
                        this.plugin.settings.selectors[i] = newSelector;
                        this.plugin.saveSettings();
                        updateDisplay(s.nameEl, selector, this.plugin.settings);
                        this.generateSnippet();
                    }, selector);
                    formModal.open();
                });
                button.setIcon("pencil");
                button.setTooltip("Edit selector");
            })
                .addButton(button => {
                button.onClick(() => {
                    this.plugin.settings.selectors.remove(selector);
                    this.plugin.saveSettings();
                    this.drawSelectors(div);
                });
                button.setIcon("cross");
                button.setTooltip("Remove selector");
            });
            updateDisplay(s.nameEl, selector, this.plugin.settings);
        });
        new obsidian.Setting(div)
            .setName("New selector")
            .setDesc("Create a new selector to style with Style Settings.")
            .addButton(button => {
            button.onClick(() => {
                const formModal = new CSSBuilderModal(this.plugin, (newSelector) => {
                    this.plugin.settings.selectors.push(newSelector);
                    this.plugin.saveSettings();
                    this.drawSelectors(div);
                    // TODO: Force redraw somehow?
                });
                formModal.open();
            });
            button.setButtonText("New");
        });
    }
}

function clearExtraAttributes(link) {
    Object.values(link.attributes).forEach(attr => {
        if (attr.name.includes("data-link")) {
            link.removeAttribute(attr.name);
        }
    });
}
function fetchTargetAttributesSync(app, settings, dest, addDataHref) {
    var _a;
    let new_props = { tags: "" };
    const cache = app.metadataCache.getFileCache(dest);
    if (!cache)
        return new_props;
    const frontmatter = cache.frontmatter;
    if (frontmatter) {
        settings.targetAttributes.forEach(attribute => {
            if (Object.keys(frontmatter).includes(attribute)) {
                if (attribute === 'tag' || attribute === 'tags') {
                    new_props['tags'] += frontmatter[attribute];
                }
                else {
                    new_props[attribute] = frontmatter[attribute];
                }
            }
        });
    }
    if (settings.targetTags) {
        new_props["tags"] += obsidian.getAllTags(cache).join(' ');
    }
    if (addDataHref) {
        new_props['data-href'] = dest.basename;
    }
    new_props['path'] = dest.path;
    //@ts-ignore
    const getResults = (api) => {
        const page = api.page(dest.path);
        if (!page) {
            return;
        }
        settings.targetAttributes.forEach((field) => {
            const value = page[field];
            if (value)
                new_props[field] = value;
        });
    };
    if (settings.getFromInlineField && app.plugins.enabledPlugins.has("dataview")) {
        const api = (_a = app.plugins.plugins.dataview) === null || _a === void 0 ? void 0 : _a.api;
        if (api) {
            getResults(api);
        }
        else
            this.plugin.registerEvent(this.app.metadataCache.on("dataview:api-ready", (api) => getResults(api)));
    }
    return new_props;
}
function setLinkNewProps(link, new_props) {
    // @ts-ignore
    for (const a of link.attributes) {
        if (a.name.includes("data-link") && !(a.name in new_props)) {
            link.removeAttribute(a.name);
        }
    }
    Object.keys(new_props).forEach(key => {
        const name = "data-link-" + key;
        const newValue = new_props[key];
        const curValue = link.getAttribute(name);
        // Only update if value is different
        if (!newValue || curValue != newValue) {
            link.setAttribute("data-link-" + key, new_props[key]);
        }
    });
    if (!link.hasClass("data-link-icon")) {
        link.addClass("data-link-icon");
    }
    if (!link.hasClass("data-link-icon-after")) {
        link.addClass("data-link-icon-after");
    }
    if (!link.hasClass("data-link-text")) {
        link.addClass("data-link-text");
    }
}
function updateLinkExtraAttributes(app, settings, link, destName) {
    const linkHref = link.getAttribute('href').split('#')[0];
    const dest = app.metadataCache.getFirstLinkpathDest(linkHref, destName);
    if (dest) {
        const new_props = fetchTargetAttributesSync(app, settings, dest, false);
        setLinkNewProps(link, new_props);
    }
}
function updateDivExtraAttributes(app, settings, link, destName, linkName) {
    if (!linkName) {
        linkName = link.textContent;
    }
    const dest = app.metadataCache.getFirstLinkpathDest(obsidian.getLinkpath(linkName), destName);
    if (dest) {
        const new_props = fetchTargetAttributesSync(app, settings, dest, true);
        setLinkNewProps(link, new_props);
    }
}
function updateElLinks(app, plugin, el, ctx) {
    const settings = plugin.settings;
    const links = el.querySelectorAll('a.internal-link');
    const destName = ctx.sourcePath.replace(/(.*).md/, "$1");
    links.forEach((link) => {
        updateLinkExtraAttributes(app, settings, link, destName);
    });
}
function updateVisibleLinks(app, plugin) {
    const settings = plugin.settings;
    app.workspace.iterateRootLeaves((leaf) => {
        if (leaf.view instanceof obsidian.MarkdownView && leaf.view.file) {
            const file = leaf.view.file;
            const cachedFile = app.metadataCache.getFileCache(file);
            if (cachedFile.links) {
                cachedFile.links.forEach((link) => {
                    const fileName = file.path.replace(/(.*).md/, "$1");
                    const dest = app.metadataCache.getFirstLinkpathDest(link.link, fileName);
                    if (dest) {
                        const new_props = fetchTargetAttributesSync(app, settings, dest, false);
                        const internalLinks = leaf.view.containerEl.querySelectorAll(`a.internal-link[href="${link.link}"]`);
                        internalLinks.forEach((internalLink) => setLinkNewProps(internalLink, new_props));
                    }
                });
            }
        }
    });
}

const DEFAULT_SETTINGS = {
    targetAttributes: [],
    targetTags: true,
    presetFields: [],
    displayFieldsInContextMenu: true,
    globallyIgnoredFields: [],
    classFilesPath: "",
    getFromInlineField: true,
    activateSnippet: true,
    enableEditor: true,
    enableFileList: true,
    enableBacklinks: true,
    enableQuickSwitcher: true,
    enableSuggestor: true,
    selectors: []
};

function replaceValues(app, file, attribute, input) {
    return __awaiter(this, void 0, void 0, function* () {
        app.vault.read(file).then((result) => {
            let newContent = [];
            let foreHeadText = false;
            let frontmatterStart = false;
            let frontmatterEnd = false;
            let inFrontmatter = false;
            result.split('\n').map(line => {
                if (line != "---" && !foreHeadText && !frontmatterStart) {
                    foreHeadText = true;
                }
                if (line == "---" && !foreHeadText) {
                    if (!frontmatterStart) {
                        frontmatterStart = true;
                        inFrontmatter = true;
                    }
                    else if (!frontmatterEnd) {
                        frontmatterEnd = true;
                        inFrontmatter = false;
                    }
                }
                if (inFrontmatter) {
                    const regex = new RegExp(`${attribute}:`, 'u');
                    const regexResult = line.match(regex);
                    if (regexResult && regexResult.length > 0) {
                        const inputArray = input ? input.replace(/(\,\s+)/g, ',').split(',') : [""];
                        const newValue = inputArray.length == 1 ? inputArray[0] : `[${inputArray.join(', ')}]`;
                        newContent.push(`${attribute}: ${newValue}`);
                    }
                    else {
                        newContent.push(`${line}`);
                    }
                }
                else {
                    const regex = new RegExp(`([_\*~\`]*)${attribute}([_\*~\`]*)(\\s*)::`, 'u');
                    const r = line.match(regex);
                    if (r && r.length > 0) {
                        const inputArray = input ? input.replace(/(\,\s+)/g, ',').split(',') : [""];
                        const newValue = inputArray.length == 1 ? inputArray[0] : `${inputArray.join(', ')}`;
                        newContent.push(`${r[1]}${attribute}${r[2]}${r[3]}:: ${newValue}`);
                    }
                    else {
                        newContent.push(line);
                    }
                }
            });
            app.vault.modify(file, newContent.join('\n'));
        });
    });
}

class valueMultiSelectModal extends obsidian.Modal {
    constructor(app, file, name, initialValues, settings, lineNumber = -1, inFrontMatter = false, top = false) {
        super(app);
        this.app = app;
        this.file = file;
        this.name = name;
        this.settings = settings;
        this.values = initialValues ? initialValues.toString().replace(/^\[(.*)\]$/, "$1").split(",").map(item => item.trim()) : [];
        this.lineNumber = lineNumber;
        this.inFrontmatter = inFrontMatter;
        this.top = top;
    }
    onOpen() {
        const valueGrid = this.contentEl.createDiv({
            cls: "frontmatter-values-grid"
        });
        FieldSetting.getValuesListFromNote(this.settings.valuesListNotePath, this.app).then(listNoteValues => {
            this.populateValuesGrid(valueGrid, listNoteValues);
        });
    }
    buildValueToggler(valueGrid, presetValue) {
        const valueSelectorContainer = valueGrid.createDiv({
            cls: "frontmatter-value-selector-container"
        });
        const valueTogglerContainer = valueSelectorContainer.createDiv({
            cls: "frontmatter-value-selector-toggler"
        });
        const valueToggler = new obsidian.ToggleComponent(valueTogglerContainer);
        this.values.forEach(value => {
            if (value == presetValue) {
                valueToggler.setValue(true);
            }
        });
        valueToggler.onChange(value => {
            if (value && !this.values.includes(presetValue)) {
                this.values.push(presetValue);
            }
            if (!value) {
                this.values.remove(presetValue);
            }
        });
        const valueLabel = valueSelectorContainer.createDiv({
            cls: "frontmatter-value-selector-label"
        });
        valueLabel.setText(presetValue);
    }
    populateValuesGrid(valueGrid, listNoteValues) {
        Object.keys(this.settings.values).forEach(key => {
            const presetValue = this.settings.values[key];
            this.buildValueToggler(valueGrid, presetValue);
        });
        listNoteValues.forEach(value => {
            this.buildValueToggler(valueGrid, value);
        });
        const footer = this.contentEl.createDiv({
            cls: "frontmatter-value-grid-footer"
        });
        const saveButton = new obsidian.ButtonComponent(footer);
        saveButton.setIcon("checkmark");
        saveButton.onClick(() => {
            if (this.lineNumber == -1) {
                replaceValues(this.app, this.file, this.name, this.values.join(","));
            }
            else {
                this.app.vault.read(this.file).then(result => {
                    let newContent = [];
                    if (this.top) {
                        newContent.push(`${this.name}${this.inFrontmatter ? ":" : "::"} ${this.values.join(",")}`);
                        result.split("\n").forEach((line, _lineNumber) => newContent.push(line));
                    }
                    else {
                        result.split("\n").forEach((line, _lineNumber) => {
                            newContent.push(line);
                            if (_lineNumber == this.lineNumber) {
                                newContent.push(`${this.name}${this.inFrontmatter ? ":" : "::"} ${this.values.join(",")}`);
                            }
                        });
                    }
                    this.app.vault.modify(this.file, newContent.join('\n'));
                    this.close();
                });
            }
            this.close();
        });
        const cancelButton = new obsidian.ExtraButtonComponent(footer);
        cancelButton.setIcon("cross");
        cancelButton.onClick(() => this.close());
    }
}

class valueTextInputModal extends obsidian.Modal {
    constructor(app, file, name, value, lineNumber = -1, inFrontMatter = false, top = false) {
        super(app);
        this.app = app;
        this.file = file;
        this.name = name;
        this.value = value;
        this.lineNumber = lineNumber;
        this.inFrontmatter = inFrontMatter;
        this.top = top;
    }
    onOpen() {
        const inputDiv = this.contentEl.createDiv({
            cls: "frontmatter-modal-value"
        });
        this.buildInputEl(inputDiv);
    }
    buildInputEl(inputDiv) {
        const form = inputDiv.createEl("form");
        form.type = "submit";
        form.onsubmit = (e) => {
            e.preventDefault();
            if (this.lineNumber == -1) {
                replaceValues(this.app, this.file, this.name, inputEl.getValue());
            }
            else {
                this.app.vault.read(this.file).then(result => {
                    let newContent = [];
                    if (this.top) {
                        newContent.push(`${this.name}${this.inFrontmatter ? ":" : "::"} ${inputEl.getValue()}`);
                        result.split("\n").forEach((line, _lineNumber) => newContent.push(line));
                    }
                    else {
                        result.split("\n").forEach((line, _lineNumber) => {
                            newContent.push(line);
                            if (_lineNumber == this.lineNumber) {
                                newContent.push(`${this.name}${this.inFrontmatter ? ":" : "::"} ${inputEl.getValue()}`);
                            }
                        });
                    }
                    this.app.vault.modify(this.file, newContent.join('\n'));
                    this.close();
                });
            }
            this.close();
        };
        const inputEl = new obsidian.TextComponent(form);
        inputEl.inputEl.focus();
        inputEl.setValue(this.value);
        inputEl.inputEl.addClass("frontmatter-prompt-input");
    }
}

class valueToggleModal$1 extends obsidian.Modal {
    constructor(app, file, name, value) {
        super(app);
        this.app = app;
        this.file = file;
        this.name = name;
        this.value = value;
    }
    onOpen() {
        const inputDiv = this.contentEl.createDiv({
            cls: "frontmatter-toggler"
        });
        this.buildInputEl(inputDiv);
    }
    buildInputEl(inputDiv) {
        const inputEl = new obsidian.ToggleComponent(inputDiv);
        inputEl.setValue(this.value);
        inputEl.onChange(v => {
            replaceValues(this.app, this.file, this.name, v ? "true" : "false");
        });
    }
}

class valueToggleModal extends obsidian.Modal {
    constructor(app, file, name, value, settings, lineNumber = -1, inFrontMatter = false, top = false) {
        super(app);
        this.app = app;
        this.file = file;
        this.name = name;
        this.value = value;
        this.settings = settings;
        this.newValue = null;
        this.lineNumber = lineNumber;
        this.inFrontmatter = inFrontMatter;
        this.top = top;
    }
    onOpen() {
        const inputDiv = this.contentEl.createDiv({
            cls: "frontmatter-modal-value"
        });
        this.buildInputEl(inputDiv);
    }
    buildInputEl(inputDiv) {
        const selectEl = new obsidian.DropdownComponent(inputDiv);
        selectEl.selectEl.addClass("frontmatter-select");
        const values = this.settings.values;
        selectEl.addOption("", "--Empty--");
        Object.keys(values).forEach(key => {
            selectEl.addOption(values[key], values[key]);
        });
        if (Object.values(values).includes(this.value)) {
            selectEl.setValue(this.value);
        }
        FieldSetting.getValuesListFromNote(this.settings.valuesListNotePath, this.app).then(listNoteValues => {
            listNoteValues.forEach(value => selectEl.addOption(value, value));
            if (listNoteValues.includes(this.value)) {
                selectEl.setValue(this.value);
            }
            selectEl.onChange(value => this.newValue = value != "--Empty--" ? value : "");
            const submitButton = new obsidian.ButtonComponent(inputDiv);
            submitButton.setTooltip("Save")
                .setIcon("checkmark")
                .onClick(() => __awaiter(this, void 0, void 0, function* () {
                if (this.lineNumber == -1) {
                    if (this.newValue || this.newValue == "") {
                        replaceValues(this.app, this.file, this.name, this.newValue);
                    }
                }
                else {
                    this.app.vault.read(this.file).then(result => {
                        let newContent = [];
                        if (this.top) {
                            newContent.push(`${this.name}${this.inFrontmatter ? ":" : "::"} ${selectEl.getValue()}`);
                            result.split("\n").forEach((line, _lineNumber) => newContent.push(line));
                        }
                        else {
                            result.split("\n").forEach((line, _lineNumber) => {
                                newContent.push(line);
                                if (_lineNumber == this.lineNumber) {
                                    newContent.push(`${this.name}${this.inFrontmatter ? ":" : "::"} ${selectEl.getValue()}`);
                                }
                            });
                        }
                        this.app.vault.modify(this.file, newContent.join('\n'));
                        this.close();
                    });
                }
                this.close();
            }));
        });
    }
}

class addNewFieldModal extends obsidian.Modal {
    constructor(plugin, lineNumber, file, inFrontmatter, top) {
        super(plugin.app);
        this.lineNumber = lineNumber;
        this.inFrontmatter = inFrontmatter;
        this.file = file;
        this.top = top;
    }
    onOpen() {
        this.titleEl.setText("Insert new field");
        const addNewFieldContainer = this.contentEl.createDiv();
        const nameInputContainer = addNewFieldContainer.createDiv();
        nameInputContainer.setText("Field Name: ");
        const nameInputEl = new obsidian.TextComponent(nameInputContainer);
        nameInputEl.setPlaceholder("Field name");
        const valueInputContainer = addNewFieldContainer.createDiv();
        valueInputContainer.setText("Field value: ");
        const valueInputEl = new obsidian.TextComponent(valueInputContainer);
        valueInputEl.setPlaceholder("Field value");
        const footerButtons = this.contentEl.createDiv({
            cls: 'frontmatter-textarea-buttons'
        });
        const saveButton = new obsidian.ButtonComponent(footerButtons);
        saveButton.setIcon("checkmark");
        saveButton.onClick(() => {
            this.app.vault.read(this.file).then(result => {
                let newContent = [];
                if (this.top) {
                    newContent.push(`${nameInputEl.getValue()}${this.inFrontmatter ? ":" : "::"} ${valueInputEl.getValue()}`);
                    result.split("\n").forEach((line, _lineNumber) => newContent.push(line));
                }
                else {
                    result.split("\n").forEach((line, _lineNumber) => {
                        newContent.push(line);
                        if (_lineNumber == this.lineNumber) {
                            newContent.push(`${nameInputEl.getValue()}${this.inFrontmatter ? ":" : "::"} ${valueInputEl.getValue()}`);
                        }
                    });
                }
                this.app.vault.modify(this.file, newContent.join('\n'));
                this.close();
            });
        });
        const cancelButton = new obsidian.ExtraButtonComponent(footerButtons);
        cancelButton.setIcon("cross");
        cancelButton.onClick(() => {
            this.close();
        });
    }
}

class fieldSelectModal extends obsidian.Modal {
    constructor(plugin, file, lineNumber, line, inFrontmatter, top) {
        super(plugin.app);
        this.line = line;
        this.lineNumber = lineNumber;
        this.plugin = plugin;
        this.file = file;
        this.inFrontmatter = inFrontmatter;
        this.top = top;
    }
    onOpen() {
        this.titleEl.setText(`Insert field after > ${this.line.substring(0, 20)}${this.line.length > 20 ? "..." : ""}`);
        const container = this.contentEl.createDiv();
        const settingsDropdownContainer = container.createDiv();
        const settingsSelector = new obsidian.DropdownComponent(settingsDropdownContainer);
        settingsSelector.addOption("---", "Choose Field");
        settingsSelector.addOption("++New", "New");
        this.plugin.settings.presetFields.forEach(setting => {
            settingsSelector.addOption(setting.name, setting.name);
        });
        settingsSelector.onChange(value => {
            if (value == "++New") {
                const newFieldModal = new addNewFieldModal(this.plugin, this.lineNumber, this.file, this.inFrontmatter, this.top);
                newFieldModal.open();
                this.close();
            }
            else {
                const field = this.plugin.settings.presetFields.filter(_field => _field.name == value)[0];
                if (field.valuesListNotePath || (field.values && Object.keys(field.values).length > 0)) {
                    if (field.isMulti) {
                        const fieldModal = new valueMultiSelectModal(this.app, this.file, field.name, "", field, this.lineNumber, this.inFrontmatter, this.top);
                        fieldModal.titleEl.setText(`Select values for ${value}`);
                        fieldModal.open();
                    }
                    else {
                        const fieldModal = new valueToggleModal(this.app, this.file, field.name, "", field, this.lineNumber, this.inFrontmatter, this.top);
                        fieldModal.titleEl.setText(`Select value for ${value}`);
                        fieldModal.open();
                    }
                }
                else {
                    const fieldModal = new valueTextInputModal(this.app, this.file, value, "", this.lineNumber, this.inFrontmatter, this.top);
                    fieldModal.titleEl.setText(`Enter value for ${value}`);
                    fieldModal.open();
                }
                this.close();
            }
        });
    }
}

class chooseSectionModal extends obsidian.Modal {
    constructor(plugin, file) {
        super(plugin.app);
        this.file = file;
        this.plugin = plugin;
    }
    onOpen() {
        this.titleEl.setText("Add a field in this note after:");
        const inputDiv = this.contentEl.createDiv({
            cls: "frontmatter-modal-value"
        });
        const selectEl = new obsidian.DropdownComponent(inputDiv);
        selectEl.selectEl.addClass("frontmatter-select");
        selectEl.addOption("", "Select line");
        selectEl.addOption("top_0", "top");
        this.app.vault.read(this.file).then(result => {
            let foreHeadText = false;
            let frontmatterStart = false;
            let frontmatterEnd = false;
            let inFrontmatter = false;
            result.split("\n").forEach((line, lineNumber) => {
                if (line != "---" && !foreHeadText && !frontmatterStart) {
                    foreHeadText = true;
                }
                if (line == "---" && !foreHeadText) {
                    if (!frontmatterStart) {
                        frontmatterStart = true;
                        inFrontmatter = true;
                    }
                    else if (!frontmatterEnd) {
                        frontmatterEnd = true;
                        inFrontmatter = false;
                    }
                }
                if (inFrontmatter) {
                    selectEl.addOption(`frontmatter_${lineNumber}`, `${line.substring(0, 30)}${line.length > 30 ? "..." : ""}`);
                }
                else {
                    selectEl.addOption(`body_${lineNumber}`, `${line.substring(0, 30)}${line.length > 30 ? "..." : ""}`);
                }
            });
            selectEl.onChange(value => {
                const valueArray = selectEl.getValue().match(/(\w+)_(\d+)/);
                const position = valueArray[1];
                const lineNumber = Number(valueArray[2]);
                const inFrontmatter = position == "frontmatter" ? true : false;
                const top = position == "top" ? true : false;
                const modal = new fieldSelectModal(this.plugin, this.file, lineNumber, result.split('\n')[lineNumber], inFrontmatter, top);
                this.close();
                modal.open();
            });
        });
    }
}

const types = {
    "input": "Accepts any value",
    "select": "Accepts a single value from a list",
    "multi": "Accepts multiple values from a list",
    "cycle": "Cycle through values from a list"
};
class FileClassAttribute {
    constructor(raw) {
        const completeRegex = new RegExp(/^[_\*~`]*([0-9\w\p{Letter}\p{Emoji_Presentation}][-0-9\w\p{Letter}\p{Emoji_Presentation}\s]*)[_\*~`]*\s*::(.+)?/u);
        const nameRegex = new RegExp(/^[_\*~`]*([0-9\w\p{Letter}\p{Emoji_Presentation}][-0-9\w\p{Letter}\p{Emoji_Presentation}\s]*)[_\*~`]*\s*$/u);
        const detailedFieldRaw = raw.match(completeRegex);
        const simpleFieldRaw = raw.match(nameRegex);
        if (detailedFieldRaw) {
            this.name = detailedFieldRaw[1].trim();
            const settings = JSON.parse(`${detailedFieldRaw[2].trim()}`);
            this.type = settings['type'];
            switch (this.type) {
                case "multi":
                    this.isMulti = true;
                    break;
                case "cycle":
                    this.isCycle = true;
                    break;
            }
            this.options = settings['options'];
        }
        else if (simpleFieldRaw) {
            this.name = simpleFieldRaw[0].trim();
        }
        else {
            const error = new Error("Improper value");
            throw error;
        }
    }
    getField() {
        let values = {};
        this.options.forEach((option, index) => {
            values[index] = option;
        });
        return new Field(this.name, values, this.name, this.isMulti, this.isCycle);
    }
}

class FileClassManager {
    constructor(instance) {
        this.instance = instance;
    }
    all() {
        const filesWithFileClassName = this.instance.plugin.app.vault.getMarkdownFiles().filter(file => {
            const cache = this.instance.plugin.app.metadataCache.getFileCache(file);
            return cache.frontmatter
                && Object.keys(cache.frontmatter).includes('fileClass')
                && cache.frontmatter['fileClass'] == this.instance.name;
        });
        return filesWithFileClassName;
    }
    get(name) {
        const filesWithName = this.all().filter(file => file.basename == name);
        if (filesWithName.length > 1) {
            const error = new Error("More than one value found");
            throw error;
        }
        if (filesWithName.length == 0) {
            const error = new Error("No file value found");
            throw error;
        }
        return filesWithName[0];
    }
    getPath(path) {
        const filesWithName = this.all().filter(file => file.path == path);
        if (filesWithName.length > 1) {
            const error = new Error("More than one value found");
            throw error;
        }
        if (filesWithName.length == 0) {
            const error = new Error("No file value found");
            throw error;
        }
        return filesWithName[0];
    }
}
class FileClass {
    constructor(plugin, name) {
        this.plugin = plugin;
        this.name = name,
            this.objects = new FileClassManager(this);
        this.attributes = [];
    }
    getClassFile() {
        const filesClassPath = this.plugin.settings.classFilesPath;
        const files = this.plugin.app.vault.getMarkdownFiles().filter(file => file.path == `${filesClassPath}${this.name}.md`);
        if (files.length == 0) {
            const error = new Error("no such fileClass in fileClass folder");
            throw error;
        }
        else {
            return files[0];
        }
    }
    getAttributes() {
        return new Promise((resolve, reject) => {
            try {
                const file = this.getClassFile();
                let attributes = [];
                let errors = [];
                this.plugin.app.vault.read(file).then(result => {
                    result.split('\n').forEach(line => {
                        try {
                            const attribute = new FileClassAttribute(line);
                            attributes.push(attribute);
                        }
                        catch (error) {
                            errors.push(error);
                        }
                    });
                    this.attributes = attributes;
                    this.errors = errors;
                    resolve();
                });
            }
            catch (error) {
                reject(error);
            }
        });
    }
    updateAttribute(newType, newOptions, newName, attr) {
        return new Promise((resolve, reject) => {
            const file = this.getClassFile();
            this.plugin.app.vault.read(file).then(result => {
                if (attr) {
                    let newContent = [];
                    result.split('\n').forEach(line => {
                        if (line.startsWith(attr.name)) {
                            if (newType == "input") {
                                newContent.push(newName);
                            }
                            else {
                                let settings = {};
                                settings["type"] = newType;
                                settings["options"] = newOptions;
                                newContent.push(`${newName}:: ${JSON.stringify(settings)}`);
                            }
                        }
                        else {
                            newContent.push(line);
                        }
                    });
                    this.plugin.app.vault.modify(file, newContent.join('\n'));
                }
                else {
                    let settings = {};
                    settings["type"] = newType;
                    settings["options"] = newOptions;
                    result += (`\n${newName}:: ${JSON.stringify(settings)}`);
                    this.plugin.app.vault.modify(file, result);
                }
                resolve();
            });
        });
    }
    removeAttribute(attr) {
        return new Promise((resolve, reject) => {
            const file = this.getClassFile();
            this.plugin.app.vault.read(file).then(result => {
                let newContent = [];
                result.split('\n').forEach(line => {
                    if (!line.startsWith(attr.name)) {
                        newContent.push(line);
                    }
                });
                this.plugin.app.vault.modify(file, newContent.join('\n'));
                resolve();
            });
        });
    }
}
function createFileClass(plugin, name) {
    return __awaiter(this, void 0, void 0, function* () {
        return new Promise((resolve, reject) => {
            const fileClass = new FileClass(plugin, name);
            fileClass.getAttributes().then(() => {
                resolve(fileClass);
            }).catch((error) => {
                reject(error);
            });
        });
    });
}

class FileClassAttributeModal extends obsidian.Modal {
    constructor(app, fileClass, attr) {
        super(app);
        this.type = "input";
        this.options = [];
        this.name = "";
        this.attr = attr;
        this.fileClass = fileClass;
        if (this.attr) {
            this.type = this.attr.type || "input";
            this.options = this.attr.options;
            this.name = this.attr.name;
        }
    }
    onOpen() {
        //title
        this.titleEl.setText(this.attr ? `Manage ${this.attr.name}` : `Create a new attribute for ${this.fileClass.name}`);
        //name input
        const nameInputContainer = this.contentEl.createDiv();
        nameInputContainer.setText("name");
        const nameInput = new obsidian.TextComponent(nameInputContainer);
        this.attr ? nameInput.setValue(this.attr.name) : nameInput.setPlaceholder("Type a name for this attribute");
        //header for select
        const typeSelectHeader = this.contentEl.createDiv();
        const attrLine = typeSelectHeader.createEl("div");
        const attrName = attrLine.createEl("strong");
        attrName.setText(`<${this.name}>`);
        attrLine.append(" fields in files with:");
        String(`---\nfileClass: ${this.fileClass.name}\n...\n---`).split('\n').forEach(line => {
            typeSelectHeader.createEl("div", "yaml-frontmatter-red").setText(line);
        });
        // type select
        const typeSelectContainer = this.contentEl.createDiv({ cls: 'frontmatter-value-selector-container' });
        const typeSelectLabel = typeSelectContainer.createDiv({ cls: 'frontmatter-value-selector-inline-label' });
        typeSelectLabel.setText("will: ");
        const typeSelectDropDown = typeSelectContainer.createDiv({ cls: 'frontmatter-value-selector-toggler' });
        const typeSelect = new obsidian.DropdownComponent(typeSelectDropDown);
        Object.keys(types).forEach(key => {
            typeSelect.addOption(key, types[key]);
        });
        if (this.attr) {
            typeSelect.setValue(this.type);
        }
        // options input
        const optionsInputContainer = this.contentEl.createDiv({ cls: 'frontmatter-value-selector-container' });
        const optionsInputLabel = optionsInputContainer.createDiv({ cls: 'frontmatter-value-selector-inline-label-top' });
        optionsInputLabel.setText("Values");
        const optionsInput = new obsidian.TextAreaComponent(optionsInputContainer);
        optionsInput.inputEl.rows = 3;
        optionsInput.inputEl.cols = 26;
        this.attr ? optionsInput.setValue(this.type == "input" ? "" : this.options.join(", ")) : optionsInput.setPlaceholder("insert values, comma separated");
        !this.attr || this.type == "input" ? optionsInputContainer.hide() : optionsInputContainer.show();
        // event handlers
        typeSelect.onChange(type => {
            type == "input" ? optionsInputContainer.hide() : optionsInputContainer.show();
            this.type = type;
        });
        optionsInput.onChange(value => this.options = value.split(",").map(item => item.trim()));
        nameInput.onChange(value => { this.name = value; attrName.setText(`<${value}>`); });
        // footer buttons
        const footer = this.contentEl.createDiv({ cls: "frontmatter-value-grid-footer" });
        const saveButton = new obsidian.ButtonComponent(footer);
        saveButton.setIcon("checkmark");
        saveButton.onClick(() => {
            this.fileClass.updateAttribute(this.type, this.options, this.name, this.attr);
            this.close();
        });
        if (this.attr) {
            const removeButton = new obsidian.ButtonComponent(footer);
            removeButton.setIcon("trash");
            removeButton.onClick(() => {
                const confirmModal = new obsidian.Modal(this.app);
                confirmModal.titleEl.setText("Please confirm");
                confirmModal.contentEl.createDiv().setText(`Do you really want to remove ${this.attr.name} attribute from ${this.fileClass.name}?`);
                const confirmFooter = confirmModal.contentEl.createDiv({ cls: "frontmatter-value-grid-footer" });
                const confirmButton = new obsidian.ButtonComponent(confirmFooter);
                confirmButton.setIcon("checkmark");
                confirmButton.onClick(() => {
                    this.fileClass.removeAttribute(this.attr);
                    confirmModal.close();
                    this.close();
                });
                const dismissButton = new obsidian.ExtraButtonComponent(confirmFooter);
                dismissButton.setIcon("cross");
                dismissButton.onClick(() => this.close());
                confirmModal.open();
            });
        }
        const cancelButton = new obsidian.ExtraButtonComponent(footer);
        cancelButton.setIcon("cross");
        cancelButton.onClick(() => this.close());
    }
}

class FileClassAttributeSelectModal extends obsidian.Modal {
    constructor(plugin, file) {
        super(plugin.app);
        this.file = file;
        this.plugin = plugin;
    }
    onOpen() {
        this.titleEl.setText(`Select the field to update`);
        createFileClass(this.plugin, this.file.basename).then(fileClass => {
            this.titleEl.setText(`Select the field to update in ${fileClass.name}`);
            const selectContainer = this.contentEl.createDiv();
            const select = new obsidian.DropdownComponent(selectContainer);
            select.addOption("select an attribute", "--select an attribute--");
            fileClass.attributes.forEach(attr => {
                select.addOption(attr.name, attr.name);
            });
            select.addOption("++newAttr++", "++Add a new attribute++");
            select.onChange((attrName) => {
                if (attrName == "++newAttr") {
                    const modal = new FileClassAttributeModal(this.plugin.app, fileClass);
                    modal.open();
                    this.close();
                }
                else {
                    const modal = new FileClassAttributeModal(this.plugin.app, fileClass, fileClass.attributes.filter(attr => attr.name == attrName)[0]);
                    modal.open();
                    this.close();
                }
            });
        });
    }
}

function isMenu(category) {
    return category.addItem !== undefined;
}
function isSelect(category) {
    return category.modals !== undefined;
}
class OptionsList {
    constructor(plugin, file, category) {
        this.file = file;
        this.plugin = plugin;
        this.category = category;
    }
    createExtraOptionList() {
        const cache = this.plugin.app.metadataCache.getCache(this.file.path);
        if (cache.frontmatter) {
            const _a = cache.frontmatter, attributes = __rest(_a, ["position"]);
            Object.keys(attributes).forEach(key => {
                if (this.plugin.settings.globallyIgnoredFields.includes(key)) {
                    delete attributes[key];
                }
            });
            if (isMenu(this.category)) {
                this.category.addSeparator();
            }
            let fileClassForFields = false;
            let fileClassFields = [];
            if (Object.keys(attributes).includes('fileClass')) {
                const fileClass = attributes['fileClass'];
                createFileClass(this.plugin, fileClass).then(fileClass => {
                    this.fileClass = fileClass;
                    fileClassFields = fileClass.attributes.map(attr => attr.name);
                    fileClassForFields = true;
                    Object.keys(attributes).forEach(key => {
                        if (!fileClassFields.includes(key) && key != 'fileClass') {
                            delete attributes[key];
                        }
                    });
                    const fileClassAttributeSelectModal = new FileClassAttributeSelectModal(this.plugin, this.fileClass.getClassFile());
                    if (isMenu(this.category)) {
                        this.category.addSeparator();
                        this.category.addItem((item) => {
                            item.setIcon("gear");
                            item.setTitle(`Manage <${this.fileClass.name}> fields`);
                            item.onClick((evt) => {
                                fileClassAttributeSelectModal.open();
                            });
                        });
                    }
                    else {
                        this.category.addOption("manage_fileClass_attributes", "Manage fileClass attributes");
                        this.category.modals["add_field_at_section"] = () => fileClassAttributeSelectModal.open();
                    }
                    this.createExtraOptionsListForFrontmatter(attributes).then(() => {
                        this.createExtraOptionsListForInlineFields(this.file, fileClassForFields, fileClassFields).then(() => {
                            if (isMenu(this.category)) {
                                this.category.addSeparator();
                            }
                            this.addSectionSelectModalOption(this.plugin);
                        });
                    });
                }).catch((error) => {
                    this.createExtraOptionsListForFrontmatter(attributes).then(() => {
                        this.createExtraOptionsListForInlineFields(this.file).then(() => {
                            if (isMenu(this.category)) {
                                this.category.addSeparator();
                            }
                            this.addSectionSelectModalOption(this.plugin);
                        });
                    });
                });
            }
            else {
                this.createExtraOptionsListForFrontmatter(attributes).then(() => {
                    this.createExtraOptionsListForInlineFields(this.file).then(() => {
                        if (isMenu(this.category)) {
                            this.category.addSeparator();
                        }
                        this.addSectionSelectModalOption(this.plugin);
                    });
                });
            }
        }
        else {
            this.createExtraOptionsListForInlineFields(this.file).then(() => {
                if (isMenu(this.category)) {
                    this.category.addSeparator();
                }
                this.addSectionSelectModalOption(this.plugin);
            });
        }
    }
    createExtraOptionsListForInlineFields(file, fileClassForFields = false, fileClassFields = []) {
        return __awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => {
                let attributes = {};
                const regex = new RegExp(/[_\*~`]*([0-9\w\p{Letter}\p{Emoji_Presentation}][-0-9\w\p{Letter}\p{Emoji_Presentation}\s]*)[_\*~`]*\s*::(.+)?/u);
                this.plugin.app.vault.read(file).then((result) => {
                    result.split('\n').map(line => {
                        const regexResult = line.match(regex);
                        if (regexResult
                            && regexResult.length > 0
                            && !this.plugin.settings.globallyIgnoredFields.includes(regexResult[1].trim())) {
                            if (fileClassForFields) {
                                if (fileClassFields.includes(regexResult[1].trim())) {
                                    attributes[regexResult[1].trim()] = regexResult.length > 1 && regexResult[2] ? regexResult[2].trim() : "";
                                }
                            }
                            else {
                                attributes[regexResult[1].trim()] = regexResult.length > 1 && regexResult[2] ? regexResult[2].trim() : "";
                            }
                        }
                    });
                    if (Object.keys(attributes).length > 0) {
                        if (isMenu(this.category)) {
                            this.category.addSeparator();
                        }
                        this.buildExtraOptionsList(attributes);
                    }
                    resolve();
                });
            });
        });
    }
    createExtraOptionsListForFrontmatter(attributes) {
        return __awaiter(this, void 0, void 0, function* () {
            this.buildExtraOptionsList(attributes);
        });
    }
    buildExtraOptionsList(attributes) {
        Object.keys(attributes).forEach((key) => {
            const value = attributes[key];
            const propertySettings = this.getPropertySettings(key);
            if (propertySettings && propertySettings.values) {
                if (propertySettings.isCycle) {
                    this.addCycleMenuOption(key, value, propertySettings);
                }
                else if (propertySettings.isMulti) {
                    this.addMultiMenuOption(key, value, propertySettings);
                }
                else {
                    this.addSelectMenuOption(key, value, propertySettings);
                }
            }
            else if (isBoolean(value) || /true/i.test(value) || /false/i.test(value)) {
                let toBooleanValue;
                if (isBoolean(value)) {
                    toBooleanValue = value;
                }
                else if (/true/i.test(value)) {
                    toBooleanValue = true;
                }
                else if (/false/i.test(value)) {
                    toBooleanValue = false;
                }
                this.addToggleMenuOption(key, toBooleanValue);
            }
            else {
                this.addTextInputMenuOption(key, value ? value.toString() : "");
            }
        });
    }
    addSectionSelectModalOption(plugin) {
        const modal = new chooseSectionModal(this.plugin, this.file);
        if (isMenu(this.category)) {
            this.category.addItem((item) => {
                item.setIcon("pencil");
                item.setTitle("Add field at section...");
                item.onClick((evt) => {
                    modal.open();
                });
            });
        }
        else if (isSelect(this.category)) {
            this.category.addOption("add_field_at_section", "Add field at section...");
            this.category.modals["add_field_at_section"] = () => modal.open();
        }
    }
    addCycleMenuOption(name, value, propertySettings) {
        const values = propertySettings.values;
        const keys = Object.keys(values);
        const keyForValue = keys.find(key => values[key] === value);
        let nextValue;
        if (keyForValue) {
            const nextKey = keys[(keys.indexOf(keyForValue) + 1) % keys.length];
            nextValue = values[nextKey];
        }
        else {
            nextValue = values[Object.keys(values)[0]];
        }
        if (isMenu(this.category)) {
            this.category.addItem((item) => {
                item.setTitle(`${name} : ${value} ▷ ${nextValue}`);
                item.setIcon('switch');
                item.onClick((evt) => {
                    replaceValues(this.plugin.app, this.file, name, nextValue);
                });
            });
        }
        else if (isSelect(this.category)) {
            this.category.addOption(`${name}_${value}_${nextValue}`, `${name} : ${value} ▷ ${nextValue}`);
            this.category.modals[`${name}_${value}_${nextValue}`] = () => replaceValues(this.plugin.app, this.file, name, nextValue);
        }
    }
    addMultiMenuOption(name, value, propertySettings) {
        const modal = new valueMultiSelectModal(this.plugin.app, this.file, name, value, propertySettings);
        modal.titleEl.setText("Select values");
        if (isMenu(this.category)) {
            this.category.addItem((item) => {
                item.setTitle(`Update <${name}>`);
                item.setIcon('bullet-list');
                item.onClick((evt) => {
                    modal.open();
                });
            });
        }
        else if (isSelect(this.category)) {
            this.category.addOption(`update_${name}`, `Update <${name}>`);
            this.category.modals[`update_${name}`] = () => modal.open();
        }
    }
    addSelectMenuOption(name, value, propertySettings) {
        const modal = new valueToggleModal(this.plugin.app, this.file, name, value, propertySettings);
        modal.titleEl.setText("Select value");
        if (isMenu(this.category)) {
            this.category.addItem((item) => {
                item.setTitle(`Update ${name}`);
                item.setIcon('right-triangle');
                item.onClick((evt) => modal.open());
            });
        }
        else if (isSelect(this.category)) {
            this.category.addOption(`update_${name}`, `Update <${name}>`);
            this.category.modals[`update_${name}`] = () => modal.open();
        }
    }
    addToggleMenuOption(name, value) {
        const modal = new valueToggleModal$1(this.plugin.app, this.file, name, value);
        modal.titleEl.setText(`Change Value for <${name}>`);
        if (isMenu(this.category)) {
            this.category.addItem((item) => {
                item.setTitle(`Update <${name}>`);
                item.setIcon('checkmark');
                item.onClick((evt) => { modal.open(); });
            });
        }
        else if (isSelect(this.category)) {
            this.category.addOption(`update_${name}`, `Update <${name}>`);
            this.category.modals[`update_${name}`] = () => modal.open();
        }
    }
    addTextInputMenuOption(name, value) {
        const modal = new valueTextInputModal(this.plugin.app, this.file, name, value);
        modal.titleEl.setText(`Change Value for <${name}>`);
        if (isMenu(this.category)) {
            this.category.addItem((item) => {
                item.setTitle(`Update <${name}>`);
                item.setIcon('pencil');
                item.onClick((evt) => modal.open());
            });
        }
        else if (isSelect(this.category)) {
            this.category.addOption(`update_${name}`, `Update <${name}>`);
            this.category.modals[`update_${name}`] = () => modal.open();
        }
    }
    getPropertySettings(propertyName) {
        const matchingSettings = this.plugin.settings.presetFields.filter(p => p.name == propertyName);
        if (this.fileClass) {
            const fileClassAttributesWithName = this.fileClass.attributes.filter(attr => attr.name == propertyName);
            if (fileClassAttributesWithName.length > 0) {
                const fileClassAttribute = fileClassAttributesWithName[0];
                if (fileClassAttribute.options) {
                    return fileClassAttribute.getField();
                }
                else if (matchingSettings.length > 0) {
                    return matchingSettings[0];
                }
            }
        }
        else if (matchingSettings.length > 0) {
            return matchingSettings[0];
        }
    }
}

class linkContextMenu {
    constructor(plugin) {
        this.plugin = plugin;
        this.createContextMenu();
    }
    createContextMenu() {
        this.plugin.registerEvent(this.plugin.app.workspace.on('file-menu', (menu, abstractFile, source) => {
            if (this.plugin.settings.displayFieldsInContextMenu && (source === "link-context-menu" ||
                source === "calendar-context-menu" ||
                source === 'pane-more-options' ||
                source === 'file-explorer-context-menu')) {
                const files = this.plugin.app.vault.getMarkdownFiles().filter(mdFile => mdFile.path == abstractFile.path);
                if (files.length > 0) {
                    const file = files[0];
                    this.file = file;
                    if (file.parent.path + "/" == this.plugin.settings.classFilesPath) {
                        menu.addSeparator();
                        menu.addItem((item) => {
                            item.setIcon("gear");
                            item.setTitle(`Manage <${file.basename}> fields`);
                            item.onClick((evt) => {
                                const fileClassAttributeSelectModal = new FileClassAttributeSelectModal(this.plugin, file);
                                fileClassAttributeSelectModal.open();
                            });
                        });
                    }
                    else {
                        this.optionsList = new OptionsList(this.plugin, this.file, menu);
                        this.optionsList.createExtraOptionList();
                    }
                }
            }
        }));
    }
}

class SelectModal extends obsidian.DropdownComponent {
    constructor(containerEl) {
        super(containerEl);
        this.modals = {};
    }
}

class NoteFieldsCommandsModal extends obsidian.Modal {
    constructor(app, plugin, file) {
        super(app);
        this.app = app;
        this.plugin = plugin;
        this.file = file;
    }
    onOpen() {
        this.titleEl.setText(`Select the field to manage`);
        const optionsListContainer = this.contentEl.createDiv();
        this.select = new SelectModal(optionsListContainer);
        this.select.addOption("---", "Choose Field");
        this.optionsList = new OptionsList(this.plugin, this.file, this.select);
        this.optionsList.createExtraOptionList();
        this.select.onChange((value) => {
            this.select.modals[value]();
            this.close();
        });
        this.select.selectEl.focus();
    }
}

function buildCMViewPlugin(app, _settings) {
    // Implements the live preview supercharging
    // Code structure based on https://github.com/nothingislost/obsidian-cm6-attributes/blob/743d71b0aa616407149a0b6ea5ffea28e2154158/src/main.ts
    // Code help credits to @NothingIsLost! They have been a great help getting this to work properly.
    class HeaderWidget extends view.WidgetType {
        constructor(attributes, after) {
            super();
            this.attributes = attributes;
            this.after = after;
        }
        toDOM() {
            let headerEl = document.createElement("span");
            headerEl.setAttrs(this.attributes);
            if (this.after) {
                headerEl.addClass('data-link-icon-after');
            }
            else {
                headerEl.addClass('data-link-icon');
            }
            // create a naive bread crumb
            return headerEl;
        }
        ignoreEvent() {
            return true;
        }
    }
    const settings = _settings;
    const viewPlugin = view.ViewPlugin.fromClass(class {
        constructor(view) {
            this.decorations = this.buildDecorations(view);
        }
        update(update) {
            if (update.docChanged || update.viewportChanged) {
                this.decorations = this.buildDecorations(update.view);
            }
        }
        destroy() {
        }
        buildDecorations(view$1) {
            let builder = new rangeset.RangeSetBuilder();
            if (!settings.enableEditor) {
                return builder.finish();
            }
            const mdView = view$1.state.field(obsidian.editorViewField);
            let lastAttributes = {};
            let iconDecoAfter = null;
            for (let { from, to } of view$1.visibleRanges) {
                language.syntaxTree(view$1.state).iterate({
                    from,
                    to,
                    enter: (type, from, to) => {
                        const tokenProps = type.prop(streamParser.tokenClassNodeProp);
                        if (tokenProps) {
                            const props = new Set(tokenProps.split(" "));
                            const isLink = props.has("hmd-internal-link");
                            const isAlias = props.has("link-alias");
                            const isPipe = props.has("link-alias-pipe");
                            if (!isPipe && !isAlias) {
                                if (iconDecoAfter) {
                                    builder.add(to, to, iconDecoAfter);
                                    iconDecoAfter = null;
                                }
                            }
                            if (isLink && !isAlias && !isPipe) {
                                let linkText = view$1.state.doc.sliceString(from, to);
                                linkText = linkText.split("#")[0];
                                let file = app.metadataCache.getFirstLinkpathDest(linkText, mdView.file.basename);
                                if (file) {
                                    let _attributes = fetchTargetAttributesSync(app, settings, file, true);
                                    let attributes = {};
                                    for (let key in _attributes) {
                                        attributes["data-link-" + key] = _attributes[key];
                                    }
                                    let deco = view.Decoration.mark({
                                        attributes,
                                        class: "data-link-text"
                                    });
                                    let iconDecoBefore = view.Decoration.widget({
                                        widget: new HeaderWidget(attributes, false),
                                    });
                                    iconDecoAfter = view.Decoration.widget({
                                        widget: new HeaderWidget(attributes, true),
                                    });
                                    builder.add(from, from, iconDecoBefore);
                                    builder.add(from, to, deco);
                                    lastAttributes = attributes;
                                }
                            }
                            else if (isLink && isAlias) {
                                let deco = view.Decoration.mark({
                                    attributes: lastAttributes,
                                    class: "data-link-text"
                                });
                                builder.add(from, to, deco);
                                if (iconDecoAfter) {
                                    builder.add(to, to, iconDecoAfter);
                                    iconDecoAfter = null;
                                }
                            }
                        }
                    }
                });
            }
            return builder.finish();
        }
    }, {
        decorations: v => v.decorations
    });
    return viewPlugin;
}

class SuperchargedLinks extends obsidian.Plugin {
    constructor() {
        super(...arguments);
        this.initialProperties = [];
    }
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            console.log('Supercharged links loaded');
            yield this.loadSettings();
            this.settings.presetFields.forEach(prop => {
                const property = new Field();
                Object.assign(property, prop);
                this.initialProperties.push(property);
            });
            this.addSettingTab(new SuperchargedLinksSettingTab(this.app, this));
            this.registerMarkdownPostProcessor((el, ctx) => {
                updateElLinks(this.app, this, el, ctx);
            });
            // Plugins watching
            this.registerEvent(this.app.metadataCache.on('changed', obsidian.debounce((_file) => {
                updateVisibleLinks(this.app, this);
                this.observers.forEach(([observer, type, own_class]) => {
                    const leaves = this.app.workspace.getLeavesOfType(type);
                    leaves.forEach(leaf => {
                        this.updateContainer(leaf.view.containerEl, this, own_class);
                    });
                });
                // Debounced to prevent lag when writing
            }, 4500, true)));
            // Live preview
            const ext = state.Prec.lowest(buildCMViewPlugin(this.app, this.settings));
            this.registerEditorExtension(ext);
            this.observers = [];
            this.app.workspace.onLayoutReady(() => {
                this.initViewObservers(this);
                this.initModalObservers(this);
            });
            this.registerEvent(this.app.workspace.on("layout-change", () => this.initViewObservers(this)));
            this.addCommand({
                id: "field_options",
                name: "field options",
                hotkeys: [
                    {
                        modifiers: ["Alt"],
                        key: 'O',
                    },
                ],
                callback: () => {
                    const leaf = this.app.workspace.activeLeaf;
                    if (leaf.view instanceof obsidian.MarkdownView && leaf.view.file) {
                        const fieldsOptionsModal = new NoteFieldsCommandsModal(this.app, this, leaf.view.file);
                        fieldsOptionsModal.open();
                    }
                },
            });
            /* TODO : add a context menu for fileClass files to show the same options as in FileClassAttributeSelectModal*/
            this.addCommand({
                id: "fileClassAttr_options",
                name: "fileClass attributes options",
                hotkeys: [
                    {
                        modifiers: ["Alt"],
                        key: 'P',
                    },
                ],
                callback: () => {
                    const leaf = this.app.workspace.activeLeaf;
                    if (leaf.view instanceof obsidian.MarkdownView && leaf.view.file && `${leaf.view.file.parent.path}/` == this.settings.classFilesPath) {
                        const modal = new FileClassAttributeSelectModal(this, leaf.view.file);
                        modal.open();
                    }
                    else {
                        new obsidian.Notice("This is not a fileClass", 2500);
                    }
                },
            });
            new linkContextMenu(this);
        });
    }
    initViewObservers(plugin) {
        var _a, _b, _c, _d, _e, _f;
        // Reset observers
        plugin.observers.forEach(([observer, type]) => {
            observer.disconnect();
        });
        plugin.observers = [];
        // Register new observers
        plugin.registerViewType('backlink', plugin, ".tree-item-inner", true);
        plugin.registerViewType('outgoing-link', plugin, ".tree-item-inner", true);
        plugin.registerViewType('search', plugin, ".tree-item-inner");
        plugin.registerViewType('BC-matrix', plugin, '.BC-Link');
        plugin.registerViewType('BC-ducks', plugin, '.internal-link');
        plugin.registerViewType('BC-tree', plugin, 'a.internal-link');
        plugin.registerViewType('graph-analysis', plugin, '.internal-link');
        plugin.registerViewType('starred', plugin, '.nav-file-title-content');
        plugin.registerViewType('file-explorer', plugin, '.nav-file-title-content');
        plugin.registerViewType('recent-files', plugin, '.nav-file-title-content');
        // If backlinks in editor is on
        // @ts-ignore
        if ((_f = (_e = (_d = (_c = (_b = (_a = plugin.app) === null || _a === void 0 ? void 0 : _a.internalPlugins) === null || _b === void 0 ? void 0 : _b.plugins) === null || _c === void 0 ? void 0 : _c.backlink) === null || _d === void 0 ? void 0 : _d.instance) === null || _e === void 0 ? void 0 : _e.options) === null || _f === void 0 ? void 0 : _f.backlinkInDocument) {
            plugin.registerViewType('markdown', plugin, '.tree-item-inner', true);
        }
    }
    initModalObservers(plugin) {
        const config = {
            subtree: false,
            childList: true,
            attributes: false
        };
        this.modalObserver = new MutationObserver(records => {
            records.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    mutation.addedNodes.forEach(n => {
                        if ('className' in n &&
                            // @ts-ignore
                            (n.className.includes('modal-container') && plugin.settings.enableQuickSwitcher
                                // @ts-ignore
                                || n.className.includes('suggestion-container') && plugin.settings.enableSuggestor)) {
                            let selector = ".suggestion-item, .suggestion-note, .another-quick-switcher__item__file";
                            // @ts-ignore
                            if (n.className.includes('suggestion-container')) {
                                selector = ".suggestion-content, .suggestion-note";
                            }
                            plugin.updateContainer(n, plugin, selector);
                            plugin._watchContainer(null, n, plugin, selector);
                        }
                    });
                }
            });
        });
        this.modalObserver.observe(document.body, config);
    }
    registerViewType(viewTypeName, plugin, selector, updateDynamic = false) {
        const leaves = this.app.workspace.getLeavesOfType(viewTypeName);
        if (leaves.length > 1) {
            for (let i = 0; i < leaves.length; i++) {
                const container = leaves[i].view.containerEl;
                if (updateDynamic) {
                    plugin._watchContainerDynamic(viewTypeName + i, container, plugin, selector);
                }
                else {
                    plugin._watchContainer(viewTypeName + i, container, plugin, selector);
                }
            }
        }
        else if (leaves.length < 1)
            return;
        else {
            const container = leaves[0].view.containerEl;
            this.updateContainer(container, plugin, selector);
            if (updateDynamic) {
                plugin._watchContainerDynamic(viewTypeName, container, plugin, selector);
            }
            else {
                plugin._watchContainer(viewTypeName, container, plugin, selector);
            }
        }
    }
    updateContainer(container, plugin, selector) {
        if (!plugin.settings.enableBacklinks)
            return;
        const nodes = container.findAll(selector);
        for (let i = 0; i < nodes.length; ++i) {
            const el = nodes[i];
            updateDivExtraAttributes(plugin.app, plugin.settings, el, "");
        }
    }
    removeFromContainer(container, selector) {
        const nodes = container.findAll(selector);
        for (let i = 0; i < nodes.length; ++i) {
            const el = nodes[i];
            clearExtraAttributes(el);
        }
    }
    _watchContainer(viewType, container, plugin, selector) {
        let observer = new MutationObserver((records, _) => {
            plugin.updateContainer(container, plugin, selector);
        });
        observer.observe(container, { subtree: true, childList: true, attributes: false });
        if (viewType) {
            plugin.observers.push([observer, viewType, selector]);
        }
    }
    _watchContainerDynamic(viewType, container, plugin, selector, own_class = 'tree-item-inner', parent_class = 'tree-item') {
        // Used for efficient updating of the backlinks panel
        // Only loops through newly added DOM nodes instead of changing all of them
        let observer = new MutationObserver((records, _) => {
            records.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    mutation.addedNodes.forEach((n) => {
                        if ('className' in n) {
                            // @ts-ignore
                            if (n.className.includes && typeof n.className.includes === 'function' && n.className.includes(parent_class)) {
                                const fileDivs = n.getElementsByClassName(own_class);
                                for (let i = 0; i < fileDivs.length; ++i) {
                                    const link = fileDivs[i];
                                    updateDivExtraAttributes(plugin.app, plugin.settings, link, "");
                                }
                            }
                        }
                    });
                }
            });
        });
        observer.observe(container, { subtree: true, childList: true, attributes: false });
        plugin.observers.push([observer, viewType, selector]);
    }
    onunload() {
        this.observers.forEach(([observer, type, own_class]) => {
            observer.disconnect();
            const leaves = this.app.workspace.getLeavesOfType(type);
            leaves.forEach(leaf => {
                this.removeFromContainer(leaf.view.containerEl, own_class);
            });
        });
        this.modalObserver.disconnect();
        console.log('Supercharged links unloaded');
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings.presetFields = this.initialProperties;
            yield this.saveData(this.settings);
        });
    }
}

module.exports = SuperchargedLinks;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy9GaWVsZC50cyIsInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmcudHMiLCJzcmMvc2V0dGluZ3MvRmllbGRTZXR0aW5nc01vZGFsLnRzIiwic3JjL2Nzc0J1aWxkZXIvY3NzTGluay50cyIsInNyYy9jc3NCdWlsZGVyL2Nzc0J1aWxkZXJNb2RhbC50cyIsInNyYy9jc3NCdWlsZGVyL2Nzc0J1aWxkZXIudHMiLCJzcmMvc2V0dGluZ3MvU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nVGFiLnRzIiwic3JjL2xpbmtBdHRyaWJ1dGVzL2xpbmtBdHRyaWJ1dGVzLnRzIiwic3JjL3NldHRpbmdzL1N1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3MudHMiLCJzcmMvb3B0aW9ucy9yZXBsYWNlVmFsdWVzLnRzIiwic3JjL29wdGlvbk1vZGFscy92YWx1ZU11bHRpU2VsZWN0TW9kYWwudHMiLCJzcmMvb3B0aW9uTW9kYWxzL3ZhbHVlVGV4dElucHV0TW9kYWwudHMiLCJzcmMvb3B0aW9uTW9kYWxzL3ZhbHVlVG9nZ2xlTW9kYWwudHMiLCJzcmMvb3B0aW9uTW9kYWxzL3ZhbHVlU2VsZWN0TW9kYWwudHMiLCJzcmMvb3B0aW9uTW9kYWxzL2FkZE5ld0ZpZWxkTW9kYWwudHMiLCJzcmMvb3B0aW9uTW9kYWxzL2ZpZWxkU2VsZWN0TW9kYWwudHMiLCJzcmMvb3B0aW9uTW9kYWxzL2Nob29zZVNlY3Rpb25Nb2RhbC50cyIsInNyYy9maWxlQ2xhc3MvZmlsZUNsYXNzQXR0cmlidXRlLnRzIiwic3JjL2ZpbGVDbGFzcy9maWxlQ2xhc3MudHMiLCJzcmMvZmlsZUNsYXNzL0ZpbGVDbGFzc0F0dHJpYnV0ZU1vZGFsLnRzIiwic3JjL2ZpbGVDbGFzcy9GaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbC50cyIsInNyYy9vcHRpb25zL09wdGlvbnNMaXN0LnRzIiwic3JjL29wdGlvbnMvbGlua0NvbnRleHRNZW51LnRzIiwic3JjL29wdGlvbk1vZGFscy9TZWxlY3RNb2RhbC50cyIsInNyYy9vcHRpb25zL05vdGVGaWVsZHNDb21tYW5kc01vZGFsLnRzIiwic3JjL2xpbmtBdHRyaWJ1dGVzL2xpdmVQcmV2aWV3LnRzIiwibWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcbiIsImludGVyZmFjZSBGaWVsZHtcbiAgICBpZDogc3RyaW5nXG5cdG5hbWU6IHN0cmluZ1xuXHR2YWx1ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cbiAgICBpc0N5Y2xlOiBib29sZWFuXG4gICAgaXNNdWx0aTogYm9vbGVhblxuICAgIHZhbHVlc0xpc3ROb3RlUGF0aDogc3RyaW5nXG59XG5cbmNsYXNzIEZpZWxke1xuXG5cdGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZyA9IFwiXCIsIFxuICAgICAgICAgICAgICAgIHZhbHVlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9LCBcbiAgICAgICAgICAgICAgICBpZDogc3RyaW5nID0gXCJcIiwgXG4gICAgICAgICAgICAgICAgaXNNdWx0aTogYm9vbGVhbiA9IGZhbHNlLCBcbiAgICAgICAgICAgICAgICBpc0N5Y2xlOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgICAgICAgICAgdmFsdWVzTGlzdE5vdGVQYXRoOiBzdHJpbmcgPSBcIlwiKXtcblx0XHR0aGlzLm5hbWUgPSBuYW1lXG5cdFx0dGhpcy52YWx1ZXMgPSB2YWx1ZXNcbiAgICAgICAgdGhpcy5pZCA9IGlkXG4gICAgICAgIHRoaXMuaXNDeWNsZSA9IGlzQ3ljbGVcbiAgICAgICAgdGhpcy5pc011bHRpID0gaXNNdWx0aVxuICAgICAgICB0aGlzLnZhbHVlc0xpc3ROb3RlUGF0aCA9IHZhbHVlc0xpc3ROb3RlUGF0aFxuICAgICAgICB0aGlzLmluc2VydE5ld1ZhbHVlLmJpbmQodGhpcylcblx0fVxuXG4gICAgcHVibGljIGFzeW5jIGluc2VydE5ld1ZhbHVlKHZhbHVlOnN0cmluZyk6IFByb21pc2U8c3RyaW5nPntcbiAgICAgICAgbGV0IG5ld0tleSA9IDFcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy52YWx1ZXMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIGlmKHBhcnNlSW50KGtleSkgJiYgcGFyc2VJbnQoa2V5KSA+PSBuZXdLZXkpe1xuICAgICAgICAgICAgICAgIG5ld0tleSA9IHBhcnNlSW50KGtleSkgKyAxXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMudmFsdWVzW25ld0tleS50b1N0cmluZygpXSA9IHZhbHVlXG4gICAgICAgIHJldHVybiBuZXdLZXkudG9TdHJpbmcoKVxuICAgIH1cblxuICAgIHN0YXRpYyBjb3B5UHJvcGVydHkodGFyZ2V0OiBGaWVsZCwgc291cmNlOiBGaWVsZCl7XG4gICAgICAgIHRhcmdldC5pZCA9IHNvdXJjZS5pZFxuICAgICAgICB0YXJnZXQubmFtZSA9IHNvdXJjZS5uYW1lXG4gICAgICAgIHRhcmdldC5pc0N5Y2xlID0gc291cmNlLmlzQ3ljbGVcbiAgICAgICAgdGFyZ2V0LmlzTXVsdGkgPSBzb3VyY2UuaXNNdWx0aVxuICAgICAgICB0YXJnZXQudmFsdWVzTGlzdE5vdGVQYXRoID0gc291cmNlLnZhbHVlc0xpc3ROb3RlUGF0aFxuICAgICAgICBPYmplY3Qua2V5cyhzb3VyY2UudmFsdWVzKS5mb3JFYWNoKGsgPT4ge1xuICAgICAgICAgICAgdGFyZ2V0LnZhbHVlc1trXSA9IHNvdXJjZS52YWx1ZXNba11cbiAgICAgICAgfSlcbiAgICAgICAgT2JqZWN0LmtleXModGFyZ2V0LnZhbHVlcykuZm9yRWFjaChrID0+IHtcbiAgICAgICAgICAgIGlmKCFPYmplY3Qua2V5cyhzb3VyY2UudmFsdWVzKS5pbmNsdWRlcyhrKSl7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRhcmdldC52YWx1ZXNba11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZpZWxkIiwiaW1wb3J0IHtBcHAsIFNldHRpbmcsIFBsdWdpbn0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwibWFpblwiXG5pbXBvcnQgRmllbGQgZnJvbSBcInNyYy9GaWVsZFwiXG5pbXBvcnQgRmllbGRTZXR0aW5nc01vZGFsIGZyb20gXCJzcmMvc2V0dGluZ3MvRmllbGRTZXR0aW5nc01vZGFsXCJcbmltcG9ydCB7IHJlc29sdmVUeHQgfSBmcm9tIFwiZG5zXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmllbGRTZXR0aW5nIGV4dGVuZHMgU2V0dGluZyB7XG4gICAgcHJvcGVydHk6IEZpZWxkXG4gICAgYXBwOiBBcHBcbiAgICBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzXG4gICAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50XG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwcm9wZXJ0eTogRmllbGQsIGFwcDogQXBwLCBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzKXtcbiAgICAgICAgc3VwZXIoY29udGFpbmVyRWwpXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbFxuICAgICAgICB0aGlzLnByb3BlcnR5ID0gcHJvcGVydHlcbiAgICAgICAgdGhpcy5hcHAgPSBhcHBcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cbiAgICAgICAgdGhpcy5zZXRUZXh0Q29udGVudFdpdGhuYW1lKClcbiAgICAgICAgdGhpcy5hZGRFZGl0QnV0dG9uKClcbiAgICAgICAgdGhpcy5hZGREZWxldGVCdXR0b24oKVxuXG4gICAgfVxuICAgIFxuICAgIHNldFRleHRDb250ZW50V2l0aG5hbWUoKTogdm9pZHtcbiAgICAgICAgdGhpcy5pbmZvRWwudGV4dENvbnRlbnQgPSBcbiAgICAgICAgYCR7dGhpcy5wcm9wZXJ0eS5uYW1lfTogWyR7T2JqZWN0LmtleXModGhpcy5wcm9wZXJ0eS52YWx1ZXMpLm1hcChrID0+IHRoaXMucHJvcGVydHkudmFsdWVzW2tdKS5qb2luKCcsICcpfV1gXG4gICAgfVxuICAgIFxuXG4gICAgYWRkRWRpdEJ1dHRvbigpOiB2b2lke1xuICAgICAgICB0aGlzLmFkZEJ1dHRvbigoYikgPT4ge1xuICAgICAgICAgICAgYi5zZXRJY29uKFwicGVuY2lsXCIpXG4gICAgICAgICAgICAuc2V0VG9vbHRpcChcIkVkaXRcIilcbiAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbW9kYWwgPSBuZXcgRmllbGRTZXR0aW5nc01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgdGhpcy5jb250YWluZXJFbCwgdGhpcywgdGhpcy5wcm9wZXJ0eSk7XG4gICAgICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgYWRkRGVsZXRlQnV0dG9uKCk6IHZvaWR7XG4gICAgICAgIHRoaXMuYWRkQnV0dG9uKChiKSA9PiB7XG4gICAgICAgICAgICBiLnNldEljb24oXCJ0cmFzaFwiKVxuICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJEZWxldGVcIilcbiAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50RXhpc3RpbmdQcm9wZXJ0eSA9IHRoaXMucGx1Z2luLmluaXRpYWxQcm9wZXJ0aWVzLmZpbHRlcihwID0+IHAuaWQgPT0gdGhpcy5wcm9wZXJ0eS5pZClbMF1cbiAgICAgICAgICAgICAgICBpZihjdXJyZW50RXhpc3RpbmdQcm9wZXJ0eSl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmluaXRpYWxQcm9wZXJ0aWVzLnJlbW92ZShjdXJyZW50RXhpc3RpbmdQcm9wZXJ0eSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nRWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLnNldHRpbmdFbClcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRWYWx1ZXNMaXN0RnJvbU5vdGUobm90ZVBhdGg6IHN0cmluZywgYXBwOiBBcHApOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpID0+IHtcbiAgICAgICAgICAgIGxldCB2YWx1ZXM6IEFycmF5PHN0cmluZz4gPSBbXVxuICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihtZEZpbGUgPT4gbWRGaWxlLnBhdGggPT0gbm90ZVBhdGgpXG4gICAgICAgICAgICBpZihmaWxlcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gZmlsZXNbMF1cbiAgICAgICAgICAgICAgICBhcHAudmF1bHQucmVhZChmaWxlKS50aGVuKChyZXN1bHQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3BsaXQoJ1xcbicpLmZvckVhY2gobGluZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZigvXiguKikkLy50ZXN0KGxpbmUpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaChsaW5lLnRyaW0oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZXMpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShbXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgIH1cbn0iLCJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBUZXh0Q29tcG9uZW50LCBOb3RpY2UsIEJ1dHRvbkNvbXBvbmVudCwgRXh0cmFCdXR0b25Db21wb25lbnQsIFRvZ2dsZUNvbXBvbmVudCB9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3MgZnJvbSBcIm1haW5cIlxuaW1wb3J0IEZpZWxkIGZyb20gXCJzcmMvRmllbGRcIlxuaW1wb3J0IEZpZWxkU2V0dGluZyBmcm9tIFwic3JjL3NldHRpbmdzL0ZpZWxkU2V0dGluZ1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpZWxkU2V0dGluZ3NNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBuYW1lUHJvbXB0Q29tcG9uZW50OiBUZXh0Q29tcG9uZW50XG4gICAgdmFsdWVzUHJvbXB0Q29tcG9uZW50czogQXJyYXk8VGV4dENvbXBvbmVudD4gPSBbXVxuICAgIGlzTXVsdGlUb2dnbGVyQ29tcG9uZW50OiBUb2dnbGVDb21wb25lbnRcbiAgICBpc0N5Y2xlVG9nZ2xlckNvbXBvbmVudDogVG9nZ2xlQ29tcG9uZW50XG4gICAgbGlzdE5vdGVQYXRoQ29tcG9uZW50OiBUZXh0Q29tcG9uZW50XG4gICAgc2F2ZWQ6IGJvb2xlYW4gPSBmYWxzZVxuICAgIHByb3BlcnR5OiBGaWVsZFxuICAgIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3NcbiAgICBpbml0aWFsUHJvcGVydHk6IEZpZWxkXG4gICAgcGFyZW50U2V0dGluZzogU2V0dGluZ1xuICAgIG5ldzogYm9vbGVhbiA9IHRydWVcbiAgICBwYXJlbnRTZXR0aW5nQ29udGFpbmVyOiBIVE1MRWxlbWVudFxuXG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgcGFyZW50U2V0dGluZ0NvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHBhcmVudFNldHRpbmc/OiBTZXR0aW5nLCBwcm9wZXJ0eT86IEZpZWxkKSB7XG4gICAgICAgIHN1cGVyKGFwcClcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cbiAgICAgICAgdGhpcy5wYXJlbnRTZXR0aW5nID0gcGFyZW50U2V0dGluZ1xuICAgICAgICB0aGlzLmluaXRpYWxQcm9wZXJ0eSA9IG5ldyBGaWVsZCgpXG4gICAgICAgIHRoaXMucGFyZW50U2V0dGluZ0NvbnRhaW5lciA9IHBhcmVudFNldHRpbmdDb250YWluZXJcbiAgICAgICAgaWYgKHByb3BlcnR5KSB7XG4gICAgICAgICAgICB0aGlzLm5ldyA9IGZhbHNlXG4gICAgICAgICAgICB0aGlzLnByb3BlcnR5ID0gcHJvcGVydHlcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbFByb3BlcnR5Lm5hbWUgPSBwcm9wZXJ0eS5uYW1lXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxQcm9wZXJ0eS5pZCA9IHByb3BlcnR5LmlkXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhwcm9wZXJ0eS52YWx1ZXMpLmZvckVhY2goayA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsUHJvcGVydHkudmFsdWVzW2tdID0gcHJvcGVydHkudmFsdWVzW2tdXG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IG5ld0lkID0gMVxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uaW5pdGlhbFByb3BlcnRpZXMuZm9yRWFjaChwcm9wID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQocHJvcC5pZCkgJiYgcGFyc2VJbnQocHJvcC5pZCkgPj0gbmV3SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3SWQgPSBwYXJzZUludChwcm9wLmlkKSArIDFcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eSA9IG5ldyBGaWVsZCgpXG4gICAgICAgICAgICB0aGlzLnByb3BlcnR5LmlkID0gbmV3SWQudG9TdHJpbmcoKVxuICAgICAgICAgICAgdGhpcy5pbml0aWFsUHJvcGVydHkuaWQgPSBuZXdJZC50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbk9wZW4oKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnByb3BlcnR5Lm5hbWUgPT0gXCJcIikge1xuICAgICAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoYEFkZCBhIHByb3BlcnR5IGFuZCBzZXQgcHJlZGVmaW5lZGApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChgTWFuYWdlIHNldHRpbmdzIHZhbHVlcyBmb3IgJHt0aGlzLnByb3BlcnR5Lm5hbWV9YClcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNyZWF0ZUZvcm0oKVxuICAgIH1cblxuICAgIG9uQ2xvc2UoKTogdm9pZCB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5wcm9wZXJ0eSwgdGhpcy5pbml0aWFsUHJvcGVydHkpXG4gICAgICAgIGlmICghdGhpcy5uZXcpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50U2V0dGluZy5pbmZvRWwudGV4dENvbnRlbnQgPVxuICAgICAgICAgICAgICAgIGAke3RoaXMucHJvcGVydHkubmFtZX06IFske09iamVjdC5rZXlzKHRoaXMucHJvcGVydHkudmFsdWVzKS5tYXAoayA9PiB0aGlzLnByb3BlcnR5LnZhbHVlc1trXSkuam9pbignLCAnKX1dYFxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2F2ZWQpIHtcbiAgICAgICAgICAgIG5ldyBGaWVsZFNldHRpbmcodGhpcy5wYXJlbnRTZXR0aW5nQ29udGFpbmVyLCB0aGlzLnByb3BlcnR5LCB0aGlzLmFwcCwgdGhpcy5wbHVnaW4pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRWYWx1ZUxpc3RUZXh0KGhlYWRlcjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgaGVhZGVyLnNldFRleHQoYFByZXNldCB2YWx1ZXM6ICR7T2JqZWN0LnZhbHVlcyh0aGlzLnByb3BlcnR5LnZhbHVlcykuam9pbignLCAnKX1gKVxuICAgIH1cblxuICAgIGNyZWF0ZW5hbWVJbnB1dENvbnRhaW5lcihwYXJlbnROb2RlOiBIVE1MRGl2RWxlbWVudCk6IFRleHRDb21wb25lbnQge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eU5hbWVDb250YWluZXJMYWJlbCA9IHBhcmVudE5vZGUuY3JlYXRlRGl2KClcbiAgICAgICAgcHJvcGVydHlOYW1lQ29udGFpbmVyTGFiZWwuc2V0VGV4dChgUHJvcGVydHkgTmFtZTpgKVxuICAgICAgICBjb25zdCBpbnB1dCA9IG5ldyBUZXh0Q29tcG9uZW50KHBhcmVudE5vZGUpXG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLnByb3BlcnR5Lm5hbWVcbiAgICAgICAgaW5wdXQuc2V0VmFsdWUobmFtZSlcbiAgICAgICAgaW5wdXQuc2V0UGxhY2Vob2xkZXIoXCJOYW1lIG9mIHRoZSBwcm9wZXJ0eVwiKVxuICAgICAgICBpbnB1dC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnR5Lm5hbWUgPSB2YWx1ZVxuICAgICAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoYE1hbmFnZSBwcmVkZWZpbmVkIHZhbHVlcyBmb3IgJHt0aGlzLnByb3BlcnR5Lm5hbWV9YClcbiAgICAgICAgICAgIEZpZWxkU2V0dGluZ3NNb2RhbC5yZW1vdmVWYWxpZGF0aW9uRXJyb3IoaW5wdXQpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBpbnB1dFxuICAgIH1cblxuICAgIGNyZWF0ZVRvZ2dsZXJDb250YWluZXIocGFyZW50Tm9kZTogSFRNTERpdkVsZW1lbnQsIGxhYmVsOiBzdHJpbmcpOiBUb2dnbGVDb21wb25lbnQge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eUNvbnRhaW5lckxhYmVsID0gcGFyZW50Tm9kZS5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiAnZnJvbnRtYXR0ZXItY2hlY2tib3gtdG9nZ2xlcidcbiAgICAgICAgfSlcbiAgICAgICAgcHJvcGVydHlDb250YWluZXJMYWJlbC5zZXRUZXh0KGxhYmVsKVxuICAgICAgICBjb25zdCB0b2dnbGVyID0gbmV3IFRvZ2dsZUNvbXBvbmVudChwYXJlbnROb2RlKVxuICAgICAgICByZXR1cm4gdG9nZ2xlclxuICAgIH1cblxuICAgIGNyZWF0ZUxpc3ROb3RlQ29udGFpbmVyKHBhcmVudE5vZGU6IEhUTUxEaXZFbGVtZW50KTogVGV4dENvbXBvbmVudCB7XG4gICAgICAgIGNvbnN0IGxpc3ROb3RlQ29udGFpbmVyTGFiZWwgPSBwYXJlbnROb2RlLmNyZWF0ZURpdigpXG4gICAgICAgIGxpc3ROb3RlQ29udGFpbmVyTGFiZWwuc2V0VGV4dChgUGF0aCBvZiB0aGUgbm90ZSBjb250YWluaW5nIHRoZSB2YWx1ZXM6YClcbiAgICAgICAgY29uc3QgaW5wdXQgPSBuZXcgVGV4dENvbXBvbmVudChwYXJlbnROb2RlKVxuICAgICAgICBjb25zdCBsaXN0Tm90ZVBhdGggPSB0aGlzLnByb3BlcnR5LnZhbHVlc0xpc3ROb3RlUGF0aFxuICAgICAgICBpbnB1dC5zZXRWYWx1ZShsaXN0Tm90ZVBhdGgpXG4gICAgICAgIGlucHV0LnNldFBsYWNlaG9sZGVyKFwiUGF0aC9vZi90aGUvbm90ZS5tZFwiKVxuICAgICAgICBpbnB1dC5vbkNoYW5nZSh2YWx1ZSA9PiB0aGlzLnByb3BlcnR5LnZhbHVlc0xpc3ROb3RlUGF0aCA9IHZhbHVlKVxuICAgICAgICByZXR1cm4gaW5wdXRcbiAgICB9XG5cbiAgICByZW1vdmVQcmVzZXRWYWx1ZShrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBsZXQgbmV3VmFsdWVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge31cbiAgICAgICAgZm9yIChsZXQgX2tleSBpbiB0aGlzLnByb3BlcnR5LnZhbHVlcykge1xuICAgICAgICAgICAgaWYgKGtleSAhPT0gX2tleSkge1xuICAgICAgICAgICAgICAgIG5ld1ZhbHVlc1tfa2V5XSA9IHRoaXMucHJvcGVydHkudmFsdWVzW19rZXldXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm9wZXJ0eS52YWx1ZXMgPSBuZXdWYWx1ZXNcbiAgICB9XG5cbiAgICBjcmVhdGVWYWx1ZUNvbnRhaW5lcihwYXJlbnROb2RlOiBIVE1MRGl2RWxlbWVudCwgaGVhZGVyOiBIVE1MRGl2RWxlbWVudCwga2V5OiBzdHJpbmcpOiBUZXh0Q29tcG9uZW50IHtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gdGhpcy5wcm9wZXJ0eS52YWx1ZXNcbiAgICAgICAgY29uc3QgcHJlc2V0VmFsdWUgPSB2YWx1ZXNba2V5XVxuICAgICAgICBjb25zdCB2YWx1ZUNvbnRhaW5lciA9IHBhcmVudE5vZGUuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIGNsczogJ2Zyb250bWF0dGVyLXByb21wdC1jb250YWluZXInLFxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBpbnB1dCA9IG5ldyBUZXh0Q29tcG9uZW50KHZhbHVlQ29udGFpbmVyKVxuICAgICAgICBpbnB1dC5zZXRWYWx1ZShwcmVzZXRWYWx1ZSlcbiAgICAgICAgaW5wdXQub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eS52YWx1ZXNba2V5XSA9IHZhbHVlXG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlTGlzdFRleHQoaGVhZGVyKVxuICAgICAgICAgICAgRmllbGRTZXR0aW5nc01vZGFsLnJlbW92ZVZhbGlkYXRpb25FcnJvcihpbnB1dClcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgdmFsdWVSZW1vdmVCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KHZhbHVlQ29udGFpbmVyKVxuICAgICAgICB2YWx1ZVJlbW92ZUJ1dHRvbi5zZXRJY29uKFwidHJhc2hcIilcbiAgICAgICAgICAgIC5vbkNsaWNrKChldnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHRcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVByZXNldFZhbHVlKGtleSlcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZhbHVlTGlzdFRleHQoaGVhZGVyKVxuICAgICAgICAgICAgICAgIHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodmFsdWVDb250YWluZXIpXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNQcm9tcHRDb21wb25lbnRzLnJlbW92ZShpbnB1dClcblxuICAgICAgICAgICAgfSlcbiAgICAgICAgaWYgKGtleSAhPSBPYmplY3Qua2V5cyh0aGlzLnByb3BlcnR5LnZhbHVlcylbMF0pIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlVXBncmFkZUJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQodmFsdWVDb250YWluZXIpXG4gICAgICAgICAgICB2YWx1ZVVwZ3JhZGVCdXR0b24uc2V0QnV0dG9uVGV4dChcIuKWslwiKVxuICAgICAgICAgICAgdmFsdWVVcGdyYWRlQnV0dG9uLm9uQ2xpY2soKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRoaXNWYWx1ZSA9IHZhbHVlc1trZXldXG4gICAgICAgICAgICAgICAgY29uc3QgdXBwZXJDb21wb25lbnQgPSB0aGlzLnZhbHVlc1Byb21wdENvbXBvbmVudHNbdGhpcy52YWx1ZXNQcm9tcHRDb21wb25lbnRzLmluZGV4T2YoaW5wdXQpIC0gMV1cbiAgICAgICAgICAgICAgICBpZiAodXBwZXJDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBwZXJWYWx1ZSA9IHVwcGVyQ29tcG9uZW50LmlucHV0RWwudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBwZXJLZXkgPSBPYmplY3Qua2V5cyh2YWx1ZXMpLmZpbHRlcihrID0+IHZhbHVlc1trXSA9PSB1cHBlclZhbHVlKVswXVxuICAgICAgICAgICAgICAgICAgICBpZiAodXBwZXJLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyQ29tcG9uZW50LnNldFZhbHVlKHRoaXNWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlc1t1cHBlcktleV0gPSB0aGlzVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnNldFZhbHVlKHVwcGVyVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXNba2V5XSA9IHVwcGVyVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5wdXRcbiAgICB9XG5cbiAgICBjcmVhdGVGb3JtKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBkaXYgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBcImZyb250bWF0dGVyLXByb21wdC1kaXZcIlxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBtYWluRGl2ID0gZGl2LmNyZWF0ZURpdih7XG4gICAgICAgICAgICBjbHM6IFwiZnJvbnRtYXR0ZXItcHJvbXB0LWZvcm1cIlxuICAgICAgICB9KVxuICAgICAgICAvKiBQcm9wZXJ0eSBOYW1lIFNlY3Rpb24gKi9cbiAgICAgICAgY29uc3QgbmFtZUNvbnRhaW5lciA9IG1haW5EaXYuY3JlYXRlRGl2KClcbiAgICAgICAgdGhpcy5uYW1lUHJvbXB0Q29tcG9uZW50ID0gdGhpcy5jcmVhdGVuYW1lSW5wdXRDb250YWluZXIobmFtZUNvbnRhaW5lcilcblxuICAgICAgICBtYWluRGl2LmNyZWF0ZURpdih7IGNsczogJ2Zyb250bWF0dGVyLXNlcGFyYXRvcicgfSkuY3JlYXRlRWwoXCJoclwiKVxuXG4gICAgICAgIC8qIFByb3BlcnR5IGlzIE11bHRpIHNlY3Rpb24qL1xuXG4gICAgICAgIGNvbnN0IG11bHRpQ29udGFpbmVyID0gbWFpbkRpdi5jcmVhdGVEaXYoKVxuICAgICAgICB0aGlzLmlzTXVsdGlUb2dnbGVyQ29tcG9uZW50ID0gdGhpcy5jcmVhdGVUb2dnbGVyQ29udGFpbmVyKG11bHRpQ29udGFpbmVyLCBcIklzIE11bHRpOiBcIilcbiAgICAgICAgdGhpcy5pc011bHRpVG9nZ2xlckNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLnByb3BlcnR5LmlzTXVsdGkpXG4gICAgICAgIHRoaXMuaXNNdWx0aVRvZ2dsZXJDb21wb25lbnQuc2V0VG9vbHRpcChcIkNhbiB0aGlzIHByb3BlcnR5IGhhdmUgbXVsdGlwbGUgdmFsdWVzP1wiKVxuICAgICAgICB0aGlzLmlzTXVsdGlUb2dnbGVyQ29tcG9uZW50Lm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJvcGVydHkuaXNNdWx0aSA9IHZhbHVlXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wZXJ0eS5pc0N5Y2xlICYmIHRoaXMucHJvcGVydHkuaXNNdWx0aSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydHkuaXNDeWNsZSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5pc0N5Y2xlVG9nZ2xlckNvbXBvbmVudC5zZXRWYWx1ZShmYWxzZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBtYWluRGl2LmNyZWF0ZURpdih7IGNsczogJ2Zyb250bWF0dGVyLXNlcGFyYXRvcicgfSkuY3JlYXRlRWwoXCJoclwiKVxuXG4gICAgICAgIC8qIFByb3BlcnR5IGlzIEN5Y2xlIHNlY3Rpb24qL1xuXG4gICAgICAgIGNvbnN0IGN5Y2xlQ29udGFpbmVyID0gbWFpbkRpdi5jcmVhdGVEaXYoKVxuICAgICAgICB0aGlzLmlzQ3ljbGVUb2dnbGVyQ29tcG9uZW50ID0gdGhpcy5jcmVhdGVUb2dnbGVyQ29udGFpbmVyKGN5Y2xlQ29udGFpbmVyLCBcIklzIEN5Y2xlOiBcIilcbiAgICAgICAgdGhpcy5pc0N5Y2xlVG9nZ2xlckNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLnByb3BlcnR5LmlzQ3ljbGUpXG4gICAgICAgIHRoaXMuaXNDeWNsZVRvZ2dsZXJDb21wb25lbnQuc2V0VG9vbHRpcChcIklzIHRoaXMgcHJvcGVydHkncyB2YWx1ZXMgc2V0IGluIGN5Y2xlIG1vZGU/XCIpXG4gICAgICAgIHRoaXMuaXNDeWNsZVRvZ2dsZXJDb21wb25lbnQub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eS5pc0N5Y2xlID0gdmFsdWVcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BlcnR5LmlzQ3ljbGUgJiYgdGhpcy5wcm9wZXJ0eS5pc011bHRpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eS5pc011bHRpID0gZmFsc2VcbiAgICAgICAgICAgICAgICB0aGlzLmlzTXVsdGlUb2dnbGVyQ29tcG9uZW50LnNldFZhbHVlKGZhbHNlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIG1haW5EaXYuY3JlYXRlRGl2KHsgY2xzOiAnZnJvbnRtYXR0ZXItc2VwYXJhdG9yJyB9KS5jcmVhdGVFbChcImhyXCIpXG5cbiAgICAgICAgLyogUHJvcGVydHkncyBub3RlIGZvciBsaXN0IG9mIFZhbHVlcyAqL1xuXG4gICAgICAgIGNvbnN0IGxpc3ROb3RlUGF0aENvbnRhaW5lciA9IG1haW5EaXYuY3JlYXRlRGl2KClcbiAgICAgICAgdGhpcy5saXN0Tm90ZVBhdGhDb21wb25lbnQgPSB0aGlzLmNyZWF0ZUxpc3ROb3RlQ29udGFpbmVyKGxpc3ROb3RlUGF0aENvbnRhaW5lcilcblxuICAgICAgICBtYWluRGl2LmNyZWF0ZURpdih7IGNsczogJ2Zyb250bWF0dGVyLXNlcGFyYXRvcicgfSkuY3JlYXRlRWwoXCJoclwiKVxuXG4gICAgICAgIC8qIFByb3BlcnR5IFZhbHVlcyAqL1xuICAgICAgICBjb25zdCB2YWx1ZXNMaXN0ID0gbWFpbkRpdi5jcmVhdGVEaXYoKVxuICAgICAgICBjb25zdCB2YWx1ZXNMaXN0SGVhZGVyID0gdmFsdWVzTGlzdC5jcmVhdGVEaXYoKVxuICAgICAgICB2YWx1ZXNMaXN0SGVhZGVyLmNyZWF0ZUVsKFwiaDJcIilcbiAgICAgICAgdmFsdWVzTGlzdEhlYWRlci5zZXRUZXh0KGBQcmVzZXQgdmFsdWVzOiAke09iamVjdC52YWx1ZXModGhpcy5wcm9wZXJ0eS52YWx1ZXMpLmpvaW4oJywgJyl9YClcbiAgICAgICAgY29uc3QgdmFsdWVzTGlzdEJvZHkgPSB2YWx1ZXNMaXN0LmNyZWF0ZURpdigpXG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMucHJvcGVydHkudmFsdWVzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlc1Byb21wdENvbXBvbmVudHMucHVzaCh0aGlzLmNyZWF0ZVZhbHVlQ29udGFpbmVyKHZhbHVlc0xpc3RCb2R5LCB2YWx1ZXNMaXN0SGVhZGVyLCBrZXkpKVxuICAgICAgICB9KVxuXG4gICAgICAgIC8qIEFkZCBhIG5ldyBWYWx1ZXMgKi9cbiAgICAgICAgY29uc3QgdmFsdWVzTGlzdEZvb3RlciA9IHZhbHVlc0xpc3QuY3JlYXRlRGl2KClcbiAgICAgICAgY29uc3QgYWRkVmFsdWUgPSB2YWx1ZXNMaXN0Rm9vdGVyLmNyZWF0ZUVsKCdidXR0b24nKVxuICAgICAgICBhZGRWYWx1ZS50eXBlID0gJ2J1dHRvbidcbiAgICAgICAgYWRkVmFsdWUudGV4dENvbnRlbnQgPSAnQWRkJ1xuICAgICAgICBhZGRWYWx1ZS5vbkNsaWNrRXZlbnQoKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0XG4gICAgICAgICAgICB0aGlzLnByb3BlcnR5Lmluc2VydE5ld1ZhbHVlKFwiXCIpXG4gICAgICAgICAgICAgICAgLnRoZW4obmV3S2V5ID0+IHsgdGhpcy5jcmVhdGVWYWx1ZUNvbnRhaW5lcih2YWx1ZXNMaXN0Qm9keSwgdmFsdWVzTGlzdEhlYWRlciwgbmV3S2V5KSB9KVxuXG4gICAgICAgIH0pXG5cbiAgICAgICAgbWFpbkRpdi5jcmVhdGVEaXYoeyBjbHM6ICdmcm9udG1hdHRlci1zZXBhcmF0b3InIH0pLmNyZWF0ZUVsKFwiaHJcIilcblxuICAgICAgICAvKiBmb290ZXIgYnV0dG9ucyovXG4gICAgICAgIGNvbnN0IGZvb3RlckVsID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KClcbiAgICAgICAgY29uc3QgZm9vdGVyQnV0dG9ucyA9IG5ldyBTZXR0aW5nKGZvb3RlckVsKVxuICAgICAgICBmb290ZXJCdXR0b25zLmFkZEJ1dHRvbigoYikgPT4gdGhpcy5jcmVhdGVTYXZlQnV0dG9uKGIpKVxuICAgICAgICBmb290ZXJCdXR0b25zLmFkZEV4dHJhQnV0dG9uKChiKSA9PiB0aGlzLmNyZWF0ZUNhbmNlbEJ1dHRvbihiKSk7XG4gICAgfVxuXG4gICAgY3JlYXRlU2F2ZUJ1dHRvbihiOiBCdXR0b25Db21wb25lbnQpOiBCdXR0b25Db21wb25lbnQge1xuICAgICAgICBiLnNldFRvb2x0aXAoXCJTYXZlXCIpXG4gICAgICAgICAgICAuc2V0SWNvbihcImNoZWNrbWFya1wiKVxuICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBlcnJvciA9IGZhbHNlXG4gICAgICAgICAgICAgICAgaWYgKC9eWyM+LV0vLnRlc3QodGhpcy5wcm9wZXJ0eS5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBGaWVsZFNldHRpbmdzTW9kYWwuc2V0VmFsaWRhdGlvbkVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lUHJvbXB0Q29tcG9uZW50LCB0aGlzLm5hbWVQcm9tcHRDb21wb25lbnQuaW5wdXRFbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUHJvcGVydHkgbmFtZSBjYW5ub3Qgc3RhcnQgd2l0aCAjLCA+LCAtXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9wZXJ0eS5uYW1lID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgRmllbGRTZXR0aW5nc01vZGFsLnNldFZhbGlkYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZVByb21wdENvbXBvbmVudCwgdGhpcy5uYW1lUHJvbXB0Q29tcG9uZW50LmlucHV0RWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlByb3BlcnR5IG5hbWUgY2FuIG5vdCBiZSBFbXB0eVwiXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc1Byb21wdENvbXBvbmVudHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgvXlsjPi1dLy50ZXN0KGlucHV0LmlucHV0RWwudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBGaWVsZFNldHRpbmdzTW9kYWwuc2V0VmFsaWRhdGlvbkVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LCBpbnB1dC5pbnB1dEVsLnBhcmVudEVsZW1lbnQubGFzdEVsZW1lbnRDaGlsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlZhbHVlcyBjYW5ub3QgY2Fubm90IHN0YXJ0IHdpdGggIywgPiwgLVwiXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgvWyxdL2d1LnRlc3QoaW5wdXQuaW5wdXRFbC52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEZpZWxkU2V0dGluZ3NNb2RhbC5zZXRWYWxpZGF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsIGlucHV0LmlucHV0RWwucGFyZW50RWxlbWVudC5sYXN0RWxlbWVudENoaWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiVmFsdWVzIGNhbm5vdCBjb250YWluIGEgY29tbWFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuaW5wdXRFbC52YWx1ZSA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBGaWVsZFNldHRpbmdzTW9kYWwuc2V0VmFsaWRhdGlvbkVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LCBpbnB1dC5pbnB1dEVsLnBhcmVudEVsZW1lbnQubGFzdEVsZW1lbnRDaGlsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlZhbHVlcyBjYW4ndCBiZSBudWxsLlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkZpeCBlcnJvcnMgYmVmb3JlIHNhdmluZy5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEV4aXN0aW5nUHJvcGVydHkgPSB0aGlzLnBsdWdpbi5pbml0aWFsUHJvcGVydGllcy5maWx0ZXIocCA9PiBwLmlkID09IHRoaXMucHJvcGVydHkuaWQpWzBdXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRFeGlzdGluZ1Byb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIEZpZWxkLmNvcHlQcm9wZXJ0eShjdXJyZW50RXhpc3RpbmdQcm9wZXJ0eSwgdGhpcy5wcm9wZXJ0eSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5pbml0aWFsUHJvcGVydGllcy5wdXNoKHRoaXMucHJvcGVydHkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbFByb3BlcnR5ID0gdGhpcy5wcm9wZXJ0eVxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGJcbiAgICB9XG5cbiAgICBjcmVhdGVDYW5jZWxCdXR0b24oYjogRXh0cmFCdXR0b25Db21wb25lbnQpOiBFeHRyYUJ1dHRvbkNvbXBvbmVudCB7XG4gICAgICAgIGIuc2V0SWNvbihcImNyb3NzXCIpXG4gICAgICAgICAgICAuc2V0VG9vbHRpcChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAvKiByZXNldCB2YWx1ZXMgZnJvbSBzZXR0aW5ncyAqL1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmluaXRpYWxQcm9wZXJ0eS5uYW1lICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnByb3BlcnR5LCB0aGlzLmluaXRpYWxQcm9wZXJ0eSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBiO1xuICAgIH1cblxuICAgIC8qIHV0aWxzIGZ1bmN0aW9ucyAqL1xuXG4gICAgc3RhdGljIHNldFZhbGlkYXRpb25FcnJvcih0ZXh0SW5wdXQ6IFRleHRDb21wb25lbnQsIGluc2VydEFmdGVyOiBFbGVtZW50LCBtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHRleHRJbnB1dC5pbnB1dEVsLmFkZENsYXNzKFwiaXMtaW52YWxpZFwiKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UpIHtcblxuICAgICAgICAgICAgbGV0IG1EaXYgPSB0ZXh0SW5wdXQuaW5wdXRFbC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgXCIuaW52YWxpZC1mZWVkYmFja1wiXG4gICAgICAgICAgICApIGFzIEhUTUxEaXZFbGVtZW50O1xuXG4gICAgICAgICAgICBpZiAoIW1EaXYpIHtcbiAgICAgICAgICAgICAgICBtRGl2ID0gY3JlYXRlRGl2KHsgY2xzOiBcImludmFsaWQtZmVlZGJhY2tcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1EaXYuaW5uZXJUZXh0ID0gbWVzc2FnZTtcbiAgICAgICAgICAgIG1EaXYuaW5zZXJ0QWZ0ZXIoaW5zZXJ0QWZ0ZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyByZW1vdmVWYWxpZGF0aW9uRXJyb3IodGV4dElucHV0OiBUZXh0Q29tcG9uZW50KSB7XG4gICAgICAgIGlmICh0ZXh0SW5wdXQuaW5wdXRFbC5oYXNDbGFzcyhcImlzLWludmFsaWRcIikpIHtcbiAgICAgICAgICAgIHRleHRJbnB1dC5pbnB1dEVsLnJlbW92ZUNsYXNzKFwiaXMtaW52YWxpZFwiKVxuICAgICAgICAgICAgdGV4dElucHV0LmlucHV0RWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChcbiAgICAgICAgICAgICAgICB0ZXh0SW5wdXQuaW5wdXRFbC5wYXJlbnRFbGVtZW50Lmxhc3RFbGVtZW50Q2hpbGRcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgIH1cbn0iLCJleHBvcnQgdHlwZSBNYXRjaFR5cGVzID0gJ2V4YWN0JyB8ICdjb250YWlucycgfCAnc3RhcnRzd2l0aCcgfCAnZW5kc3dpdGgnIHwgJ3doaXRlU3BhY2UnO1xuZXhwb3J0IHR5cGUgU2VsZWN0b3JUeXBlcyA9ICdhdHRyaWJ1dGUnIHwgJ3RhZycgfCAncGF0aCc7XG5pbnRlcmZhY2UgQ1NTTGluayB7XG4gICAgdHlwZTogU2VsZWN0b3JUeXBlc1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIHZhbHVlOiBzdHJpbmdcbiAgICBtYXRjaENhc2VTZW5zaXRpdmU6IGJvb2xlYW5cbiAgICBtYXRjaDogTWF0Y2hUeXBlc1xuICAgIHVpZDogc3RyaW5nXG4gICAgc2VsZWN0VGV4dDogYm9vbGVhblxuICAgIHNlbGVjdEJhY2tncm91bmQ6IGJvb2xlYW5cbiAgICBzZWxlY3RBcHBlbmQ6IGJvb2xlYW5cbiAgICBzZWxlY3RQcmVwZW5kOiBib29sZWFuXG59XG5cbmNvbnN0IG1hdGNoVHlwZXM6IFJlY29yZDxNYXRjaFR5cGVzLCBzdHJpbmc+ID0ge1xuICAgICdleGFjdCc6IFwiRXhhY3QgbWF0Y2hcIixcbiAgICAnY29udGFpbnMnOiBcIkNvbnRhaW5zIHZhbHVlXCIsXG4gICAgJ3doaXRlU3BhY2UnOiBcIlZhbHVlIHdpdGhpbiB3aGl0ZXNwYWNlIHNlcGFyYXRlZCB3b3Jkc1wiLFxuICAgICdzdGFydHN3aXRoJzogXCJTdGFydHMgd2l0aCB0aGlzIHZhbHVlXCIsXG4gICAgJ2VuZHN3aXRoJzogXCJFbmRzIHdpdGggdGhpcyB2YWx1ZVwiXG59XG5cbmV4cG9ydCBjb25zdCBtYXRjaFNpZ246IFJlY29yZDxNYXRjaFR5cGVzLCBzdHJpbmc+ID0ge1xuICAgICdleGFjdCc6IFwiXCIsXG4gICAgJ2NvbnRhaW5zJzogXCIqXCIsXG4gICAgJ3N0YXJ0c3dpdGgnOiBcIl5cIixcbiAgICAnZW5kc3dpdGgnOiBcIiRcIixcbiAgICAnd2hpdGVTcGFjZSc6IFwiflwiXG59XG5cbmV4cG9ydCBjb25zdCBtYXRjaFByZXZpZXc6IFJlY29yZDxNYXRjaFR5cGVzLCBzdHJpbmc+ID0ge1xuICAgICdleGFjdCc6IFwid2l0aCB2YWx1ZVwiLFxuICAgICdjb250YWlucyc6IFwiY29udGFpbmluZ1wiLFxuICAgICd3aGl0ZVNwYWNlJzogXCJjb250YWluaW5nXCIsXG4gICAgJ3N0YXJ0c3dpdGgnOiBcInN0YXJ0aW5nIHdpdGhcIixcbiAgICAnZW5kc3dpdGgnOiBcImVuZGluZyB3aXRoXCJcbn1cblxuZXhwb3J0IGNvbnN0IG1hdGNoUHJldmlld1BhdGg6IFJlY29yZDxNYXRjaFR5cGVzLCBzdHJpbmc+ID0ge1xuICAgICdleGFjdCc6IFwiaXNcIixcbiAgICAnY29udGFpbnMnOiBcImNvbnRhaW5zXCIsXG4gICAgJ3doaXRlU3BhY2UnOiBcImNvbnRhaW5zXCIsXG4gICAgJ3N0YXJ0c3dpdGgnOiBcInN0YXJ0cyB3aXRoXCIsXG4gICAgJ2VuZHN3aXRoJzogXCJlbmRzIHdpdGhcIlxufVxuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JUeXBlOiBSZWNvcmQ8U2VsZWN0b3JUeXBlcywgc3RyaW5nPiA9IHtcbiAgICAnYXR0cmlidXRlJzogJ0F0dHJpYnV0ZSB2YWx1ZScsXG4gICAgJ3RhZyc6ICdUYWcnLFxuICAgICdwYXRoJzogJ05vdGUgcGF0aCdcbn1cblxuY2xhc3MgQ1NTTGluayB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudHlwZSA9ICdhdHRyaWJ1dGUnO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgdGhpcy5tYXRjaENhc2VTZW5zaXRpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXRjaCA9IFwiZXhhY3RcIjtcbiAgICAgICAgbGV0IHM0ID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXG4gICAgICAgICAgICAgICAgLnRvU3RyaW5nKDE2KVxuICAgICAgICAgICAgICAgIC5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9yZXR1cm4gaWQgb2YgZm9ybWF0ICdhYWFhYWFhYSctJ2FhYWEnLSdhYWFhJy0nYWFhYSctJ2FhYWFhYWFhYWFhYSdcbiAgICAgICAgdGhpcy51aWQgPSBzNCgpICsgXCItXCIgKyBzNCgpO1xuICAgICAgICB0aGlzLnNlbGVjdFRleHQgPSB0cnVlO1xuICAgICAgICB0aGlzLnNlbGVjdEFwcGVuZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2VsZWN0UHJlcGVuZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2VsZWN0QmFja2dyb3VuZCA9IHRydWU7XG4gICAgfVxufVxuXG5leHBvcnQgeyBtYXRjaFR5cGVzLCBDU1NMaW5rIH0iLCJpbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3MgZnJvbSBcIm1haW5cIlxuaW1wb3J0IHtcbiAgICBNb2RhbCxcbiAgICBTZXR0aW5nXG59IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQge21hdGNoVHlwZXMsIG1hdGNoUHJldmlldywgQ1NTTGluaywgbWF0Y2hQcmV2aWV3UGF0aCwgc2VsZWN0b3JUeXBlLCBTZWxlY3RvclR5cGVzLCBNYXRjaFR5cGVzfSBmcm9tICcuL2Nzc0xpbmsnXG5pbXBvcnQge1N1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3N9IGZyb20gXCIuLi9zZXR0aW5ncy9TdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5VGV4dChsaW5rOiBDU1NMaW5rLCBzZXR0aW5nczogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncyk6IHN0cmluZyB7XG4gICAgaWYgKGxpbmsudHlwZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgaWYgKCFsaW5rLnZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gXCI8Yj5QbGVhc2UgY2hvb3NlIGEgdGFnPC9iPlwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgPHNwYW4gY2xhc3M9XCJkYXRhLWxpbmstaWNvbiBkYXRhLWxpbmstdGV4dCBkYXRhLWxpbmstaWNvbi1hZnRlclwiIGRhdGEtbGluay10YWdzPVwiJHtsaW5rLnZhbHVlfVwiPk5vdGU8L3NwYW4+IGhhcyB0YWcgPGEgY2xhc3M9XCJ0YWdcIj4jJHtsaW5rLnZhbHVlfTwvYT5gO1xuICAgIH1cbiAgICBlbHNlIGlmIChsaW5rLnR5cGUgPT09ICdhdHRyaWJ1dGUnKSB7XG4gICAgICAgIGlmIChzZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGA8Yj5ObyBhdHRyaWJ1dGVzIGFkZGVkIHRvIFwiVGFyZ2V0IGF0dHJpYnV0ZXNcIi4gR28gdG8gcGx1Z2luIHNldHRpbmdzIHRvIGFkZCB0aGVtLjwvYj5gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsaW5rLm5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIjxiPlBsZWFzZSBjaG9vc2UgYW4gYXR0cmlidXRlIG5hbWUuPC9iPlwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbGluay52YWx1ZSl7XG4gICAgICAgICAgICByZXR1cm4gXCI8Yj5QbGVhc2UgY2hvb3NlIGFuIGF0dHJpYnV0ZSB2YWx1ZS48L2I+XCJcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYDxzcGFuIGNsYXNzPVwiZGF0YS1saW5rLWljb24gZGF0YS1saW5rLXRleHQgZGF0YS1saW5rLWljb24tYWZ0ZXJcIiBkYXRhLWxpbmstJHtsaW5rLm5hbWV9PVwiJHtsaW5rLnZhbHVlfVwiPk5vdGU8L3NwYW4+IGhhcyBhdHRyaWJ1dGUgPGI+JHtsaW5rLm5hbWV9PC9iPiAke21hdGNoUHJldmlld1tsaW5rLm1hdGNoXX0gPGI+JHtsaW5rLnZhbHVlfTwvYj4uYDtcbiAgICB9XG4gICAgaWYgKCFsaW5rLnZhbHVlKSB7XG4gICAgICAgIHJldHVybiBcIjxiPlBsZWFzZSBjaG9vc2UgYSBwYXRoLjwvYj5cIlxuICAgIH1cbiAgICByZXR1cm4gYFRoZSBwYXRoIG9mIHRoZSA8c3BhbiBjbGFzcz1cImRhdGEtbGluay1pY29uIGRhdGEtbGluay10ZXh0IGRhdGEtbGluay1pY29uLWFmdGVyXCIgZGF0YS1saW5rLXBhdGg9XCIke2xpbmsudmFsdWV9XCI+bm90ZTwvc3Bhbj4gJHttYXRjaFByZXZpZXdQYXRoW2xpbmsubWF0Y2hdfSA8Yj4ke2xpbmsudmFsdWV9PC9iPmBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXkodGV4dEFyZWE6IEhUTUxFbGVtZW50LCBsaW5rOiBDU1NMaW5rLCBzZXR0aW5nczogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncyk6IGJvb2xlYW4ge1xuICAgIGxldCB0b0Rpc3BsYXk6IHN0cmluZyA9IGRpc3BsYXlUZXh0KGxpbmssIHNldHRpbmdzKTtcbiAgICBsZXQgZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBpZiAobGluay50eXBlID09PSAndGFnJykge1xuICAgICAgICBpZiAoIWxpbmsudmFsdWUpIHtcbiAgICAgICAgICAgIGRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChsaW5rLnR5cGUgPT09ICdhdHRyaWJ1dGUnKSB7XG4gICAgICAgIGlmIChzZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFsaW5rLm5hbWUpIHtcbiAgICAgICAgICAgIGRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghbGluay52YWx1ZSl7XG4gICAgICAgICAgICBkaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghbGluay52YWx1ZSkge1xuICAgICAgICAgICAgZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRleHRBcmVhLmlubmVySFRNTCA9IHRvRGlzcGxheTtcbiAgICByZXR1cm4gZGlzYWJsZWQ7XG59XG5cbmNsYXNzIENTU0J1aWxkZXJNb2RhbCBleHRlbmRzIE1vZGFsIHtcblxuICAgIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3NcbiAgICBjc3NMaW5rOiBDU1NMaW5rXG4gICAgc2F2ZUNhbGxiYWNrOiAoY3NzTGluazogQ1NTTGluaykgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIHNhdmVDYWxsYmFjazogKGNzc0xpbms6IENTU0xpbmspID0+IHZvaWQsIGNzc0xpbms6IENTU0xpbms9bnVsbCkge1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKVxuICAgICAgICB0aGlzLmNzc0xpbmsgPSBjc3NMaW5rO1xuICAgICAgICBpZiAoIWNzc0xpbmspIHtcbiAgICAgICAgICAgIHRoaXMuY3NzTGluayA9IG5ldyBDU1NMaW5rKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuc2F2ZUNhbGxiYWNrID0gc2F2ZUNhbGxiYWNrO1xuICAgIH1cblxuXG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KGBTZWxlY3Qgd2hhdCBsaW5rcyB0byBzdHlsZSFgKVxuICAgICAgICAvLyBpcyB0YWdcbiAgICAgICAgY29uc3QgbWF0Y2hBdHRyUGxhY2Vob2xkZXIgPSBcIkF0dHJpYnV0ZSB2YWx1ZSB0byBtYXRjaC5cIjtcbiAgICAgICAgY29uc3QgbWF0Y2hUYWdQbGFjZWhvbGRlciA9IFwiTm90ZSB0YWcgdG8gbWF0Y2ggKHdpdGhvdXQgIykuXCI7XG4gICAgICAgIGNvbnN0IG1hdGNoUGF0aFBsYWNlaG9sZGVyID0gXCJGaWxlIHBhdGggdG8gbWF0Y2guXCI7XG4gICAgICAgIGNvbnN0IG1hdGNoQXR0clR4dCA9IFwiQXR0cmlidXRlIHZhbHVlXCI7XG4gICAgICAgIGNvbnN0IG1hdGNoVGFnVHh0ID0gXCJUYWdcIjtcbiAgICAgICAgY29uc3QgbWF0Y2hQYXRoVHh0ID0gXCJQYXRoXCI7XG5cbiAgICAgICAgY29uc3QgY3NzTGluayA9IHRoaXMuY3NzTGluaztcbiAgICAgICAgY29uc3QgcGx1Z2luID0gdGhpcy5wbHVnaW47XG5cbiAgICAgICAgdGhpcy5jb250ZW50RWwuYWRkQ2xhc3MoXCJzdXBlcmNoYXJnZWQtbW9kYWxcIik7XG5cbiAgICAgICAgLy8gVHlwZVxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiVHlwZSBvZiBzZWxlY3RvclwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJBdHRyaWJ1dGVzIHNlbGVjdHMgWUFNTCBhbmQgRGF0YVZpZXcgYXR0cmlidXRlc1wiICtcbiAgICAgICAgICAgICAgICBcIiwgdGFncyBjaG9vc2VzIHRoZSB0YWdzIG9mIGEgbm90ZSwgYW5kIHBhdGggY29uc2lkZXJzIHRoZSBuYW1lIG9mIHRoZSBub3RlIGluY2x1ZGluZyBpbiB3aGF0IGZvbGRlciBpdCBpcy5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkYyA9PiB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoc2VsZWN0b3JUeXBlKS5mb3JFYWNoKCh0eXBlOiBTZWxlY3RvclR5cGVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRjLmFkZE9wdGlvbih0eXBlLCBzZWxlY3RvclR5cGVbdHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gdGhpcy5jc3NMaW5rLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRjLnNldFZhbHVlKHR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGMub25DaGFuZ2UoKHR5cGU6IFNlbGVjdG9yVHlwZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3NzTGluay50eXBlID0gdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ29udGFpbmVyKGNzc0xpbmsudHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIHNhdmVCdXR0b24uc2V0RGlzYWJsZWQodXBkYXRlRGlzcGxheShwcmV2aWV3LCB0aGlzLmNzc0xpbmssIHRoaXMucGx1Z2luLnNldHRpbmdzKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBhdHRyaWJ1dGUgbmFtZVxuICAgICAgICBjb25zdCBhdHRyTmFtZSA9IG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBdHRyaWJ1dGUgbmFtZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJXaGF0IGF0dHJpYnV0ZSB0byB0YXJnZXQ/IE1ha2Ugc3VyZSB0byBmaXJzdCBhZGQgdGFyZ2V0IGF0dHJpYnV0ZXMgdG8gdGhlIHNldHRpbmdzIGF0IHRoZSB0b3AhXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZGMgPT4ge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzLmZvckVhY2goKGF0dHJpYnV0ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRjLmFkZE9wdGlvbihhdHRyaWJ1dGUsIGF0dHJpYnV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUgPT09IGNzc0xpbmsubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGMuc2V0VmFsdWUoYXR0cmlidXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRjLm9uQ2hhbmdlKG5hbWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjc3NMaW5rLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgICAgICAgICBzYXZlQnV0dG9uLnNldERpc2FibGVkKHVwZGF0ZURpc3BsYXkocHJldmlldywgY3NzTGluaywgcGx1Z2luLnNldHRpbmdzKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgLy8gYXR0cmlidXRlIHZhbHVlXG4gICAgICAgIGNvbnN0IGF0dHJWYWx1ZSA9IG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJWYWx1ZSB0byBtYXRjaFwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJUT0RPXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0LnNldFZhbHVlKGNzc0xpbmsudmFsdWUpO1xuICAgICAgICAgICAgICAgIHQub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3NzTGluay52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUJ1dHRvbi5zZXREaXNhYmxlZCh1cGRhdGVEaXNwbGF5KHByZXZpZXcsIGNzc0xpbmssIHBsdWdpbi5zZXR0aW5ncykpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2g0Jywge3RleHQ6ICdBZHZhbmNlZCd9KTtcbiAgICAgICAgLy8gbWF0Y2hpbmcgdHlwZVxuICAgICAgICBjb25zdCBtYXRjaGluZ1R5cGUgPSBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiTWF0Y2hpbmcgdHlwZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJIb3cgdG8gY29tcGFyZSB0aGUgYXR0cmlidXRlIG9yIHBhdGggd2l0aCB0aGUgZ2l2ZW4gdmFsdWUuXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZGMgPT4ge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG1hdGNoVHlwZXMpLmZvckVhY2goKGtleTogTWF0Y2hUeXBlcyk9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRjLmFkZE9wdGlvbihrZXksIG1hdGNoVHlwZXNba2V5XSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSBjc3NMaW5rLm1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYy5zZXRWYWx1ZShrZXkpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGRjLm9uQ2hhbmdlKCh2YWx1ZTogXCJleGFjdFwiIHwgXCJjb250YWluc1wiIHwgXCJzdGFydHN3aXRoXCIgfCBcImVuZHN3aXRoXCIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3NzTGluay5tYXRjaCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBzYXZlQnV0dG9uLnNldERpc2FibGVkKHVwZGF0ZURpc3BsYXkocHJldmlldywgY3NzTGluaywgcGx1Z2luLnNldHRpbmdzKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgLy8gY2FzZSBzZW5zaXRpdmVcbiAgICAgICAgY29uc3QgY2FzZVNlbnNpdGl2ZVRvZ2dsZXJDb250YWluZXIgPSBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ2FzZSBzZW5zaXRpdmUgbWF0Y2hpbmdcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU2hvdWxkIHRoZSBtYXRjaGluZyBvZiB0aGUgdmFsdWUgYmUgY2FzZSBzZW5zaXRpdmU/XCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKGIgPT4ge1xuICAgICAgICAgICAgICAgIGIuc2V0VmFsdWUoY3NzTGluay5tYXRjaENhc2VTZW5zaXRpdmUpO1xuICAgICAgICAgICAgICAgIGIub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjc3NMaW5rLm1hdGNoQ2FzZVNlbnNpdGl2ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBiLnNldERpc2FibGVkKHVwZGF0ZURpc3BsYXkocHJldmlldywgY3NzTGluaywgcGx1Z2luLnNldHRpbmdzKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIGlmICghdGhpcy5jc3NMaW5rLm5hbWUgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFyZ2V0QXR0cmlidXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgIHRoaXMuY3NzTGluay5uYW1lID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFyZ2V0QXR0cmlidXRlc1swXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVwZGF0ZUNvbnRhaW5lciA9IGZ1bmN0aW9uKHR5cGU6IFNlbGVjdG9yVHlwZXMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnYXR0cmlidXRlJykge1xuICAgICAgICAgICAgICAgIGF0dHJOYW1lLnNldHRpbmdFbC5zaG93KCk7XG4gICAgICAgICAgICAgICAgYXR0clZhbHVlLm5hbWVFbC5zZXRUZXh0KG1hdGNoQXR0clR4dCk7XG4gICAgICAgICAgICAgICAgYXR0clZhbHVlLmRlc2NFbC5zZXRUZXh0KG1hdGNoQXR0clBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ1R5cGUuc2V0dGluZ0VsLnNob3coKTtcbiAgICAgICAgICAgICAgICBjYXNlU2Vuc2l0aXZlVG9nZ2xlckNvbnRhaW5lci5zZXR0aW5nRWwuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgICAgICAgICBhdHRyTmFtZS5zZXR0aW5nRWwuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGF0dHJWYWx1ZS5uYW1lRWwuc2V0VGV4dChtYXRjaFRhZ1R4dCk7XG4gICAgICAgICAgICAgICAgYXR0clZhbHVlLmRlc2NFbC5zZXRUZXh0KG1hdGNoVGFnUGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgICAgIG1hdGNoaW5nVHlwZS5zZXR0aW5nRWwuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGNhc2VTZW5zaXRpdmVUb2dnbGVyQ29udGFpbmVyLnNldHRpbmdFbC5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhdHRyTmFtZS5zZXR0aW5nRWwuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGF0dHJWYWx1ZS5uYW1lRWwuc2V0VGV4dChtYXRjaFBhdGhUeHQpO1xuICAgICAgICAgICAgICAgIGF0dHJWYWx1ZS5kZXNjRWwuc2V0VGV4dChtYXRjaFBhdGhQbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgbWF0Y2hpbmdUeXBlLnNldHRpbmdFbC5zaG93KCk7XG4gICAgICAgICAgICAgICAgY2FzZVNlbnNpdGl2ZVRvZ2dsZXJDb250YWluZXIuc2V0dGluZ0VsLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJTdHlsZSBvcHRpb25zXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIldoYXQgc3R5bGluZyBvcHRpb25zIGFyZSBhY3RpdmU/IFwiICtcbiAgICAgICAgICAgICAgICBcIkRpc2FibGluZyBvcHRpb25zIHlvdSB3b24ndCB1c2UgY2FuIGltcHJvdmUgcGVyZm9ybWFuY2Ugc2xpZ2h0bHkuXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjc3NMaW5rLnNlbGVjdFRleHQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHQuc2V0VmFsdWUoY3NzTGluay5zZWxlY3RUZXh0KTtcbiAgICAgICAgICAgICAgICB0LnNldFRvb2x0aXAoXCJTdHlsZSBsaW5rIHRleHRcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0ID0+IHtcbiAgICAgICAgICAgICAgICB0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3NzTGluay5zZWxlY3RQcmVwZW5kID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB0LnNldFZhbHVlKGNzc0xpbmsuc2VsZWN0UHJlcGVuZCk7XG4gICAgICAgICAgICAgICAgdC5zZXRUb29sdGlwKFwiQWRkIGNvbnRlbnQgYmVmb3JlIGxpbmtcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0ID0+IHtcbiAgICAgICAgICAgICAgICB0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3NzTGluay5zZWxlY3RBcHBlbmQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHQuc2V0VmFsdWUoY3NzTGluay5zZWxlY3RBcHBlbmQpO1xuICAgICAgICAgICAgICAgIHQuc2V0VG9vbHRpcChcIkFkZCBjb250ZW50IGFmdGVyIGxpbmtcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0ID0+IHtcbiAgICAgICAgICAgICAgICB0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3NzTGluay5zZWxlY3RCYWNrZ3JvdW5kID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB0LnNldFZhbHVlKGNzc0xpbmsuc2VsZWN0QmFja2dyb3VuZCk7XG4gICAgICAgICAgICAgICAgdC5zZXRUb29sdGlwKFwiQWRkIG9wdGlvbmFsIGJhY2tncm91bmQgb3IgdW5kZXJsaW5lIHRvIGxpbmtcIik7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoNCcsIHt0ZXh0OiAnUmVzdWx0J30pO1xuICAgICAgICBjb25zdCBtb2RhbCA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiUHJldmlld1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJcIilcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYiA9PiB7XG4gICAgICAgICAgICAgICAgYi5zZXRCdXR0b25UZXh0KFwiU2F2ZVwiKVxuICAgICAgICAgICAgICAgIGIub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLnNhdmVDYWxsYmFjayhjc3NMaW5rKTtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyBnZW5lcmF0ZSBidXR0b25cblxuICAgICAgICBjb25zdCBwcmV2aWV3ID0gc2F2ZUJ1dHRvbi5uYW1lRWw7XG4gICAgICAgIHVwZGF0ZUNvbnRhaW5lcihjc3NMaW5rLnR5cGUpO1xuICAgICAgICBzYXZlQnV0dG9uLnNldERpc2FibGVkKHVwZGF0ZURpc3BsYXkocHJldmlldywgdGhpcy5jc3NMaW5rLCB0aGlzLnBsdWdpbi5zZXR0aW5ncykpO1xuICAgIH1cblxufVxuXG5leHBvcnQgeyBDU1NCdWlsZGVyTW9kYWwgfSIsImltcG9ydCB7Q1NTTGluaywgbWF0Y2hTaWdufSBmcm9tIFwiLi9jc3NMaW5rXCI7XG5pbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3MgZnJvbSBcIi4uLy4uL21haW5cIjtcblxuXG5jb25zdCBjb2xvclNldCA9IFtbXG4gICAgJyMwMDg5QkEnLFxuICAgICcjMkM3M0QyJyxcbiAgICAnIzAwOEU5QicsXG4gICAgJyMwMDgxQ0YnLFxuICAgICcjMDA4RjdBJyxcbiAgICAnIzAwOEU5QicsXG5dLCBbXG4gICAgJyNENjVEQjEnLFxuICAgICcjMDA4MkMxJyxcbiAgICAnIzkyNzBEMycsXG4gICAgJyMwMDdGOTMnLFxuICAgICcjMDA3RUQ5JyxcbiAgICAnIzAwNzY2MCcsXG5dLCBbXG4gICAgJyNGRjk2NzEnLFxuICAgICcjQTM2QUFBJyxcbiAgICAnI0YyN0Q4OCcsXG4gICAgJyM2OTY3QTknLFxuICAgICcjRDI2RjlEJyxcbiAgICAnIzFiNjI5OScsXG5dLCBbXG4gICAgJyNGRkM3NUYnLFxuICAgICcjNEM5QTUyJyxcbiAgICAnI0MzQkI0RScsXG4gICAgJyMwMDg1NUInLFxuICAgICcjODhBQzRCJyxcbiAgICAnIzAwNkY2MScsXG5dLCBbXG4gICAgJyNGRjZGOTEnLFxuICAgICcjNkY3RjIyJyxcbiAgICAnI0UwNzI1MCcsXG4gICAgJyMyNTdBM0UnLFxuICAgICcjQUM3QzI2JyxcbiAgICAnIzAwNkY1RicsXG5dLCBbXG4gICAgJyNkOWQ4NjcnLFxuICAgICcjMkZBQjYzJyxcbiAgICAnI0I4RTA2NycsXG4gICAgJyMwMDhFNjMnLFxuICAgICcjNzhDNjY0JyxcbiAgICAnIzAwNzE2MCcsXG5dXTtcbmNvbnN0IGNvbG9yczogc3RyaW5nW10gPSBbXTtcbmZvciAoY29uc3QgaSBvZiBBcnJheSg2KS5rZXlzKCkpIHtcbiAgICBmb3IgKGNvbnN0IGogb2YgQXJyYXkoNikua2V5cygpKSB7XG4gICAgICAgIGNvbG9ycy5wdXNoKGNvbG9yU2V0W2pdW2ldKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGhhc2godWlkOiBzdHJpbmcpIHtcbiAgICBsZXQgaGFzaCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1aWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2hhciA9IHVpZC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjaGFyO1xuICAgICAgICBoYXNoID0gaGFzaCAmIGhhc2g7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuICAgIH1cbiAgICBoYXNoID0gTWF0aC5hYnMoaGFzaCk7XG4gICAgcmV0dXJuIGhhc2hcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJ1aWxkQ1NTKHNlbGVjdG9yczogQ1NTTGlua1tdLCBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzKSB7XG4gICAgY29uc3QgaW5zdHJ1Y3Rpb25zOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgXCIvKiBXQVJOSU5HOiBUaGlzIGZpbGUgd2lsbCBiZSBvdmVyd3JpdHRlbiBieSB0aGUgcGx1Z2luLlwiLFxuICAgICAgICBcIkRvIG5vdCBlZGl0IHRoaXMgZmlsZSBkaXJlY3RseSEgRmlyc3QgY29weSB0aGlzIGZpbGUgYW5kIHJlbmFtZSBpdCBpZiB5b3Ugd2FudCB0byBlZGl0IHRoaW5ncy4gKi9cIixcbiAgICAgICAgXCJcIixcbiAgICAgICAgXCI6cm9vdCB7XCJcbiAgICBdO1xuXG5cbiAgICBzZWxlY3RvcnMuZm9yRWFjaCgoc2VsZWN0b3IsIGkpID0+IHtcbiAgICAgICAgaWYgKHNlbGVjdG9yLnNlbGVjdFRleHQpIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKGAgICAgLS0ke3NlbGVjdG9yLnVpZH0tY29sb3I6ICR7Y29sb3JzW2hhc2goc2VsZWN0b3IudWlkKSAlIDM2XX07YCk7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChgICAgIC0tJHtzZWxlY3Rvci51aWR9LXdlaWdodDogaW5pdGlhbDtgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0b3Iuc2VsZWN0UHJlcGVuZCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goYCAgICAtLSR7c2VsZWN0b3IudWlkfS1iZWZvcmU6ICcnO2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxlY3Rvci5zZWxlY3RBcHBlbmQpIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKGAgICAgLS0ke3NlbGVjdG9yLnVpZH0tYWZ0ZXI6ICcnO2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxlY3Rvci5zZWxlY3RCYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChgICAgIC0tJHtzZWxlY3Rvci51aWR9LWJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7YCk7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChgICAgIC0tJHtzZWxlY3Rvci51aWR9LWRlY29yYXRpb246IGluaXRpYWw7YCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpbnN0cnVjdGlvbnMucHVzaChcIn1cIik7XG5cbiAgICBzZWxlY3RvcnMuZm9yRWFjaChzZWxlY3RvciA9PiB7XG4gICAgICAgIGxldCBjc3NTZWxlY3Rvcjogc3RyaW5nO1xuICAgICAgICBpZiAoc2VsZWN0b3IudHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgICAgIGNzc1NlbGVjdG9yID0gYFtkYXRhLWxpbmstJHtzZWxlY3Rvci5uYW1lfSR7bWF0Y2hTaWduW3NlbGVjdG9yLm1hdGNoXX09XCIke3NlbGVjdG9yLnZhbHVlfVwiICR7c2VsZWN0b3IubWF0Y2hDYXNlU2Vuc2l0aXZlID9cIlwiIDogXCIgaVwifV1gO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlbGVjdG9yLnR5cGUgPT09ICd0YWcnKSB7XG4gICAgICAgICAgICBjc3NTZWxlY3RvciA9IGBbZGF0YS1saW5rLXRhZ3MqPVwiJHtzZWxlY3Rvci52YWx1ZX1cIiBpXWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjc3NTZWxlY3RvciA9IGBbZGF0YS1saW5rLXBhdGgke21hdGNoU2lnbltzZWxlY3Rvci5tYXRjaF19PVwiJHtzZWxlY3Rvci52YWx1ZX1cIiAke3NlbGVjdG9yLm1hdGNoQ2FzZVNlbnNpdGl2ZSA/XCJcIiA6IFwiaVwifV1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGVjdG9yLnNlbGVjdFRleHQpIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKC4uLltcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgIGBkaXZbZGF0YS1pZD1cIiR7c2VsZWN0b3IudWlkfVwiXSBkaXYuc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uLGAsXG4gICAgICAgICAgICAgICAgY3NzU2VsZWN0b3IgKyBcIiB7XCIsXG4gICAgICAgICAgICAgICAgYCAgICBjb2xvcjogdmFyKC0tJHtzZWxlY3Rvci51aWR9LWNvbG9yKSAhaW1wb3J0YW50O2AsXG4gICAgICAgICAgICAgICAgYCAgICBmb250LXdlaWdodDogdmFyKC0tJHtzZWxlY3Rvci51aWR9LXdlaWdodCk7YCxcbiAgICAgICAgICAgICAgICBcIn1cIl0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxlY3Rvci5zZWxlY3RCYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaCguLi5bXCJcIixcbiAgICAgICAgICAgICAgICBgLmMtJHtzZWxlY3Rvci51aWR9LXVzZS1iYWNrZ3JvdW5kIGRpdltkYXRhLWlkPVwiJHtzZWxlY3Rvci51aWR9XCJdIGRpdi5zZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24sYCxcbiAgICAgICAgICAgICAgICBgLmMtJHtzZWxlY3Rvci51aWR9LXVzZS1iYWNrZ3JvdW5kIC5kYXRhLWxpbmstdGV4dCR7Y3NzU2VsZWN0b3J9IHtgLFxuICAgICAgICAgICAgICAgIGAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tJHtzZWxlY3Rvci51aWR9LWJhY2tncm91bmQtY29sb3IpICFpbXBvcnRhbnQ7YCxcbiAgICAgICAgICAgICAgICBgICAgIGJvcmRlci1yYWRpdXM6IDVweDtgLFxuICAgICAgICAgICAgICAgIGAgICAgcGFkZGluZy1sZWZ0OiAycHg7YCxcbiAgICAgICAgICAgICAgICBgICAgIHBhZGRpbmctcmlnaHQ6IDJweDtgLFxuICAgICAgICAgICAgICAgIGAgICAgdGV4dC1kZWNvcmF0aW9uOiB2YXIoLS0ke3NlbGVjdG9yLnVpZH0tZGVjb3JhdGlvbikgIWltcG9ydGFudDtgLFxuICAgICAgICAgICAgICAgIFwifVwiXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdG9yLnNlbGVjdFByZXBlbmQpIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKC4uLltcIlwiLFxuICAgICAgICAgICAgICAgIGBkaXZbZGF0YS1pZD1cIiR7c2VsZWN0b3IudWlkfVwiXSBkaXYuc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uOjpiZWZvcmUsYCxcbiAgICAgICAgICAgICAgICBgLmRhdGEtbGluay1pY29uJHtjc3NTZWxlY3Rvcn06OmJlZm9yZSB7YCxcbiAgICAgICAgICAgICAgICBgICAgIGNvbnRlbnQ6IHZhcigtLSR7c2VsZWN0b3IudWlkfS1iZWZvcmUpO2AsXG4gICAgICAgICAgICAgICAgXCJ9XCJdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0b3Iuc2VsZWN0QXBwZW5kKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaCguLi5bXCJcIixcbiAgICAgICAgICAgICAgICBgZGl2W2RhdGEtaWQ9XCIke3NlbGVjdG9yLnVpZH1cIl0gZGl2LnNldHRpbmctaXRlbS1kZXNjcmlwdGlvbjo6YWZ0ZXIsYCxcbiAgICAgICAgICAgICAgICBgLmRhdGEtbGluay1pY29uLWFmdGVyJHtjc3NTZWxlY3Rvcn06OmFmdGVyIHtgLFxuICAgICAgICAgICAgICAgIGAgICAgY29udGVudDogdmFyKC0tJHtzZWxlY3Rvci51aWR9LWFmdGVyKTtgLFxuICAgICAgICAgICAgICAgIFwifVwiXSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGluc3RydWN0aW9ucy5wdXNoKC4uLltcbiAgICAgICAgXCIvKiBAc2V0dGluZ3NcIixcbiAgICAgICAgXCJuYW1lOiBTdXBlcmNoYXJnZWQgTGlua3NcIixcbiAgICAgICAgXCJpZDogc3VwZXJjaGFyZ2VkLWxpbmtzXCIsXG4gICAgICAgIFwic2V0dGluZ3M6XCIsXG4gICAgXSk7XG5cbiAgICBzZWxlY3RvcnMuZm9yRWFjaCgoc2VsZWN0b3IsIGkpID0+IHtcbiAgICAgICAgbGV0IG5hbWUgPSBzZWxlY3Rvci5uYW1lO1xuICAgICAgICBsZXQgdmFsdWUgPSBzZWxlY3Rvci52YWx1ZTtcbiAgICAgICAgaWYgKHNlbGVjdG9yLnR5cGUgPT09ICd0YWcnKSB7XG4gICAgICAgICAgICBuYW1lID0gJ3RhZyc7XG4gICAgICAgICAgICAvLyB2YWx1ZSA9IFwiXFwjXCIgKyB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxlY3Rvci50eXBlID09PSAncGF0aCcpe1xuICAgICAgICAgICAgbmFtZSA9ICdwYXRoJztcbiAgICAgICAgfVxuICAgICAgICBpbnN0cnVjdGlvbnMucHVzaCguLi5bXG4gICAgICAgICAgICBcIiAgICAtIFwiLFxuICAgICAgICAgICAgYCAgICAgICAgaWQ6ICR7c2VsZWN0b3IudWlkfWAsXG4gICAgICAgICAgICBgICAgICAgICB0aXRsZTogJHtuYW1lfSBpcyAke3ZhbHVlfWAsXG4gICAgICAgICAgICBgICAgICAgICBkZXNjcmlwdGlvbjogRXhhbXBsZSBub3RlYCxcbiAgICAgICAgICAgIFwiICAgICAgICB0eXBlOiBoZWFkaW5nXCIsXG4gICAgICAgICAgICBcIiAgICAgICAgY29sbGFwc2VkOiB0cnVlXCIsXG4gICAgICAgICAgICBcIiAgICAgICAgbGV2ZWw6IDNcIl0pO1xuICAgICAgICBpZiAoc2VsZWN0b3Iuc2VsZWN0VGV4dCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goLi4uW1xuICAgICAgICAgICAgICAgIFwiICAgIC0gXCIsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgaWQ6ICR7c2VsZWN0b3IudWlkfS1jb2xvcmAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgdGl0bGU6IExpbmsgY29sb3JgLFxuICAgICAgICAgICAgICAgIFwiICAgICAgICB0eXBlOiB2YXJpYWJsZS1jb2xvclwiLFxuICAgICAgICAgICAgICAgIFwiICAgICAgICBmb3JtYXQ6IGhleFwiLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIGRlZmF1bHQ6ICcke2NvbG9yc1toYXNoKHNlbGVjdG9yLnVpZCkgJSAzNl19J2AsXG4gICAgICAgICAgICAgICAgXCIgICAgLSBcIixcbiAgICAgICAgICAgICAgICBgICAgICAgICBpZDogJHtzZWxlY3Rvci51aWR9LXdlaWdodGAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgdGl0bGU6IEZvbnQgd2VpZ2h0YCxcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgdHlwZTogdmFyaWFibGUtc2VsZWN0XCIsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgZGVmYXVsdDogaW5pdGlhbGAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgb3B0aW9uczpgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgICAgICAtIGluaXRpYWxgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgICAgICAtIGxpZ2h0ZXJgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgICAgICAtIG5vcm1hbGAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgICAgIC0gYm9sZGAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgICAgIC0gYm9sZGVyYCxcbiAgICAgICAgICAgICAgICBcIiAgICAtIFwiLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIGlkOiAke3NlbGVjdG9yLnVpZH0tZGVjb3JhdGlvbmAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgdGl0bGU6IEZvbnQgZGVjb3JhdGlvbmAsXG4gICAgICAgICAgICAgICAgXCIgICAgICAgIHR5cGU6IHZhcmlhYmxlLXNlbGVjdFwiLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIGRlZmF1bHQ6IGluaXRpYWxgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIG9wdGlvbnM6YCxcbiAgICAgICAgICAgICAgICBgICAgICAgICAgICAgLSBpbml0aWFsYCxcbiAgICAgICAgICAgICAgICBgICAgICAgICAgICAgLSB1bmRlcmxpbmVgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgICAgICAtIG92ZXJsaW5lYCxcbiAgICAgICAgICAgICAgICBgICAgICAgICAgICAgLSBsaW5lLXRocm91Z2hgXSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0b3Iuc2VsZWN0UHJlcGVuZCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goLi4uW1wiICAgIC0gXCIsXG4gICAgICAgICAgICBgICAgICAgICBpZDogJHtzZWxlY3Rvci51aWR9LWJlZm9yZWAsXG4gICAgICAgICAgICBgICAgICAgICB0aXRsZTogUHJlcGVuZCB0ZXh0YCxcbiAgICAgICAgICAgIGAgICAgICAgIGRlc2NyaXB0aW9uOiBBZGQgc29tZSB0ZXh0LCBzdWNoIGFzIGFuIGVtb2ppLCBiZWZvcmUgdGhlIGxpbmtzLmAsXG4gICAgICAgICAgICBcIiAgICAgICAgdHlwZTogdmFyaWFibGUtdGV4dFwiLFxuICAgICAgICAgICAgYCAgICAgICAgZGVmYXVsdDogJydgLFxuICAgICAgICAgICAgYCAgICAgICAgcXVvdGVzOiB0cnVlYF0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdG9yLnNlbGVjdEFwcGVuZCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goLi4uW1wiICAgIC0gXCIsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgaWQ6ICR7c2VsZWN0b3IudWlkfS1hZnRlcmAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgdGl0bGU6IEFwcGVuZCB0ZXh0YCxcbiAgICAgICAgICAgICAgICBgICAgICAgICBkZXNjcmlwdGlvbjogQWRkIHNvbWUgdGV4dCwgc3VjaCBhcyBhbiBlbW9qaSwgYWZ0ZXIgdGhlIGxpbmtzLmAsXG4gICAgICAgICAgICAgICAgXCIgICAgICAgIHR5cGU6IHZhcmlhYmxlLXRleHRcIixcbiAgICAgICAgICAgICAgICBgICAgICAgICBkZWZhdWx0OiAnJ2AsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgcXVvdGVzOiB0cnVlYF0pXG4gICAgICAgIH1cbiAgICAgICAgaWYoc2VsZWN0b3Iuc2VsZWN0QmFja2dyb3VuZCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goLi4uW1wiICAgIC0gXCIsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgaWQ6IGMtJHtzZWxlY3Rvci51aWR9LXVzZS1iYWNrZ3JvdW5kYCxcbiAgICAgICAgICAgICAgICBgICAgICAgICB0aXRsZTogVXNlIGJhY2tncm91bmQgY29sb3JgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIGRlc2NyaXB0aW9uOiBBZGRzIGEgYmFja2dyb3VuZCBjb2xvciB0byB0aGUgbGluay4gVGhpcyBjYW4gbG9vayBidWdneSBpbiBsaXZlIHByZXZpZXcuYCxcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgdHlwZTogY2xhc3MtdG9nZ2xlXCIsXG4gICAgICAgICAgICAgICAgXCIgICAgLSBcIixcbiAgICAgICAgICAgICAgICBgICAgICAgICBpZDogJHtzZWxlY3Rvci51aWR9LWJhY2tncm91bmQtY29sb3JgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIHRpdGxlOiBCYWNrZ3JvdW5kIGNvbG9yYCxcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgdHlwZTogdmFyaWFibGUtY29sb3JcIixcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgZm9ybWF0OiBoZXhcIixcbiAgICAgICAgICAgICAgICBgICAgICAgICBkZWZhdWx0OiAnI2ZmZmZmZidgXSlcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGluc3RydWN0aW9ucy5wdXNoKFwiKi9cIik7XG5cbiAgICBjb25zdCB2YXVsdCA9IHBsdWdpbi5hcHAudmF1bHQ7XG4gICAgY29uc3QgcGF0aERpciA9IFwiLm9ic2lkaWFuL3NuaXBwZXRzXCI7XG4gICAgYXdhaXQgdmF1bHQuYWRhcHRlci5ta2RpcihwYXRoRGlyKTtcbiAgICBjb25zdCBwYXRoID0gXCIub2JzaWRpYW4vc25pcHBldHMvc3VwZXJjaGFyZ2VkLWxpbmtzLWdlbi5jc3NcIjtcbiAgICBpZiAoYXdhaXQgdmF1bHQuYWRhcHRlci5leGlzdHMocGF0aCkpIHtcbiAgICAgICAgYXdhaXQgdmF1bHQuYWRhcHRlci5yZW1vdmUocGF0aCk7XG4gICAgfVxuICAgIGF3YWl0IHBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKHBhdGgsIGluc3RydWN0aW9ucy5qb2luKCdcXG4nKSk7XG5cbiAgICAvLyBBY3RpdmF0ZSBzbmlwcGV0XG4gICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5hY3RpdmF0ZVNuaXBwZXQpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBjdXN0b21Dc3MgPSBwbHVnaW4uYXBwLmN1c3RvbUNzcztcbiAgICAgICAgY3VzdG9tQ3NzLnJlYWRDc3NGb2xkZXJzKCk7XG4gICAgICAgIGN1c3RvbUNzcy5zZXRDc3NFbmFibGVkU3RhdHVzKCdzdXBlcmNoYXJnZWQtbGlua3MtZ2VuJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIFN0eWxlIFNldHRpbmdzIHJlYWRzIGNoYW5nZXNcbiAgICBwbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKFwicGFyc2Utc3R5bGUtc2V0dGluZ3NcIik7XG59XG4iLCJpbXBvcnQge0FwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgQnV0dG9uQ29tcG9uZW50LCBUb2dnbGVDb21wb25lbnQsIE5vdGljZSwgZGVib3VuY2V9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3MgZnJvbSBcIm1haW5cIlxuaW1wb3J0IEZpZWxkU2V0dGluZ3NNb2RhbCBmcm9tIFwic3JjL3NldHRpbmdzL0ZpZWxkU2V0dGluZ3NNb2RhbFwiXG5pbXBvcnQgRmllbGQgZnJvbSBcInNyYy9GaWVsZFwiXG5pbXBvcnQgRmllbGRTZXR0aW5nIGZyb20gXCJzcmMvc2V0dGluZ3MvRmllbGRTZXR0aW5nXCJcbmltcG9ydCB7Q1NTQnVpbGRlck1vZGFsLCB1cGRhdGVEaXNwbGF5fSBmcm9tIFwiLi4vY3NzQnVpbGRlci9jc3NCdWlsZGVyTW9kYWxcIjtcbmltcG9ydCB7YnVpbGRDU1N9IGZyb20gXCIuLi9jc3NCdWlsZGVyL2Nzc0J1aWxkZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3M7XG5cdGRlYm91bmNlZEdlbmVyYXRlOiBGdW5jdGlvbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcykge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHR0aGlzLmRlYm91bmNlZEdlbmVyYXRlID0gZGVib3VuY2UodGhpcy5fZ2VuZXJhdGVTbmlwcGV0LCAxMDAwLCB0cnVlKTtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0bGV0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICAvKiBNYW5hZ2luZyBleHRyYSBhdHRpcmJ1dGVzIGZvciBhLmludGVybmFsLWxpbmsgKi9cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdUYXJnZXQgQXR0cmlidXRlcyBmb3Igc3R5bGluZycpXG5cdFx0XHQuc2V0RGVzYygnRnJvbnRtYXR0ZXIgYXR0cmlidXRlcyB0byB0YXJnZXQsIGNvbW1hIHNlcGFyYXRlZCcpXG5cdFx0XHQuYWRkVGV4dEFyZWEoKHRleHQpID0+IHt0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgYXR0cmlidXRlcyBhcyBzdHJpbmcsIGNvbW1hIHNlcGFyYXRlZCcpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzLmpvaW4oJywgJykpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzID0gdmFsdWUucmVwbGFjZSgvXFxzL2csJycpLnNwbGl0KCcsJyk7XG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMubGVuZ3RoID09PSAxICYmICF0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzWzBdKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHR0ZXh0LmlucHV0RWwucm93cyA9IDY7XG5cdFx0XHRcdHRleHQuaW5wdXRFbC5jb2xzID0gMjU7XG5cdFx0XHR9KTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoNCcsIHt0ZXh0OiAnU3R5bGluZyd9KTtcblx0XHRjb25zdCBzdHlsZVNldHRpbmdEZXNjcmlwdGlvbiA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXHRcdHN0eWxlU2V0dGluZ0Rlc2NyaXB0aW9uLmlubmVySFRNTCA9IGBcblN0eWxpbmcgY2FuIGJlIGRvbmUgdXNpbmcgdGhlIFN0eWxlIFNldHRpbmdzIHBsdWdpbi4gRm9sbG93IHRoZSBzdGVwcyBiZWxvdzpcbiA8b2w+XG4gPGxpPkNyZWF0ZSBzZWxlY3RvcnMgZG93biBiZWxvdy48L2xpPlxuIDxsaT5HbyB0byB0aGUgU3R5bGUgU2V0dGluZ3MgdGFiIGFuZCBzdHlsZSB5b3VyIGxpbmtzITwvbGk+XG48L29sPmBcblx0XHRjb25zdCBzZWxlY3RvckRpdiA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXHRcdHRoaXMuZHJhd1NlbGVjdG9ycyhzZWxlY3RvckRpdik7XG5cblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoNCcsIHt0ZXh0OiAnU2V0dGluZ3MnfSk7XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRW5hYmxlIGluIEVkaXRvcicpXG5cdFx0XHQuc2V0RGVzYygnSWYgdHJ1ZSwgdGhpcyB3aWxsIGFsc28gc3VwZXJjaGFyZ2UgaW50ZXJuYWwgbGlua3MgaW4gdGhlIGVkaXRvciB2aWV3IG9mIGEgbm90ZS4nKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRWRpdG9yKVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UodmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUVkaXRvciA9IHZhbHVlXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcblx0XHRcdFx0fSlcblx0XHRcdH0pXG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdFbmFibGUgaW4gRmlsZSBCcm93c2VyJylcblx0XHRcdC5zZXREZXNjKCdJZiB0cnVlLCB0aGlzIHdpbGwgYWxzbyBzdXBlcmNoYXJnZSB0aGUgZmlsZSBicm93c2VyLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVGaWxlTGlzdClcblx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVGaWxlTGlzdCA9IHZhbHVlXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcblx0XHRcdFx0fSlcblx0XHRcdH0pXG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdFbmFibGUgaW4gUGx1Z2lucycpXG5cdFx0XHQuc2V0RGVzYygnSWYgdHJ1ZSwgdGhpcyB3aWxsIGFsc28gc3VwZXJjaGFyZ2UgcGx1Z2lucyBsaWtlIHRoZSBiYWNrbGlua3MgYW5kIGZvcndhcmQgbGlua3MgcGFuZWxzLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVCYWNrbGlua3MpXG5cdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQmFja2xpbmtzID0gdmFsdWVcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBpbiBRdWljayBTd2l0Y2hlcicpXG5cdFx0XHQuc2V0RGVzYygnSWYgdHJ1ZSwgdGhpcyB3aWxsIGFsc28gc3VwZXJjaGFyZ2UgdGhlIHF1aWNrIHN3aXRjaGVyLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVRdWlja1N3aXRjaGVyKVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UodmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVF1aWNrU3dpdGNoZXIgPSB2YWx1ZVxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRW5hYmxlIGluIExpbmsgQXV0b2NvbXBsZXRlcicpXG5cdFx0XHQuc2V0RGVzYygnSWYgdHJ1ZSwgdGhpcyB3aWxsIGFsc28gc3VwZXJjaGFyZ2UgdGhlIGxpbmsgYXV0b2NvbXBsZXRlci4nKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlU3VnZ2VzdG9yKVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UodmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVN1Z2dlc3RvciA9IHZhbHVlXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoNCcsIHt0ZXh0OiAnQWR2YW5jZWQnfSk7XG5cdFx0Ly8gTWFuYWdpbmcgY2hvaWNlIHdldGhlciB5b3Ugd2FudCB0byBwYXJzZSB0YWdzIGJvdGggZnJvbSBub3JtYWwgdGFncyBhbmQgaW4gdGhlIGZyb250bWF0dGVyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnUGFyc2UgYWxsIHRhZ3MgaW4gdGhlIGZpbGUnKVxuXHRcdFx0LnNldERlc2MoJ1NldHMgdGhlIGBkYXRhLWxpbmstdGFnc2AtYXR0cmlidXRlIHRvIGxvb2sgZm9yIHRhZ3MgYm90aCBpbiB0aGUgZnJvbnRtYXR0ZXIgYW5kIGluIHRoZSBmaWxlIGFzICN0YWctbmFtZScpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRUYWdzKVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRhcmdldFRhZ3MgPSB2YWx1ZVxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblxuXHRcdC8vIE1hbmFnaW5nIGNob2ljZSB3ZXRoZXIgeW91IGdldCBhdHRyaWJ1dGVzIGZyb20gaW5saW5lIGZpZWxkcyBhbmQgZnJvbnRtYXR0ZXIgb3Igb25seSBmcm9udG1hdGVyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0LnNldE5hbWUoJ1NlYXJjaCBmb3IgYXR0cmlidXRlIGluIElubGluZSBmaWVsZHMgbGlrZSA8ZmllbGQ6Oj4nKVxuXHRcdC5zZXREZXNjKCdTZXRzIHRoZSBgZGF0YS1saW5rLTxmaWVsZD5gLWF0dHJpYnV0ZSB0byB0aGUgdmFsdWUgb2YgaW5saW5lIGZpZWxkcycpXG5cdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldEZyb21JbmxpbmVGaWVsZClcblx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRGcm9tSW5saW5lRmllbGQgPSB2YWx1ZVxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gTWFuYWdpbmcgY2hvaWNlIHdldGhlciB5b3UgZ2V0IGF0dHJpYnV0ZXMgZnJvbSBpbmxpbmUgZmllbGRzIGFuZCBmcm9udG1hdHRlciBvciBvbmx5IGZyb250bWF0ZXJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdBdXRvbWF0aWNhbGx5IGFjdGl2YXRlIHNuaXBwZXQnKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRydWUsIHRoaXMgd2lsbCBhdXRvbWF0aWNhbGx5IGFjdGl2YXRlIHRoZSBnZW5lcmF0ZWQgQ1NTIHNuaXBwZXQgXCJzdXBlcmNoYXJnZWQtbGlua3MtZ2VuLmNzc1wiLiAnICtcblx0XHRcdFx0J1R1cm4gdGhpcyBvZmYgaWYgeW91IGRvblxcJ3Qgd2FudCB0aGlzIHRvIGhhcHBlbi4nKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWN0aXZhdGVTbmlwcGV0KVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFjdGl2YXRlU25pcHBldCA9IHZhbHVlXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuICAgICAgICAvKiBNYW5hZ2luZyBwcmVkZWZpbmVkIHZhbHVlcyBmb3IgcHJvcGVydGllcyAqL1xuXHRcdC8qIE1hbmFnZSBtZW51IG9wdGlvbnMgZGlzcGxheSovXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkRpc3BsYXkgZmllbGQgb3B0aW9ucyBpbiBjb250ZXh0IG1lbnVcIilcblx0XHRcdC5zZXREZXNjKFwiQ2hvb3NlIHRvIHNob3cgb3IgaGlkZSBmaWVsZHMgb3B0aW9ucyBpbiB0aGUgY29udGV4dCBtZW51IG9mIGEgbGluayBvciBhIGZpbGVcIilcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZTogVG9nZ2xlQ29tcG9uZW50KSA9PiB7XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXNwbGF5RmllbGRzSW5Db250ZXh0TWVudSlcblx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXNwbGF5RmllbGRzSW5Db250ZXh0TWVudSA9IHZhbHVlXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcblx0XHRcdFx0fSlcblx0XHRcdH0pXG5cdFx0LyogRXhjbHVkZSBGaWVsZHMgZnJvbSBjb250ZXh0IG1lbnUqL1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0lnbm9yZWQgZmllbGRzJylcblx0XHRcdC5zZXREZXNjKCdGaWVsZHMgdG8gYmUgaWdub3JlZCBieSB0aGUgcGx1Z2luIHdoZW4gYWRkaW5nIG9wdGlvbnMgdG8gdGhlIGNvbnRleHQgbWVudScpXG5cdFx0XHQuYWRkVGV4dEFyZWEoKHRleHQpID0+IHt0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgZmllbGRzIGFzIHN0cmluZywgY29tbWEgc2VwYXJhdGVkJylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbGx5SWdub3JlZEZpZWxkcy5qb2luKCcsICcpKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2xvYmFsbHlJZ25vcmVkRmllbGRzID0gdmFsdWUucmVwbGFjZSgvXFxzL2csJycpLnNwbGl0KCcsJyk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdHRleHQuaW5wdXRFbC5yb3dzID0gNjtcblx0XHRcdFx0dGV4dC5pbnB1dEVsLmNvbHMgPSAyNTtcblx0XHRcdH0pO1xuXG5cdFx0LyogU2V0IGNsYXNzRmlsZXMgUGF0aCovXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0LnNldE5hbWUoJ2NsYXNzIEZpbGVzIHBhdGgnKVxuXHRcdC5zZXREZXNjKCdQYXRoIHRvIHRoZSBmaWxlcyBjb250YWluaW5nIHRoZSBhdXRob3JpemVkIGZpZWxkcyBmb3IgYSB0eXBlIG9mIG5vdGUnKVxuXHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7dGV4dFxuXHRcdFx0LnNldFBsYWNlaG9sZGVyKCdQYXRoLycpXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xhc3NGaWxlc1BhdGgpXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNsYXNzRmlsZXNQYXRoID0gdmFsdWVcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG4gICAgICAgIC8qIEFkZCBuZXcgcHJvcGVydHkgZm9yIHdoaWNoIHdlIHdhbnQgdG8gcHJlc2V0IHZhbHVlcyovXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkFkZCBOZXcgUHJvcGVydHkgTWFuYWdlclwiKVxuXHRcdFx0LnNldERlc2MoXCJBZGQgYSBuZXcgRnJvbnRtYXR0ZXIgcHJvcGVydHkgZm9yIHdoaWNoIHlvdSB3YW50IHByZXNldCB2YWx1ZXMuXCIpXG5cdFx0XHQuYWRkQnV0dG9uKChidXR0b246IEJ1dHRvbkNvbXBvbmVudCk6IEJ1dHRvbkNvbXBvbmVudCA9PiB7XG5cdFx0XHRcdHJldHVybiBidXR0b25cblx0XHRcdFx0XHQuc2V0VG9vbHRpcChcIkFkZCBOZXcgUHJvcGVydHkgTWFuYWdlclwiKVxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwiK1wiKVxuXHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdGxldCBtb2RhbCA9IG5ldyBGaWVsZFNldHRpbmdzTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCBjb250YWluZXJFbCk7XG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuICAgICAgICAvKiBNYW5hZ2VkIHByb3BlcnRpZXMgdGhhdCBjdXJyZW50bHkgaGF2ZSBwcmVzZXQgdmFsdWVzICovXG5cdFx0dGhpcy5wbHVnaW4uaW5pdGlhbFByb3BlcnRpZXMuZm9yRWFjaChwcm9wID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0gbmV3IEZpZWxkKClcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocHJvcGVydHksIHByb3ApXG5cdFx0XHRuZXcgRmllbGRTZXR0aW5nKGNvbnRhaW5lckVsLCBwcm9wZXJ0eSwgdGhpcy5hcHAsIHRoaXMucGx1Z2luKVxuXHRcdH0pXG5cdH1cblxuXHRnZW5lcmF0ZVNuaXBwZXQoKSB7XG5cdFx0dGhpcy5kZWJvdW5jZWRHZW5lcmF0ZSgpO1xuXHR9XG5cblx0YXN5bmMgX2dlbmVyYXRlU25pcHBldCgpIHtcblx0XHRhd2FpdCBidWlsZENTUyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RvcnMsIHRoaXMucGx1Z2luKTtcblx0XHQvLyBuZXcgTm90aWNlKFwiR2VuZXJhdGVkIHN1cGVyY2hhcmdlZC1saW5rcy1nZW4uY3NzXCIpO1xuXHR9XG5cblx0ZHJhd1NlbGVjdG9ycyhkaXY6IEhUTUxFbGVtZW50KSB7XG5cdFx0ZGl2LmVtcHR5KCk7XG5cdFx0dGhpcy5nZW5lcmF0ZVNuaXBwZXQoKTtcblx0XHRjb25zdCBzZWxlY3RvcnMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RvcnM7XG5cdFx0c2VsZWN0b3JzLmZvckVhY2goKHNlbGVjdG9yLCBpKSA9PiB7XG5cdFx0XHRjb25zdCBzID0gbmV3IFNldHRpbmcoZGl2KVxuXHRcdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG5cdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3Qgb2xkU2VsZWN0b3IgPSBzZWxlY3RvcnNbaSsxXTtcblx0XHRcdFx0XHRcdHNlbGVjdG9yc1tpKzFdID0gc2VsZWN0b3I7XG5cdFx0XHRcdFx0XHRzZWxlY3RvcnNbaV0gPSBvbGRTZWxlY3Rvcjtcblx0XHRcdFx0XHRcdHRoaXMuZHJhd1NlbGVjdG9ycyhkaXYpO1xuXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oXCJkb3duLWFycm93LXdpdGgtdGFpbFwiKTtcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcChcIk1vdmUgc2VsZWN0b3IgZG93blwiKTtcblx0XHRcdFx0XHRpZiAoaSA9PT0gc2VsZWN0b3JzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBvbGRTZWxlY3RvciA9IHNlbGVjdG9yc1tpLTFdO1xuXHRcdFx0XHRcdFx0c2VsZWN0b3JzW2ktMV0gPSBzZWxlY3Rvcjtcblx0XHRcdFx0XHRcdHNlbGVjdG9yc1tpXSA9IG9sZFNlbGVjdG9yO1xuXHRcdFx0XHRcdFx0dGhpcy5kcmF3U2VsZWN0b3JzKGRpdik7XG5cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRidXR0b24uc2V0SWNvbihcInVwLWFycm93LXdpdGgtdGFpbFwiKTtcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcChcIk1vdmUgc2VsZWN0b3IgdXBcIik7XG5cdFx0XHRcdFx0aWYgKGkgPT09IDApIHtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9Pntcblx0XHRcdFx0XHRcdGNvbnN0IGZvcm1Nb2RhbCA9IG5ldyBDU1NCdWlsZGVyTW9kYWwodGhpcy5wbHVnaW4sIChuZXdTZWxlY3RvcikgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RvcnNbaV0gPSBuZXdTZWxlY3Rvcjtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHVwZGF0ZURpc3BsYXkocy5uYW1lRWwsIHNlbGVjdG9yLCB0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG5cdFx0XHRcdFx0XHRcdHRoaXMuZ2VuZXJhdGVTbmlwcGV0KCk7XG5cdFx0XHRcdFx0XHR9LCBzZWxlY3Rvcik7XG5cdFx0XHRcdFx0XHRmb3JtTW9kYWwub3BlbigpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKFwicGVuY2lsXCIpO1xuXHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKFwiRWRpdCBzZWxlY3RvclwiKVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG5cdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0b3JzLnJlbW92ZShzZWxlY3Rvcik7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdHRoaXMuZHJhd1NlbGVjdG9ycyhkaXYpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKFwiY3Jvc3NcIik7XG5cdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoXCJSZW1vdmUgc2VsZWN0b3JcIik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0dXBkYXRlRGlzcGxheShzLm5hbWVFbCwgc2VsZWN0b3IsIHRoaXMucGx1Z2luLnNldHRpbmdzKTtcblx0XHR9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGRpdilcblx0XHRcdC5zZXROYW1lKFwiTmV3IHNlbGVjdG9yXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkNyZWF0ZSBhIG5ldyBzZWxlY3RvciB0byBzdHlsZSB3aXRoIFN0eWxlIFNldHRpbmdzLlwiKVxuXHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4ge1xuXHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZm9ybU1vZGFsID0gbmV3IENTU0J1aWxkZXJNb2RhbCh0aGlzLnBsdWdpbiwgKG5ld1NlbGVjdG9yKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RvcnMucHVzaChuZXdTZWxlY3Rvcik7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdHRoaXMuZHJhd1NlbGVjdG9ycyhkaXYpO1xuXHRcdFx0XHRcdFx0Ly8gVE9ETzogRm9yY2UgcmVkcmF3IHNvbWVob3c/XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Zm9ybU1vZGFsLm9wZW4oKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiTmV3XCIpO1xuXHRcdFx0fSk7XG5cdH1cbn1cbiIsImltcG9ydCB7IEFwcCwgZ2V0QWxsVGFncywgZ2V0TGlua3BhdGgsIExpbmtDYWNoZSwgTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgTWFya2Rvd25WaWV3LCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgeyBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzIH0gZnJvbSBcInNyYy9zZXR0aW5ncy9TdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzXCJcbmltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwiLi4vLi4vbWFpblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJFeHRyYUF0dHJpYnV0ZXMobGluazogSFRNTEVsZW1lbnQpIHtcbiAgICBPYmplY3QudmFsdWVzKGxpbmsuYXR0cmlidXRlcykuZm9yRWFjaChhdHRyID0+IHtcbiAgICAgICAgaWYgKGF0dHIubmFtZS5pbmNsdWRlcyhcImRhdGEtbGlua1wiKSkge1xuICAgICAgICAgICAgbGluay5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5uYW1lKVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hUYXJnZXRBdHRyaWJ1dGVzU3luYyhhcHA6IEFwcCwgc2V0dGluZ3M6IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3MsIGRlc3Q6IFRGaWxlLCBhZGREYXRhSHJlZjogYm9vbGVhbik6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIGxldCBuZXdfcHJvcHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7IHRhZ3M6IFwiXCIgfVxuICAgIGNvbnN0IGNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGRlc3QpXG4gICAgaWYgKCFjYWNoZSkgcmV0dXJuIG5ld19wcm9wcztcblxuICAgIGNvbnN0IGZyb250bWF0dGVyID0gY2FjaGUuZnJvbnRtYXR0ZXJcblxuICAgIGlmIChmcm9udG1hdHRlcikge1xuICAgICAgICBzZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzLmZvckVhY2goYXR0cmlidXRlID0+IHtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhmcm9udG1hdHRlcikuaW5jbHVkZXMoYXR0cmlidXRlKSkge1xuICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUgPT09ICd0YWcnIHx8IGF0dHJpYnV0ZSA9PT0gJ3RhZ3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld19wcm9wc1sndGFncyddICs9IGZyb250bWF0dGVyW2F0dHJpYnV0ZV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3X3Byb3BzW2F0dHJpYnV0ZV0gPSBmcm9udG1hdHRlclthdHRyaWJ1dGVdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGlmIChzZXR0aW5ncy50YXJnZXRUYWdzKSB7XG4gICAgICAgIG5ld19wcm9wc1tcInRhZ3NcIl0gKz0gZ2V0QWxsVGFncyhjYWNoZSkuam9pbignICcpO1xuICAgIH1cblxuICAgIGlmIChhZGREYXRhSHJlZikge1xuICAgICAgICBuZXdfcHJvcHNbJ2RhdGEtaHJlZiddID0gZGVzdC5iYXNlbmFtZTtcbiAgICB9XG4gICAgbmV3X3Byb3BzWydwYXRoJ10gPSBkZXN0LnBhdGg7XG4gICAgLy9AdHMtaWdub3JlXG4gICAgY29uc3QgZ2V0UmVzdWx0cyA9IChhcGkpID0+IHtcbiAgICAgICAgY29uc3QgcGFnZSA9IGFwaS5wYWdlKGRlc3QucGF0aCk7XG4gICAgICAgIGlmICghcGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMuZm9yRWFjaCgoZmllbGQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYWdlW2ZpZWxkXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgbmV3X3Byb3BzW2ZpZWxkXSA9IHZhbHVlO1xuICAgICAgICB9KVxuICAgIH07XG5cbiAgICBpZiAoc2V0dGluZ3MuZ2V0RnJvbUlubGluZUZpZWxkICYmIGFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcyhcImRhdGF2aWV3XCIpKSB7XG4gICAgICAgIGNvbnN0IGFwaSA9IGFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXc/LmFwaTtcbiAgICAgICAgaWYgKGFwaSkge1xuICAgICAgICAgICAgZ2V0UmVzdWx0cyhhcGkpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uKFwiZGF0YXZpZXc6YXBpLXJlYWR5XCIsIChhcGk6IGFueSkgPT5cbiAgICAgICAgICAgICAgICAgICAgZ2V0UmVzdWx0cyhhcGkpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3X3Byb3BzXG59XG5cbmZ1bmN0aW9uIHNldExpbmtOZXdQcm9wcyhsaW5rOiBIVE1MRWxlbWVudCwgbmV3X3Byb3BzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGZvciAoY29uc3QgYSBvZiBsaW5rLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgaWYgKGEubmFtZS5pbmNsdWRlcyhcImRhdGEtbGlua1wiKSAmJiAhKGEubmFtZSBpbiBuZXdfcHJvcHMpKSB7XG4gICAgICAgICAgICBsaW5rLnJlbW92ZUF0dHJpYnV0ZShhLm5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIE9iamVjdC5rZXlzKG5ld19wcm9wcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBjb25zdCBuYW1lID0gXCJkYXRhLWxpbmstXCIgKyBrZXk7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gbmV3X3Byb3BzW2tleV07XG4gICAgICAgIGNvbnN0IGN1clZhbHVlID0gbGluay5nZXRBdHRyaWJ1dGUobmFtZSk7XG5cbiAgICAgICAgLy8gT25seSB1cGRhdGUgaWYgdmFsdWUgaXMgZGlmZmVyZW50XG4gICAgICAgIGlmICghbmV3VmFsdWUgfHwgY3VyVmFsdWUgIT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiZGF0YS1saW5rLVwiICsga2V5LCBuZXdfcHJvcHNba2V5XSlcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghbGluay5oYXNDbGFzcyhcImRhdGEtbGluay1pY29uXCIpKSB7XG4gICAgICAgIGxpbmsuYWRkQ2xhc3MoXCJkYXRhLWxpbmstaWNvblwiKTtcbiAgICB9XG4gICAgaWYgKCFsaW5rLmhhc0NsYXNzKFwiZGF0YS1saW5rLWljb24tYWZ0ZXJcIikpIHtcbiAgICAgICAgbGluay5hZGRDbGFzcyhcImRhdGEtbGluay1pY29uLWFmdGVyXCIpO1xuICAgIH1cbiAgICBpZiAoIWxpbmsuaGFzQ2xhc3MoXCJkYXRhLWxpbmstdGV4dFwiKSkge1xuICAgICAgICBsaW5rLmFkZENsYXNzKFwiZGF0YS1saW5rLXRleHRcIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMaW5rRXh0cmFBdHRyaWJ1dGVzKGFwcDogQXBwLCBzZXR0aW5nczogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncywgbGluazogSFRNTEVsZW1lbnQsIGRlc3ROYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBsaW5rSHJlZiA9IGxpbmsuZ2V0QXR0cmlidXRlKCdocmVmJykuc3BsaXQoJyMnKVswXTtcbiAgICBjb25zdCBkZXN0ID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QobGlua0hyZWYsIGRlc3ROYW1lKTtcblxuICAgIGlmIChkZXN0KSB7XG4gICAgICAgIGNvbnN0IG5ld19wcm9wcyA9IGZldGNoVGFyZ2V0QXR0cmlidXRlc1N5bmMoYXBwLCBzZXR0aW5ncywgZGVzdCwgZmFsc2UpO1xuICAgICAgICBzZXRMaW5rTmV3UHJvcHMobGluaywgbmV3X3Byb3BzKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVEaXZFeHRyYUF0dHJpYnV0ZXMoYXBwOiBBcHAsIHNldHRpbmdzOiBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzLCBsaW5rOiBIVE1MRWxlbWVudCwgZGVzdE5hbWU6IHN0cmluZywgbGlua05hbWU/OiBzdHJpbmcpIHtcbiAgICBpZiAoIWxpbmtOYW1lKSB7XG4gICAgICAgIGxpbmtOYW1lID0gbGluay50ZXh0Q29udGVudDtcbiAgICB9XG4gICAgY29uc3QgZGVzdCA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGdldExpbmtwYXRoKGxpbmtOYW1lKSwgZGVzdE5hbWUpXG5cbiAgICBpZiAoZGVzdCkge1xuICAgICAgICBjb25zdCBuZXdfcHJvcHMgPSBmZXRjaFRhcmdldEF0dHJpYnV0ZXNTeW5jKGFwcCwgc2V0dGluZ3MsIGRlc3QsIHRydWUpO1xuICAgICAgICBzZXRMaW5rTmV3UHJvcHMobGluaywgbmV3X3Byb3BzKTtcbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUVsTGlua3MoYXBwOiBBcHAsIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIGVsOiBIVE1MRWxlbWVudCwgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0KSB7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSBwbHVnaW4uc2V0dGluZ3M7XG4gICAgY29uc3QgbGlua3MgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdhLmludGVybmFsLWxpbmsnKTtcbiAgICBjb25zdCBkZXN0TmFtZSA9IGN0eC5zb3VyY2VQYXRoLnJlcGxhY2UoLyguKikubWQvLCBcIiQxXCIpO1xuICAgIGxpbmtzLmZvckVhY2goKGxpbms6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgIHVwZGF0ZUxpbmtFeHRyYUF0dHJpYnV0ZXMoYXBwLCBzZXR0aW5ncywgbGluaywgZGVzdE5hbWUpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlVmlzaWJsZUxpbmtzKGFwcDogQXBwLCBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzKSB7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSBwbHVnaW4uc2V0dGluZ3M7XG4gICAgYXBwLndvcmtzcGFjZS5pdGVyYXRlUm9vdExlYXZlcygobGVhZikgPT4ge1xuICAgICAgICBpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ICYmIGxlYWYudmlldy5maWxlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlOiBURmlsZSA9IGxlYWYudmlldy5maWxlO1xuICAgICAgICAgICAgY29uc3QgY2FjaGVkRmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKVxuICAgICAgICAgICAgaWYgKGNhY2hlZEZpbGUubGlua3MpIHtcbiAgICAgICAgICAgICAgICBjYWNoZWRGaWxlLmxpbmtzLmZvckVhY2goKGxpbms6IExpbmtDYWNoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGUucGF0aC5yZXBsYWNlKC8oLiopLm1kLywgXCIkMVwiKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXN0ID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QobGluay5saW5rLCBmaWxlTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld19wcm9wcyA9IGZldGNoVGFyZ2V0QXR0cmlidXRlc1N5bmMoYXBwLCBzZXR0aW5ncywgZGVzdCwgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRlcm5hbExpbmtzID0gbGVhZi52aWV3LmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoYGEuaW50ZXJuYWwtbGlua1tocmVmPVwiJHtsaW5rLmxpbmt9XCJdYClcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVybmFsTGlua3MuZm9yRWFjaCgoaW50ZXJuYWxMaW5rOiBIVE1MRWxlbWVudCkgPT4gc2V0TGlua05ld1Byb3BzKGludGVybmFsTGluaywgbmV3X3Byb3BzKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxufSIsImltcG9ydCBGaWVsZCBmcm9tIFwic3JjL0ZpZWxkXCJcbmltcG9ydCB7Q1NTTGlua30gZnJvbSBcIi4uL2Nzc0J1aWxkZXIvY3NzTGlua1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3Mge1xuXHR0YXJnZXRBdHRyaWJ1dGVzOiBBcnJheTxzdHJpbmc+O1xuXHR0YXJnZXRUYWdzOiBib29sZWFuO1xuXHRwcmVzZXRGaWVsZHM6IEFycmF5PEZpZWxkPjtcblx0ZGlzcGxheUZpZWxkc0luQ29udGV4dE1lbnU6IGJvb2xlYW47XG5cdGdsb2JhbGx5SWdub3JlZEZpZWxkczogQXJyYXk8c3RyaW5nPjtcblx0Z2V0RnJvbUlubGluZUZpZWxkOiBib29sZWFuO1xuXHRhY3RpdmF0ZVNuaXBwZXQ6IGJvb2xlYW47XG5cdGNsYXNzRmlsZXNQYXRoOiBzdHJpbmc7XG5cdGVuYWJsZUVkaXRvcjogYm9vbGVhbjtcblx0ZW5hYmxlRmlsZUxpc3Q6IGJvb2xlYW47XG5cdGVuYWJsZUJhY2tsaW5rczogYm9vbGVhbjtcblx0ZW5hYmxlUXVpY2tTd2l0Y2hlcjogYm9vbGVhbjtcblx0ZW5hYmxlU3VnZ2VzdG9yOiBib29sZWFuO1xuXHRzZWxlY3RvcnM6IENTU0xpbmtbXTtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3MgPSB7XG5cdHRhcmdldEF0dHJpYnV0ZXM6IFtdLFxuXHR0YXJnZXRUYWdzOiB0cnVlLFxuXHRwcmVzZXRGaWVsZHM6IFtdLFxuXHRkaXNwbGF5RmllbGRzSW5Db250ZXh0TWVudTogdHJ1ZSxcblx0Z2xvYmFsbHlJZ25vcmVkRmllbGRzOiBbXSxcblx0Y2xhc3NGaWxlc1BhdGg6IFwiXCIsXG5cdGdldEZyb21JbmxpbmVGaWVsZDogdHJ1ZSxcblx0YWN0aXZhdGVTbmlwcGV0OiB0cnVlLFxuXHRlbmFibGVFZGl0b3I6IHRydWUsXG5cdGVuYWJsZUZpbGVMaXN0OiB0cnVlLFxuXHRlbmFibGVCYWNrbGlua3M6IHRydWUsXG5cdGVuYWJsZVF1aWNrU3dpdGNoZXI6IHRydWUsXG5cdGVuYWJsZVN1Z2dlc3RvcjogdHJ1ZSxcblx0c2VsZWN0b3JzOiBbXVxufSIsImltcG9ydCB7QXBwLCBURmlsZX0gZnJvbSBcIm9ic2lkaWFuXCJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcGxhY2VWYWx1ZXMoYXBwOiBBcHAsIGZpbGU6IFRGaWxlLCBhdHRyaWJ1dGU6IHN0cmluZywgaW5wdXQ6IHN0cmluZyk6IFByb21pc2UgPHZvaWQ+e1xuICAgIGFwcC52YXVsdC5yZWFkKGZpbGUpLnRoZW4oKHJlc3VsdDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGxldCBuZXdDb250ZW50OkFycmF5PHN0cmluZz4gPSBbXVxuICAgICAgICBsZXQgZm9yZUhlYWRUZXh0ID0gZmFsc2VcbiAgICAgICAgbGV0IGZyb250bWF0dGVyU3RhcnQgPSBmYWxzZVxuICAgICAgICBsZXQgZnJvbnRtYXR0ZXJFbmQgPSBmYWxzZVxuICAgICAgICBsZXQgaW5Gcm9udG1hdHRlciA9IGZhbHNlXG4gICAgICAgIHJlc3VsdC5zcGxpdCgnXFxuJykubWFwKGxpbmUgPT4ge1xuICAgICAgICAgICAgaWYobGluZSE9XCItLS1cIiAmJiAhZm9yZUhlYWRUZXh0ICYmICFmcm9udG1hdHRlclN0YXJ0KXtcbiAgICAgICAgICAgICAgICBmb3JlSGVhZFRleHQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihsaW5lID09IFwiLS0tXCIgJiYgIWZvcmVIZWFkVGV4dCl7XG4gICAgICAgICAgICAgICAgaWYoIWZyb250bWF0dGVyU3RhcnQpe1xuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlclN0YXJ0ID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBpbkZyb250bWF0dGVyID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZighZnJvbnRtYXR0ZXJFbmQpe1xuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlckVuZCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgaW5Gcm9udG1hdHRlciA9IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoaW5Gcm9udG1hdHRlcil7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGAke2F0dHJpYnV0ZX06YCwgJ3UnKVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4UmVzdWx0ID0gbGluZS5tYXRjaChyZWdleClcbiAgICAgICAgICAgICAgICBpZihyZWdleFJlc3VsdCAmJiByZWdleFJlc3VsdC5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRBcnJheSA9IGlucHV0ID8gaW5wdXQucmVwbGFjZSgvKFxcLFxccyspL2csICcsJykuc3BsaXQoJywnKSA6IFtcIlwiXVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IGlucHV0QXJyYXkubGVuZ3RoID09IDEgPyBpbnB1dEFycmF5WzBdIDogYFske2lucHV0QXJyYXkuam9pbignLCAnKX1dYFxuICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50LnB1c2goYCR7YXR0cmlidXRlfTogJHtuZXdWYWx1ZX1gKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChgJHtsaW5lfWApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYChbX1xcKn5cXGBdKikke2F0dHJpYnV0ZX0oW19cXCp+XFxgXSopKFxcXFxzKik6OmAsICd1JylcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbGluZS5tYXRjaChyZWdleClcbiAgICAgICAgICAgICAgICBpZihyICYmIHIubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0QXJyYXkgPSBpbnB1dCA/IGlucHV0LnJlcGxhY2UoLyhcXCxcXHMrKS9nLCAnLCcpLnNwbGl0KCcsJykgOiBbXCJcIl1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBpbnB1dEFycmF5Lmxlbmd0aCA9PSAxID8gaW5wdXRBcnJheVswXSA6IGAke2lucHV0QXJyYXkuam9pbignLCAnKX1gXG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChgJHtyWzFdfSR7YXR0cmlidXRlfSR7clsyXX0ke3JbM119OjogJHtuZXdWYWx1ZX1gKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChsaW5lKVxuICAgICAgICAgICAgICAgIH1cdFxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBhcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0NvbnRlbnQuam9pbignXFxuJykpXG4gICAgfSlcbn0iLCJpbXBvcnQge0FwcCwgTW9kYWwsIFRvZ2dsZUNvbXBvbmVudCwgVEZpbGUsIEJ1dHRvbkNvbXBvbmVudCwgRXh0cmFCdXR0b25Db21wb25lbnQsIHBhcnNlRnJvbnRNYXR0ZXJTdHJpbmdBcnJheX0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCBGaWVsZCBmcm9tIFwic3JjL0ZpZWxkXCJcbmltcG9ydCB7IHJlcGxhY2VWYWx1ZXMgfSBmcm9tIFwic3JjL29wdGlvbnMvcmVwbGFjZVZhbHVlc1wiXG5pbXBvcnQgRmllbGRTZXR0aW5nIGZyb20gXCJzcmMvc2V0dGluZ3MvRmllbGRTZXR0aW5nXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgdmFsdWVNdWx0aVNlbGVjdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIGFwcDogQXBwXG4gICAgZmlsZTogVEZpbGVcbiAgICBuYW1lOiBzdHJpbmdcbiAgICBzZXR0aW5nczogRmllbGRcbiAgICB2YWx1ZXM6IEFycmF5PHN0cmluZz5cbiAgICBsaW5lTnVtYmVyOiBudW1iZXJcbiAgICBpbkZyb250bWF0dGVyOiBib29sZWFuXG4gICAgdG9wOiBib29sZWFuXG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZmlsZTogVEZpbGUsIG5hbWU6IHN0cmluZywgaW5pdGlhbFZhbHVlczogc3RyaW5nLCBzZXR0aW5nczogRmllbGQsIGxpbmVOdW1iZXI6IG51bWJlciA9IC0xLCBpbkZyb250TWF0dGVyOiBib29sZWFuID0gZmFsc2UsIHRvcDogYm9vbGVhbiA9IGZhbHNlKXtcbiAgICAgICAgc3VwZXIoYXBwKVxuICAgICAgICB0aGlzLmFwcCA9IGFwcFxuICAgICAgICB0aGlzLmZpbGUgPSBmaWxlXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzXG4gICAgICAgIHRoaXMudmFsdWVzID0gaW5pdGlhbFZhbHVlcyA/IGluaXRpYWxWYWx1ZXMudG9TdHJpbmcoKS5yZXBsYWNlKC9eXFxbKC4qKVxcXSQvLFwiJDFcIikuc3BsaXQoXCIsXCIpLm1hcChpdGVtID0+IGl0ZW0udHJpbSgpKSA6IFtdXG4gICAgICAgIHRoaXMubGluZU51bWJlciA9IGxpbmVOdW1iZXJcbiAgICAgICAgdGhpcy5pbkZyb250bWF0dGVyID0gaW5Gcm9udE1hdHRlclxuICAgICAgICB0aGlzLnRvcCA9IHRvcFxuICAgIH0gICBcblxuICAgIG9uT3Blbigpe1xuICAgICAgICBjb25zdCB2YWx1ZUdyaWQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBcImZyb250bWF0dGVyLXZhbHVlcy1ncmlkXCJcbiAgICAgICAgfSlcbiAgICAgICAgRmllbGRTZXR0aW5nLmdldFZhbHVlc0xpc3RGcm9tTm90ZSh0aGlzLnNldHRpbmdzLnZhbHVlc0xpc3ROb3RlUGF0aCwgdGhpcy5hcHApLnRoZW4obGlzdE5vdGVWYWx1ZXMgPT4ge1xuICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZVZhbHVlc0dyaWQodmFsdWVHcmlkLCBsaXN0Tm90ZVZhbHVlcylcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBidWlsZFZhbHVlVG9nZ2xlcih2YWx1ZUdyaWQ6IEhUTUxEaXZFbGVtZW50LHByZXNldFZhbHVlOiBzdHJpbmcpe1xuICAgICAgICBjb25zdCB2YWx1ZVNlbGVjdG9yQ29udGFpbmVyID0gdmFsdWVHcmlkLmNyZWF0ZURpdih7XG4gICAgICAgICAgICBjbHM6IFwiZnJvbnRtYXR0ZXItdmFsdWUtc2VsZWN0b3ItY29udGFpbmVyXCJcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgdmFsdWVUb2dnbGVyQ29udGFpbmVyID0gdmFsdWVTZWxlY3RvckNvbnRhaW5lci5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBcImZyb250bWF0dGVyLXZhbHVlLXNlbGVjdG9yLXRvZ2dsZXJcIlxuICAgICAgICB9KVxuICAgICAgICBjb25zdCB2YWx1ZVRvZ2dsZXIgPSBuZXcgVG9nZ2xlQ29tcG9uZW50KHZhbHVlVG9nZ2xlckNvbnRhaW5lcilcbiAgICAgICAgdGhpcy52YWx1ZXMuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gcHJlc2V0VmFsdWUpe1xuICAgICAgICAgICAgICAgIHZhbHVlVG9nZ2xlci5zZXRWYWx1ZSh0cnVlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICB2YWx1ZVRvZ2dsZXIub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgaWYodmFsdWUgJiYgIXRoaXMudmFsdWVzLmluY2x1ZGVzKHByZXNldFZhbHVlKSl7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXMucHVzaChwcmVzZXRWYWx1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCF2YWx1ZSl7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXMucmVtb3ZlKHByZXNldFZhbHVlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBjb25zdCB2YWx1ZUxhYmVsID0gdmFsdWVTZWxlY3RvckNvbnRhaW5lci5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBcImZyb250bWF0dGVyLXZhbHVlLXNlbGVjdG9yLWxhYmVsXCJcbiAgICAgICAgfSlcbiAgICAgICAgdmFsdWVMYWJlbC5zZXRUZXh0KHByZXNldFZhbHVlKVxuICAgIH1cblxuICAgIHBvcHVsYXRlVmFsdWVzR3JpZCh2YWx1ZUdyaWQ6IEhUTUxEaXZFbGVtZW50LCBsaXN0Tm90ZVZhbHVlczogc3RyaW5nW10pe1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnNldHRpbmdzLnZhbHVlcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJlc2V0VmFsdWUgPSB0aGlzLnNldHRpbmdzLnZhbHVlc1trZXldXG4gICAgICAgICAgICB0aGlzLmJ1aWxkVmFsdWVUb2dnbGVyKHZhbHVlR3JpZCwgcHJlc2V0VmFsdWUpXG4gICAgICAgIH0pXG4gICAgICAgIGxpc3ROb3RlVmFsdWVzLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5idWlsZFZhbHVlVG9nZ2xlcih2YWx1ZUdyaWQsIHZhbHVlKVxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBmb290ZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBcImZyb250bWF0dGVyLXZhbHVlLWdyaWQtZm9vdGVyXCJcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQoZm9vdGVyKVxuICAgICAgICBzYXZlQnV0dG9uLnNldEljb24oXCJjaGVja21hcmtcIilcbiAgICAgICAgc2F2ZUJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIGlmKHRoaXMubGluZU51bWJlciA9PSAtMSl7XG4gICAgICAgICAgICAgICAgcmVwbGFjZVZhbHVlcyh0aGlzLmFwcCwgdGhpcy5maWxlLCB0aGlzLm5hbWUsIHRoaXMudmFsdWVzLmpvaW4oXCIsXCIpKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQucmVhZCh0aGlzLmZpbGUpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0NvbnRlbnQ6IHN0cmluZ1tdID0gW11cbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy50b3Ape1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGAke3RoaXMubmFtZX0ke3RoaXMuaW5Gcm9udG1hdHRlciA/IFwiOlwiIDogXCI6OlwifSAke3RoaXMudmFsdWVzLmpvaW4oXCIsXCIpfWApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3BsaXQoXCJcXG5cIikuZm9yRWFjaCgobGluZSwgX2xpbmVOdW1iZXIpID0+IG5ld0NvbnRlbnQucHVzaChsaW5lKSlcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zcGxpdChcIlxcblwiKS5mb3JFYWNoKChsaW5lLCBfbGluZU51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9saW5lTnVtYmVyID09IHRoaXMubGluZU51bWJlcil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChgJHt0aGlzLm5hbWV9JHt0aGlzLmluRnJvbnRtYXR0ZXIgPyBcIjpcIiA6IFwiOjpcIn0gJHt0aGlzLnZhbHVlcy5qb2luKFwiLFwiKX1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm1vZGlmeSh0aGlzLmZpbGUsIG5ld0NvbnRlbnQuam9pbignXFxuJykpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBuZXcgRXh0cmFCdXR0b25Db21wb25lbnQoZm9vdGVyKVxuICAgICAgICBjYW5jZWxCdXR0b24uc2V0SWNvbihcImNyb3NzXCIpXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5vbkNsaWNrKCgpID0+IHRoaXMuY2xvc2UoKSlcbiAgICB9XG59IiwiaW1wb3J0IHtBcHAsIE1vZGFsLCBUZXh0Q29tcG9uZW50LCBURmlsZX0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCB7IHJlcGxhY2VWYWx1ZXMgfSBmcm9tIFwic3JjL29wdGlvbnMvcmVwbGFjZVZhbHVlc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHZhbHVlVGV4dElucHV0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgYXBwOiBBcHBcbiAgICBmaWxlOiBURmlsZVxuICAgIG5hbWU6IHN0cmluZ1xuICAgIHZhbHVlOiBzdHJpbmdcbiAgICBsaW5lTnVtYmVyOiBudW1iZXJcbiAgICBpbkZyb250bWF0dGVyOiBib29sZWFuXG4gICAgdG9wOiBib29sZWFuXG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZmlsZTogVEZpbGUsIG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgbGluZU51bWJlcjogbnVtYmVyID0gLTEsIGluRnJvbnRNYXR0ZXI6IGJvb2xlYW4gPSBmYWxzZSwgdG9wOiBib29sZWFuID0gZmFsc2Upe1xuICAgICAgICBzdXBlcihhcHApXG4gICAgICAgIHRoaXMuYXBwID0gYXBwXG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGVcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZVxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWVcbiAgICAgICAgdGhpcy5saW5lTnVtYmVyID0gbGluZU51bWJlclxuICAgICAgICB0aGlzLmluRnJvbnRtYXR0ZXIgPSBpbkZyb250TWF0dGVyXG4gICAgICAgIHRoaXMudG9wID0gdG9wXG4gICAgfVxuXG4gICAgb25PcGVuKCl7XG4gICAgICAgIGNvbnN0IGlucHV0RGl2ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIGNsczogXCJmcm9udG1hdHRlci1tb2RhbC12YWx1ZVwiXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuYnVpbGRJbnB1dEVsKGlucHV0RGl2KVxuICAgIH1cblxuICAgIGJ1aWxkSW5wdXRFbChpbnB1dERpdjogSFRNTERpdkVsZW1lbnQpOiB2b2lke1xuICAgICAgICBjb25zdCBmb3JtID0gaW5wdXREaXYuY3JlYXRlRWwoXCJmb3JtXCIpXG4gICAgICAgIGZvcm0udHlwZSA9IFwic3VibWl0XCI7XG4gICAgICAgIGZvcm0ub25zdWJtaXQgPSAoZTogRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgaWYodGhpcy5saW5lTnVtYmVyID09IC0xKXtcbiAgICAgICAgICAgICAgICByZXBsYWNlVmFsdWVzKHRoaXMuYXBwLCB0aGlzLmZpbGUsIHRoaXMubmFtZSwgaW5wdXRFbC5nZXRWYWx1ZSgpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQucmVhZCh0aGlzLmZpbGUpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0NvbnRlbnQ6IHN0cmluZ1tdID0gW11cbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy50b3Ape1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGAke3RoaXMubmFtZX0ke3RoaXMuaW5Gcm9udG1hdHRlciA/IFwiOlwiIDogXCI6OlwifSAke2lucHV0RWwuZ2V0VmFsdWUoKX1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNwbGl0KFwiXFxuXCIpLmZvckVhY2goKGxpbmUsIF9saW5lTnVtYmVyKSA9PiBuZXdDb250ZW50LnB1c2gobGluZSkpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3BsaXQoXCJcXG5cIikuZm9yRWFjaCgobGluZSwgX2xpbmVOdW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50LnB1c2gobGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihfbGluZU51bWJlciA9PSB0aGlzLmxpbmVOdW1iZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50LnB1c2goYCR7dGhpcy5uYW1lfSR7dGhpcy5pbkZyb250bWF0dGVyID8gXCI6XCIgOiBcIjo6XCJ9ICR7aW5wdXRFbC5nZXRWYWx1ZSgpfWApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5tb2RpZnkodGhpcy5maWxlLCBuZXdDb250ZW50LmpvaW4oJ1xcbicpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5wdXRFbCA9IG5ldyBUZXh0Q29tcG9uZW50KGZvcm0pXG4gICAgICAgIGlucHV0RWwuaW5wdXRFbC5mb2N1cygpXG4gICAgICAgIGlucHV0RWwuc2V0VmFsdWUodGhpcy52YWx1ZSlcbiAgICAgICAgaW5wdXRFbC5pbnB1dEVsLmFkZENsYXNzKFwiZnJvbnRtYXR0ZXItcHJvbXB0LWlucHV0XCIpXG5cbiAgICB9XG59IiwiaW1wb3J0IHtBcHAsIE1vZGFsLCBUb2dnbGVDb21wb25lbnQsIFRGaWxlfSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IHsgcmVwbGFjZVZhbHVlcyB9IGZyb20gXCJzcmMvb3B0aW9ucy9yZXBsYWNlVmFsdWVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgdmFsdWVUb2dnbGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBhcHA6IEFwcFxuICAgIGZpbGU6IFRGaWxlXG4gICAgbmFtZTogc3RyaW5nXG4gICAgdmFsdWU6IGJvb2xlYW5cblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgbmFtZTogc3RyaW5nLCB2YWx1ZTogYm9vbGVhbil7XG4gICAgICAgIHN1cGVyKGFwcClcbiAgICAgICAgdGhpcy5hcHAgPSBhcHBcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZVxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZVxuICAgIH1cblxuICAgIG9uT3Blbigpe1xuICAgICAgICBjb25zdCBpbnB1dERpdiA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7XG4gICAgICAgICAgICBjbHM6IFwiZnJvbnRtYXR0ZXItdG9nZ2xlclwiXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuYnVpbGRJbnB1dEVsKGlucHV0RGl2KVxuICAgIH1cblxuICAgIGJ1aWxkSW5wdXRFbChpbnB1dERpdjogSFRNTERpdkVsZW1lbnQpOiB2b2lke1xuICAgICAgICBjb25zdCBpbnB1dEVsID0gbmV3IFRvZ2dsZUNvbXBvbmVudChpbnB1dERpdilcbiAgICAgICAgaW5wdXRFbC5zZXRWYWx1ZSh0aGlzLnZhbHVlKVxuICAgICAgICBpbnB1dEVsLm9uQ2hhbmdlKHYgPT4ge1xuICAgICAgICAgICAgcmVwbGFjZVZhbHVlcyh0aGlzLmFwcCwgdGhpcy5maWxlLCB0aGlzLm5hbWUsIHYgPyBcInRydWVcIiA6IFwiZmFsc2VcIilcbiAgICAgICAgfSlcbiAgICB9XG59IiwiaW1wb3J0IHtBcHAsIE1vZGFsLCBEcm9wZG93bkNvbXBvbmVudCwgVEZpbGUsIEJ1dHRvbkNvbXBvbmVudH0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCBGaWVsZCBmcm9tIFwic3JjL0ZpZWxkXCJcbmltcG9ydCB7IHJlcGxhY2VWYWx1ZXMgfSBmcm9tIFwic3JjL29wdGlvbnMvcmVwbGFjZVZhbHVlc1wiXG5pbXBvcnQgRmllbGRTZXR0aW5nIGZyb20gXCJzcmMvc2V0dGluZ3MvRmllbGRTZXR0aW5nXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgdmFsdWVUb2dnbGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBhcHA6IEFwcFxuICAgIGZpbGU6IFRGaWxlXG4gICAgbmFtZTogc3RyaW5nXG4gICAgdmFsdWU6IHN0cmluZ1xuICAgIHNldHRpbmdzOiBGaWVsZFxuICAgIG5ld1ZhbHVlOiBzdHJpbmdcbiAgICBsaW5lTnVtYmVyOiBudW1iZXJcbiAgICBpbkZyb250bWF0dGVyOiBib29sZWFuXG4gICAgdG9wOiBib29sZWFuXG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZmlsZTogVEZpbGUsIG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgc2V0dGluZ3M6IEZpZWxkLCBsaW5lTnVtYmVyOiBudW1iZXIgPSAtMSwgaW5Gcm9udE1hdHRlcjogYm9vbGVhbiA9IGZhbHNlLCB0b3A6IGJvb2xlYW4gPSBmYWxzZSl7XG4gICAgICAgIHN1cGVyKGFwcClcbiAgICAgICAgdGhpcy5hcHAgPSBhcHBcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZVxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZVxuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3NcbiAgICAgICAgdGhpcy5uZXdWYWx1ZSA9IG51bGxcbiAgICAgICAgdGhpcy5saW5lTnVtYmVyID0gbGluZU51bWJlclxuICAgICAgICB0aGlzLmluRnJvbnRtYXR0ZXIgPSBpbkZyb250TWF0dGVyXG4gICAgICAgIHRoaXMudG9wID0gdG9wXG4gICAgfVxuXG4gICAgb25PcGVuKCl7XG4gICAgICAgIGNvbnN0IGlucHV0RGl2ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIGNsczogXCJmcm9udG1hdHRlci1tb2RhbC12YWx1ZVwiXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuYnVpbGRJbnB1dEVsKGlucHV0RGl2KVxuICAgIH1cblxuICAgIGJ1aWxkSW5wdXRFbChpbnB1dERpdjogSFRNTERpdkVsZW1lbnQpOiB2b2lke1xuICAgICAgICBjb25zdCBzZWxlY3RFbCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChpbnB1dERpdilcbiAgICAgICAgc2VsZWN0RWwuc2VsZWN0RWwuYWRkQ2xhc3MoXCJmcm9udG1hdHRlci1zZWxlY3RcIilcbiAgICAgICAgY29uc3QgdmFsdWVzID0gdGhpcy5zZXR0aW5ncy52YWx1ZXNcbiAgICAgICAgc2VsZWN0RWwuYWRkT3B0aW9uKFwiXCIsXCItLUVtcHR5LS1cIilcbiAgICAgICAgT2JqZWN0LmtleXModmFsdWVzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBzZWxlY3RFbC5hZGRPcHRpb24odmFsdWVzW2tleV0sIHZhbHVlc1trZXldKVxuICAgICAgICB9KTtcbiAgICAgICAgaWYoT2JqZWN0LnZhbHVlcyh2YWx1ZXMpLmluY2x1ZGVzKHRoaXMudmFsdWUpKXtcbiAgICAgICAgICAgIHNlbGVjdEVsLnNldFZhbHVlKHRoaXMudmFsdWUpXG4gICAgICAgIH1cbiAgICAgICAgRmllbGRTZXR0aW5nLmdldFZhbHVlc0xpc3RGcm9tTm90ZSh0aGlzLnNldHRpbmdzLnZhbHVlc0xpc3ROb3RlUGF0aCwgdGhpcy5hcHApLnRoZW4obGlzdE5vdGVWYWx1ZXMgPT4ge1xuICAgICAgICAgICAgbGlzdE5vdGVWYWx1ZXMuZm9yRWFjaCh2YWx1ZSA9PiBzZWxlY3RFbC5hZGRPcHRpb24odmFsdWUsIHZhbHVlKSlcbiAgICAgICAgICAgIGlmKGxpc3ROb3RlVmFsdWVzLmluY2x1ZGVzKHRoaXMudmFsdWUpKXtcbiAgICAgICAgICAgICAgICBzZWxlY3RFbC5zZXRWYWx1ZSh0aGlzLnZhbHVlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZWN0RWwub25DaGFuZ2UodmFsdWUgPT4gdGhpcy5uZXdWYWx1ZSA9IHZhbHVlICE9IFwiLS1FbXB0eS0tXCIgPyB2YWx1ZSA6IFwiXCIpXG4gICAgICAgICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGlucHV0RGl2KVxuICAgICAgICAgICAgc3VibWl0QnV0dG9uLnNldFRvb2x0aXAoXCJTYXZlXCIpXG4gICAgICAgICAgICAuc2V0SWNvbihcImNoZWNrbWFya1wiKVxuICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMubGluZU51bWJlciA9PSAtMSl7XG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMubmV3VmFsdWUgfHwgdGhpcy5uZXdWYWx1ZSA9PSBcIlwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VWYWx1ZXModGhpcy5hcHAsIHRoaXMuZmlsZSwgdGhpcy5uYW1lLCB0aGlzLm5ld1ZhbHVlKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQucmVhZCh0aGlzLmZpbGUpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdDb250ZW50OiBzdHJpbmdbXSA9IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnRvcCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGAke3RoaXMubmFtZX0ke3RoaXMuaW5Gcm9udG1hdHRlciA/IFwiOlwiIDogXCI6OlwifSAke3NlbGVjdEVsLmdldFZhbHVlKCl9YClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3BsaXQoXCJcXG5cIikuZm9yRWFjaCgobGluZSwgX2xpbmVOdW1iZXIpID0+IG5ld0NvbnRlbnQucHVzaChsaW5lKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNwbGl0KFwiXFxuXCIpLmZvckVhY2goKGxpbmUsIF9saW5lTnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihfbGluZU51bWJlciA9PSB0aGlzLmxpbmVOdW1iZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGAke3RoaXMubmFtZX0ke3RoaXMuaW5Gcm9udG1hdHRlciA/IFwiOlwiIDogXCI6OlwifSAke3NlbGVjdEVsLmdldFZhbHVlKCl9YClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5tb2RpZnkodGhpcy5maWxlLCBuZXdDb250ZW50LmpvaW4oJ1xcbicpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgfVxufSIsImltcG9ydCB7TW9kYWwsIFRleHRDb21wb25lbnQsIEJ1dHRvbkNvbXBvbmVudCwgRXh0cmFCdXR0b25Db21wb25lbnQsVEZpbGV9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3MgZnJvbSBcIm1haW5cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBhZGROZXdGaWVsZE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXG4gICAgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rc1xuICAgIGxpbmVOdW1iZXI6IG51bWJlclxuICAgIGZpbGU6IFRGaWxlXG4gICAgaW5Gcm9udG1hdHRlcjogYm9vbGVhblxuICAgIHRvcDogYm9vbGVhblxuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgbGluZU51bWJlcjogbnVtYmVyLCBmaWxlOiBURmlsZSwgaW5Gcm9udG1hdHRlcjogYm9vbGVhbiwgdG9wOiBib29sZWFuKXtcbiAgICAgICAgc3VwZXIocGx1Z2luLmFwcClcbiAgICAgICAgdGhpcy5saW5lTnVtYmVyID0gbGluZU51bWJlclxuICAgICAgICB0aGlzLmluRnJvbnRtYXR0ZXIgPSBpbkZyb250bWF0dGVyXG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGVcbiAgICAgICAgdGhpcy50b3AgPSB0b3BcbiAgICB9XG5cbiAgICBvbk9wZW4oKXtcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoXCJJbnNlcnQgbmV3IGZpZWxkXCIpXG4gICAgICAgIGNvbnN0IGFkZE5ld0ZpZWxkQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KClcbiAgICAgICAgY29uc3QgbmFtZUlucHV0Q29udGFpbmVyID0gYWRkTmV3RmllbGRDb250YWluZXIuY3JlYXRlRGl2KClcbiAgICAgICAgbmFtZUlucHV0Q29udGFpbmVyLnNldFRleHQoXCJGaWVsZCBOYW1lOiBcIilcbiAgICAgICAgY29uc3QgbmFtZUlucHV0RWwgPSBuZXcgVGV4dENvbXBvbmVudChuYW1lSW5wdXRDb250YWluZXIpXG4gICAgICAgIG5hbWVJbnB1dEVsLnNldFBsYWNlaG9sZGVyKFwiRmllbGQgbmFtZVwiKVxuICAgICAgICBjb25zdCB2YWx1ZUlucHV0Q29udGFpbmVyID0gYWRkTmV3RmllbGRDb250YWluZXIuY3JlYXRlRGl2KClcbiAgICAgICAgdmFsdWVJbnB1dENvbnRhaW5lci5zZXRUZXh0KFwiRmllbGQgdmFsdWU6IFwiKVxuICAgICAgICBjb25zdCB2YWx1ZUlucHV0RWwgPSBuZXcgVGV4dENvbXBvbmVudCh2YWx1ZUlucHV0Q29udGFpbmVyKVxuICAgICAgICB2YWx1ZUlucHV0RWwuc2V0UGxhY2Vob2xkZXIoXCJGaWVsZCB2YWx1ZVwiKVxuICAgICAgICBjb25zdCBmb290ZXJCdXR0b25zID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIGNsczogJ2Zyb250bWF0dGVyLXRleHRhcmVhLWJ1dHRvbnMnXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGZvb3RlckJ1dHRvbnMpXG4gICAgICAgIHNhdmVCdXR0b24uc2V0SWNvbihcImNoZWNrbWFya1wiKVxuICAgICAgICBzYXZlQnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQucmVhZCh0aGlzLmZpbGUpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Q29udGVudDogc3RyaW5nW10gPSBbXVxuICAgICAgICAgICAgICAgIGlmKHRoaXMudG9wKXtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGAke25hbWVJbnB1dEVsLmdldFZhbHVlKCl9JHt0aGlzLmluRnJvbnRtYXR0ZXIgPyBcIjpcIiA6IFwiOjpcIn0gJHt2YWx1ZUlucHV0RWwuZ2V0VmFsdWUoKX1gKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3BsaXQoXCJcXG5cIikuZm9yRWFjaCgobGluZSwgX2xpbmVOdW1iZXIpID0+IG5ld0NvbnRlbnQucHVzaChsaW5lKSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3BsaXQoXCJcXG5cIikuZm9yRWFjaCgobGluZSwgX2xpbmVOdW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoX2xpbmVOdW1iZXIgPT0gdGhpcy5saW5lTnVtYmVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50LnB1c2goYCR7bmFtZUlucHV0RWwuZ2V0VmFsdWUoKX0ke3RoaXMuaW5Gcm9udG1hdHRlciA/IFwiOlwiIDogXCI6OlwifSAke3ZhbHVlSW5wdXRFbC5nZXRWYWx1ZSgpfWApXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm1vZGlmeSh0aGlzLmZpbGUsIG5ld0NvbnRlbnQuam9pbignXFxuJykpXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBuZXcgRXh0cmFCdXR0b25Db21wb25lbnQoZm9vdGVyQnV0dG9ucylcbiAgICAgICAgY2FuY2VsQnV0dG9uLnNldEljb24oXCJjcm9zc1wiKVxuICAgICAgICBjYW5jZWxCdXR0b24ub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgfSlcblxuXG4gICAgfVxufSIsImltcG9ydCB7QXBwLCBNb2RhbCwgRHJvcGRvd25Db21wb25lbnQsIFRGaWxlfSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IFN1cGVyY2hhcmdlZExpbmtzIGZyb20gXCJtYWluXCJcbmltcG9ydCBhZGROZXdGaWVsZE1vZGFsIGZyb20gXCIuL2FkZE5ld0ZpZWxkTW9kYWxcIlxuaW1wb3J0IHZhbHVlVGV4dElucHV0TW9kYWwgZnJvbSBcIi4vdmFsdWVUZXh0SW5wdXRNb2RhbFwiXG5pbXBvcnQgdmFsdWVTZWxlY3RNb2RhbCBmcm9tIFwiLi92YWx1ZVNlbGVjdE1vZGFsXCJcbmltcG9ydCB2YWx1ZU11bHRpU2VsZWN0TW9kYWwgZnJvbSBcIi4vdmFsdWVNdWx0aVNlbGVjdE1vZGFsXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZmllbGRTZWxlY3RNb2RhbCBleHRlbmRzIE1vZGFsIHtcblxuICAgIGxpbmVOdW1iZXI6IG51bWJlclxuICAgIGxpbmU6IHN0cmluZ1xuICAgIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3NcbiAgICBmaWxlOiBURmlsZVxuICAgIGluRnJvbnRtYXR0ZXI6IGJvb2xlYW5cbiAgICB0b3A6IGJvb2xlYW5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzLCBmaWxlOlRGaWxlLCBsaW5lTnVtYmVyOiBudW1iZXIsIGxpbmU6IHN0cmluZywgaW5Gcm9udG1hdHRlcjogYm9vbGVhbiwgdG9wOiBib29sZWFuKXtcbiAgICAgICAgc3VwZXIocGx1Z2luLmFwcClcbiAgICAgICAgdGhpcy5saW5lID0gbGluZVxuICAgICAgICB0aGlzLmxpbmVOdW1iZXIgPSBsaW5lTnVtYmVyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGVcbiAgICAgICAgdGhpcy5pbkZyb250bWF0dGVyID0gaW5Gcm9udG1hdHRlclxuICAgICAgICB0aGlzLnRvcCA9IHRvcFxuICAgIH1cblxuICAgIG9uT3Blbigpe1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChgSW5zZXJ0IGZpZWxkIGFmdGVyID4gJHt0aGlzLmxpbmUuc3Vic3RyaW5nKDAsIDIwKX0ke3RoaXMubGluZS5sZW5ndGg+MjAgPyBcIi4uLlwiIDogXCJcIn1gKVxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKVxuICAgICAgICBjb25zdCBzZXR0aW5nc0Ryb3Bkb3duQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdigpXG4gICAgICAgIGNvbnN0IHNldHRpbmdzU2VsZWN0b3IgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoc2V0dGluZ3NEcm9wZG93bkNvbnRhaW5lcilcbiAgICAgICAgc2V0dGluZ3NTZWxlY3Rvci5hZGRPcHRpb24oXCItLS1cIiwgXCJDaG9vc2UgRmllbGRcIilcbiAgICAgICAgc2V0dGluZ3NTZWxlY3Rvci5hZGRPcHRpb24oXCIrK05ld1wiLCBcIk5ld1wiKVxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVzZXRGaWVsZHMuZm9yRWFjaChzZXR0aW5nID0+IHtcbiAgICAgICAgICAgIHNldHRpbmdzU2VsZWN0b3IuYWRkT3B0aW9uKHNldHRpbmcubmFtZSwgc2V0dGluZy5uYW1lKVxuICAgICAgICB9KVxuICAgICAgICBzZXR0aW5nc1NlbGVjdG9yLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIGlmKHZhbHVlID09IFwiKytOZXdcIil7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3RmllbGRNb2RhbCA9IG5ldyBhZGROZXdGaWVsZE1vZGFsKHRoaXMucGx1Z2luLCB0aGlzLmxpbmVOdW1iZXIsIHRoaXMuZmlsZSwgdGhpcy5pbkZyb250bWF0dGVyLCB0aGlzLnRvcClcbiAgICAgICAgICAgICAgICBuZXdGaWVsZE1vZGFsLm9wZW4oKVxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByZXNldEZpZWxkcy5maWx0ZXIoX2ZpZWxkID0+IF9maWVsZC5uYW1lID09IHZhbHVlKVswXVxuICAgICAgICAgICAgICAgIGlmKGZpZWxkLnZhbHVlc0xpc3ROb3RlUGF0aCB8fCAoZmllbGQudmFsdWVzICYmIE9iamVjdC5rZXlzKGZpZWxkLnZhbHVlcykubGVuZ3RoID4gMCkpe1xuICAgICAgICAgICAgICAgICAgICBpZihmaWVsZC5pc011bHRpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkTW9kYWwgPSBuZXcgdmFsdWVNdWx0aVNlbGVjdE1vZGFsKHRoaXMuYXBwLCB0aGlzLmZpbGUsIGZpZWxkLm5hbWUsIFwiXCIsIGZpZWxkLCB0aGlzLmxpbmVOdW1iZXIsIHRoaXMuaW5Gcm9udG1hdHRlciwgdGhpcy50b3ApXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZE1vZGFsLnRpdGxlRWwuc2V0VGV4dChgU2VsZWN0IHZhbHVlcyBmb3IgJHt2YWx1ZX1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRNb2RhbC5vcGVuKClcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkTW9kYWwgPSBuZXcgdmFsdWVTZWxlY3RNb2RhbCh0aGlzLmFwcCwgdGhpcy5maWxlLCBmaWVsZC5uYW1lLCBcIlwiLCBmaWVsZCwgdGhpcy5saW5lTnVtYmVyLCB0aGlzLmluRnJvbnRtYXR0ZXIsIHRoaXMudG9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRNb2RhbC50aXRsZUVsLnNldFRleHQoYFNlbGVjdCB2YWx1ZSBmb3IgJHt2YWx1ZX1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRNb2RhbC5vcGVuKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkTW9kYWwgPSBuZXcgdmFsdWVUZXh0SW5wdXRNb2RhbCh0aGlzLmFwcCwgdGhpcy5maWxlLCB2YWx1ZSwgXCJcIiwgdGhpcy5saW5lTnVtYmVyLCB0aGlzLmluRnJvbnRtYXR0ZXIsIHRoaXMudG9wKVxuICAgICAgICAgICAgICAgICAgICBmaWVsZE1vZGFsLnRpdGxlRWwuc2V0VGV4dChgRW50ZXIgdmFsdWUgZm9yICR7dmFsdWV9YClcbiAgICAgICAgICAgICAgICAgICAgZmllbGRNb2RhbC5vcGVuKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufSIsImltcG9ydCB7QXBwLCBNb2RhbCwgRHJvcGRvd25Db21wb25lbnQsIFRGaWxlfSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IGZpZWxkU2VsZWN0TW9kYWwgZnJvbSBcIi4vZmllbGRTZWxlY3RNb2RhbFwiXG5pbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3MgZnJvbSBcIm1haW5cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBjaG9vc2VTZWN0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cbiAgICBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzXG4gICAgZmlsZTogVEZpbGVcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIGZpbGU6VEZpbGUpe1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKVxuICAgICAgICB0aGlzLmZpbGUgPSBmaWxlXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXG4gICAgfVxuXG4gICAgb25PcGVuKCl7XG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KFwiQWRkIGEgZmllbGQgaW4gdGhpcyBub3RlIGFmdGVyOlwiKVxuICAgICAgICBjb25zdCBpbnB1dERpdiA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7XG4gICAgICAgICAgICBjbHM6IFwiZnJvbnRtYXR0ZXItbW9kYWwtdmFsdWVcIlxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBzZWxlY3RFbCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChpbnB1dERpdilcbiAgICAgICAgc2VsZWN0RWwuc2VsZWN0RWwuYWRkQ2xhc3MoXCJmcm9udG1hdHRlci1zZWxlY3RcIilcbiAgICAgICAgc2VsZWN0RWwuYWRkT3B0aW9uKFwiXCIsXCJTZWxlY3QgbGluZVwiKVxuICAgICAgICBzZWxlY3RFbC5hZGRPcHRpb24oXCJ0b3BfMFwiLFwidG9wXCIpXG4gICAgICAgIHRoaXMuYXBwLnZhdWx0LnJlYWQodGhpcy5maWxlKS50aGVuKHJlc3VsdCA9PiB7XG5cdFx0XHRsZXQgZm9yZUhlYWRUZXh0ID0gZmFsc2Vcblx0XHRcdGxldCBmcm9udG1hdHRlclN0YXJ0ID0gZmFsc2Vcblx0XHRcdGxldCBmcm9udG1hdHRlckVuZCA9IGZhbHNlXG5cdFx0XHRsZXQgaW5Gcm9udG1hdHRlciA9IGZhbHNlXG4gICAgICAgICAgICByZXN1bHQuc3BsaXQoXCJcXG5cIikuZm9yRWFjaCgobGluZSwgbGluZU51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmKGxpbmUhPVwiLS0tXCIgJiYgIWZvcmVIZWFkVGV4dCAmJiAhZnJvbnRtYXR0ZXJTdGFydCl7XG5cdFx0XHRcdFx0Zm9yZUhlYWRUZXh0ID0gdHJ1ZVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGxpbmUgPT0gXCItLS1cIiAmJiAhZm9yZUhlYWRUZXh0KXtcblx0XHRcdFx0XHRpZighZnJvbnRtYXR0ZXJTdGFydCl7XG5cdFx0XHRcdFx0XHRmcm9udG1hdHRlclN0YXJ0ID0gdHJ1ZVxuXHRcdFx0XHRcdFx0aW5Gcm9udG1hdHRlciA9IHRydWVcblx0XHRcdFx0XHR9IGVsc2UgaWYoIWZyb250bWF0dGVyRW5kKXtcblx0XHRcdFx0XHRcdGZyb250bWF0dGVyRW5kID0gdHJ1ZVxuXHRcdFx0XHRcdFx0aW5Gcm9udG1hdHRlciA9IGZhbHNlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGluRnJvbnRtYXR0ZXIpe1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RFbC5hZGRPcHRpb24oYGZyb250bWF0dGVyXyR7bGluZU51bWJlcn1gLCBgJHtsaW5lLnN1YnN0cmluZygwLCAzMCl9JHtsaW5lLmxlbmd0aCA+IDMwID8gXCIuLi5cIiA6IFwiXCJ9YClcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0RWwuYWRkT3B0aW9uKGBib2R5XyR7bGluZU51bWJlcn1gLCBgJHtsaW5lLnN1YnN0cmluZygwLCAzMCl9JHtsaW5lLmxlbmd0aCA+IDMwID8gXCIuLi5cIiA6IFwiXCJ9YClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgc2VsZWN0RWwub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlQXJyYXkgPSBzZWxlY3RFbC5nZXRWYWx1ZSgpLm1hdGNoKC8oXFx3KylfKFxcZCspLylcbiAgICAgICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHZhbHVlQXJyYXlbMV1cbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lTnVtYmVyID0gTnVtYmVyKHZhbHVlQXJyYXlbMl0pXG4gICAgICAgICAgICAgICAgY29uc3QgaW5Gcm9udG1hdHRlciA9IHBvc2l0aW9uID09IFwiZnJvbnRtYXR0ZXJcIiA/IHRydWUgOiBmYWxzZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRvcCA9IHBvc2l0aW9uID09IFwidG9wXCIgPyB0cnVlIDogZmFsc2VcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBmaWVsZFNlbGVjdE1vZGFsKHRoaXMucGx1Z2luLCB0aGlzLmZpbGUsIGxpbmVOdW1iZXIsIHJlc3VsdC5zcGxpdCgnXFxuJylbbGluZU51bWJlcl0sIGluRnJvbnRtYXR0ZXIsIHRvcClcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxufSIsImltcG9ydCBGaWVsZCBmcm9tIFwic3JjL0ZpZWxkXCJcblxuaW50ZXJmYWNlIEZpbGVDbGFzc0F0dHJpYnV0ZXtcbiAgICBuYW1lOiBzdHJpbmdcbiAgICB0eXBlOiBzdHJpbmdcbiAgICBvcHRpb25zOiBzdHJpbmdbXVxuICAgIGlzTXVsdGk6IGJvb2xlYW5cbiAgICBpc0N5Y2xlOiBib29sZWFuXG59XG5cbmNvbnN0IHR5cGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgIFwiaW5wdXRcIjogXCJBY2NlcHRzIGFueSB2YWx1ZVwiLFxuICAgIFwic2VsZWN0XCI6IFwiQWNjZXB0cyBhIHNpbmdsZSB2YWx1ZSBmcm9tIGEgbGlzdFwiLFxuICAgIFwibXVsdGlcIjogXCJBY2NlcHRzIG11bHRpcGxlIHZhbHVlcyBmcm9tIGEgbGlzdFwiLFxuICAgIFwiY3ljbGVcIjogXCJDeWNsZSB0aHJvdWdoIHZhbHVlcyBmcm9tIGEgbGlzdFwiXG59XG5cbmNsYXNzIEZpbGVDbGFzc0F0dHJpYnV0ZXtcblxuICAgIGNvbnN0cnVjdG9yKHJhdzogc3RyaW5nKXtcbiAgICAgICAgY29uc3QgY29tcGxldGVSZWdleCA9IG5ldyBSZWdFeHAoL15bX1xcKn5gXSooWzAtOVxcd1xccHtMZXR0ZXJ9XFxwe0Vtb2ppX1ByZXNlbnRhdGlvbn1dWy0wLTlcXHdcXHB7TGV0dGVyfVxccHtFbW9qaV9QcmVzZW50YXRpb259XFxzXSopW19cXCp+YF0qXFxzKjo6KC4rKT8vdSlcbiAgICAgICAgY29uc3QgbmFtZVJlZ2V4ID0gbmV3IFJlZ0V4cCgvXltfXFwqfmBdKihbMC05XFx3XFxwe0xldHRlcn1cXHB7RW1vamlfUHJlc2VudGF0aW9ufV1bLTAtOVxcd1xccHtMZXR0ZXJ9XFxwe0Vtb2ppX1ByZXNlbnRhdGlvbn1cXHNdKilbX1xcKn5gXSpcXHMqJC91KVxuXHRcdGNvbnN0IGRldGFpbGVkRmllbGRSYXcgPSByYXcubWF0Y2goY29tcGxldGVSZWdleClcbiAgICAgICAgY29uc3Qgc2ltcGxlRmllbGRSYXcgPSByYXcubWF0Y2gobmFtZVJlZ2V4KVxuICAgICAgICBpZihkZXRhaWxlZEZpZWxkUmF3KXtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGRldGFpbGVkRmllbGRSYXdbMV0udHJpbSgpXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IEpTT04ucGFyc2UoYCR7ZGV0YWlsZWRGaWVsZFJhd1syXS50cmltKCl9YClcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IHNldHRpbmdzWyd0eXBlJ11cbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm11bHRpXCI6ICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc011bHRpID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImN5Y2xlXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDeWNsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gc2V0dGluZ3NbJ29wdGlvbnMnXVxuICAgICAgICB9IGVsc2UgaWYoc2ltcGxlRmllbGRSYXcpe1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gc2ltcGxlRmllbGRSYXdbMF0udHJpbSgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIkltcHJvcGVyIHZhbHVlXCIpXG4gICAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0RmllbGQoKXtcbiAgICAgICAgbGV0IHZhbHVlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9XG4gICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChvcHRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICB2YWx1ZXNbaW5kZXhdID0gb3B0aW9uXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBuZXcgRmllbGQodGhpcy5uYW1lLCB2YWx1ZXMsIHRoaXMubmFtZSwgdGhpcy5pc011bHRpLCB0aGlzLmlzQ3ljbGUpXG4gICAgfVxufVxuXG5leHBvcnQge0ZpbGVDbGFzc0F0dHJpYnV0ZSwgdHlwZXN9IiwiaW1wb3J0IHtGaWxlQ2xhc3NBdHRyaWJ1dGV9IGZyb20gXCIuL2ZpbGVDbGFzc0F0dHJpYnV0ZVwiXG5pbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3MgZnJvbSBcIm1haW5cIlxuaW1wb3J0IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ1RhYiBmcm9tIFwic3JjL3NldHRpbmdzL1N1cGVyY2hhcmdlZExpbmtzU2V0dGluZ1RhYlwiXG5pbXBvcnQgeyByZW5kZXJSZXN1bHRzIH0gZnJvbSBcIm9ic2lkaWFuXCJcblxuaW50ZXJmYWNlIEZpbGVDbGFzc3tcbiAgICBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzXG4gICAgbmFtZTogc3RyaW5nXG4gICAgYXR0cmlidXRlczogQXJyYXk8RmlsZUNsYXNzQXR0cmlidXRlPlxuICAgIG9iamVjdHM6IEZpbGVDbGFzc01hbmFnZXJcbiAgICBlcnJvcnM6IHN0cmluZ1tdXG59XG5cbmNsYXNzIEZpbGVDbGFzc01hbmFnZXJ7XG4gICAgaW5zdGFuY2U6IEZpbGVDbGFzc1xuXG4gICAgY29uc3RydWN0b3IoaW5zdGFuY2U6IEZpbGVDbGFzcyl7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZVxuICAgIH1cblxuICAgIGFsbCgpe1xuICAgICAgICBjb25zdCBmaWxlc1dpdGhGaWxlQ2xhc3NOYW1lID0gdGhpcy5pbnN0YW5jZS5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuaW5zdGFuY2UucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlLmZyb250bWF0dGVyIFxuICAgICAgICAgICAgICAgICYmIE9iamVjdC5rZXlzKGNhY2hlLmZyb250bWF0dGVyKS5pbmNsdWRlcygnZmlsZUNsYXNzJylcbiAgICAgICAgICAgICAgICAmJiBjYWNoZS5mcm9udG1hdHRlclsnZmlsZUNsYXNzJ10gPT0gdGhpcy5pbnN0YW5jZS5uYW1lXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmaWxlc1dpdGhGaWxlQ2xhc3NOYW1lXG4gICAgfVxuXG4gICAgZ2V0KG5hbWU6IHN0cmluZyl7XG4gICAgICAgIGNvbnN0IGZpbGVzV2l0aE5hbWUgPSB0aGlzLmFsbCgpLmZpbHRlcihmaWxlID0+IGZpbGUuYmFzZW5hbWUgPT0gbmFtZSlcbiAgICAgICAgaWYoZmlsZXNXaXRoTmFtZS5sZW5ndGggPiAxKXtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiTW9yZSB0aGFuIG9uZSB2YWx1ZSBmb3VuZFwiKVxuICAgICAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlsZXNXaXRoTmFtZS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXCJObyBmaWxlIHZhbHVlIGZvdW5kXCIpXG4gICAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWxlc1dpdGhOYW1lWzBdXG5cbiAgICB9XG5cbiAgICBnZXRQYXRoKHBhdGg6IHN0cmluZyl7XG4gICAgICAgIGNvbnN0IGZpbGVzV2l0aE5hbWUgPSB0aGlzLmFsbCgpLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aCA9PSBwYXRoKVxuICAgICAgICBpZihmaWxlc1dpdGhOYW1lLmxlbmd0aCA+IDEpe1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXCJNb3JlIHRoYW4gb25lIHZhbHVlIGZvdW5kXCIpXG4gICAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICB9XG4gICAgICAgIGlmIChmaWxlc1dpdGhOYW1lLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIk5vIGZpbGUgdmFsdWUgZm91bmRcIilcbiAgICAgICAgICAgIHRocm93IGVycm9yXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbGVzV2l0aE5hbWVbMF1cblxuICAgIH1cbn1cblxuY2xhc3MgRmlsZUNsYXNze1xuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIG5hbWU6IHN0cmluZyl7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWUsXG4gICAgICAgIHRoaXMub2JqZWN0cyA9IG5ldyBGaWxlQ2xhc3NNYW5hZ2VyKHRoaXMpXG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IFtdXG4gICAgfVxuXG4gICAgZ2V0Q2xhc3NGaWxlKCl7XG4gICAgICAgIGNvbnN0IGZpbGVzQ2xhc3NQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xhc3NGaWxlc1BhdGhcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aCA9PSBgJHtmaWxlc0NsYXNzUGF0aH0ke3RoaXMubmFtZX0ubWRgKVxuICAgICAgICBpZihmaWxlcy5sZW5ndGggPT0gMCl7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIm5vIHN1Y2ggZmlsZUNsYXNzIGluIGZpbGVDbGFzcyBmb2xkZXJcIilcbiAgICAgICAgICAgIHRocm93IGVycm9yXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmlsZXNbMF1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEF0dHJpYnV0ZXMoKTogUHJvbWlzZTx2b2lkPntcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuZ2V0Q2xhc3NGaWxlKClcbiAgICAgICAgICAgICAgICBsZXQgYXR0cmlidXRlczogQXJyYXk8RmlsZUNsYXNzQXR0cmlidXRlPiA9IFtdXG4gICAgICAgICAgICAgICAgbGV0IGVycm9yczogc3RyaW5nW10gPSBbXVxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNwbGl0KCdcXG4nKS5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBuZXcgRmlsZUNsYXNzQXR0cmlidXRlKGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcy5wdXNoKGF0dHJpYnV0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnNcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHVwZGF0ZUF0dHJpYnV0ZShuZXdUeXBlOiBzdHJpbmcsIG5ld09wdGlvbnM6IHN0cmluZ1tdLCBuZXdOYW1lOiBzdHJpbmcsIGF0dHI/OiBGaWxlQ2xhc3NBdHRyaWJ1dGUpOiBQcm9taXNlPHZvaWQ+e1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5nZXRDbGFzc0ZpbGUoKVxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmKGF0dHIpe1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3Q29udGVudDogc3RyaW5nW10gPSBbXVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3BsaXQoJ1xcbicpLmZvckVhY2gobGluZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihsaW5lLnN0YXJ0c1dpdGgoYXR0ci5uYW1lKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobmV3VHlwZSA9PSBcImlucHV0XCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50LnB1c2gobmV3TmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2V0dGluZ3M6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1tcInR5cGVcIl0gPSBuZXdUeXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzW1wib3B0aW9uc1wiXSA9IG5ld09wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGAke25ld05hbWV9OjogJHtKU09OLnN0cmluZ2lmeShzZXR0aW5ncyl9YClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0NvbnRlbnQuam9pbignXFxuJykpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNldHRpbmdzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge31cbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NbXCJ0eXBlXCJdID0gbmV3VHlwZVxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1tcIm9wdGlvbnNcIl0gPSBuZXdPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAoYFxcbiR7bmV3TmFtZX06OiAke0pTT04uc3RyaW5naWZ5KHNldHRpbmdzKX1gKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIHJlc3VsdClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHJlbW92ZUF0dHJpYnV0ZShhdHRyOiBGaWxlQ2xhc3NBdHRyaWJ1dGUpOiBQcm9taXNlPHZvaWQ+e1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuZ2V0Q2xhc3NGaWxlKClcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Q29udGVudDogc3RyaW5nW10gPSBbXVxuICAgICAgICAgICAgICAgIHJlc3VsdC5zcGxpdCgnXFxuJykuZm9yRWFjaChsaW5lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYoIWxpbmUuc3RhcnRzV2l0aChhdHRyLm5hbWUpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChsaW5lKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0NvbnRlbnQuam9pbignXFxuJykpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUZpbGVDbGFzcyhwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzLCBuYW1lOiBzdHJpbmcpOiBQcm9taXNlPEZpbGVDbGFzcz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZpbGVDbGFzcyA9IG5ldyBGaWxlQ2xhc3MocGx1Z2luLCBuYW1lKTtcbiAgICAgICAgZmlsZUNsYXNzLmdldEF0dHJpYnV0ZXMoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoZmlsZUNsYXNzKVxuICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcilcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5leHBvcnQge2NyZWF0ZUZpbGVDbGFzcywgRmlsZUNsYXNzfSIsImltcG9ydCB7QXBwLCBEcm9wZG93bkNvbXBvbmVudCwgTW9kYWwsIFRleHRDb21wb25lbnQsIEJ1dHRvbkNvbXBvbmVudCwgRXh0cmFCdXR0b25Db21wb25lbnQsIFRleHRBcmVhQ29tcG9uZW50fSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IHtGaWxlQ2xhc3NBdHRyaWJ1dGUsIHR5cGVzfSBmcm9tIFwic3JjL2ZpbGVDbGFzcy9maWxlQ2xhc3NBdHRyaWJ1dGVcIlxuaW1wb3J0IHtGaWxlQ2xhc3N9IGZyb20gXCJzcmMvZmlsZUNsYXNzL2ZpbGVDbGFzc1wiXG5pbXBvcnQgeyBzdHJpbmdpZnkgfSBmcm9tIFwicXVlcnlzdHJpbmdcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWxlQ2xhc3NBdHRyaWJ1dGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblxuICAgIGF0dHI6IEZpbGVDbGFzc0F0dHJpYnV0ZVxuICAgIGZpbGVDbGFzczogRmlsZUNsYXNzXG4gICAgdHlwZTogc3RyaW5nID0gXCJpbnB1dFwiXG4gICAgb3B0aW9uczogc3RyaW5nW10gPSBbXVxuICAgIG5hbWU6IHN0cmluZyA9IFwiXCJcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlQ2xhc3M6IEZpbGVDbGFzcywgYXR0cj86IEZpbGVDbGFzc0F0dHJpYnV0ZSl7XG4gICAgICAgIHN1cGVyKGFwcClcbiAgICAgICAgdGhpcy5hdHRyID0gYXR0clxuICAgICAgICB0aGlzLmZpbGVDbGFzcyA9IGZpbGVDbGFzc1xuICAgICAgICBpZih0aGlzLmF0dHIpe1xuICAgICAgICAgICAgdGhpcy50eXBlID0gdGhpcy5hdHRyLnR5cGUgfHwgXCJpbnB1dFwiXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLmF0dHIub3B0aW9uc1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5hdHRyLm5hbWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uT3Blbigpe1xuICAgICAgICAvL3RpdGxlXG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KHRoaXMuYXR0ciA/IGBNYW5hZ2UgJHt0aGlzLmF0dHIubmFtZX1gIDogYENyZWF0ZSBhIG5ldyBhdHRyaWJ1dGUgZm9yICR7dGhpcy5maWxlQ2xhc3MubmFtZX1gKVxuICAgICAgICBcbiAgICAgICAgLy9uYW1lIGlucHV0XG4gICAgICAgIGNvbnN0IG5hbWVJbnB1dENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpXG4gICAgICAgIG5hbWVJbnB1dENvbnRhaW5lci5zZXRUZXh0KFwibmFtZVwiKVxuICAgICAgICBjb25zdCBuYW1lSW5wdXQgPSBuZXcgVGV4dENvbXBvbmVudChuYW1lSW5wdXRDb250YWluZXIpXG4gICAgICAgIHRoaXMuYXR0ciA/IG5hbWVJbnB1dC5zZXRWYWx1ZSh0aGlzLmF0dHIubmFtZSkgOiBuYW1lSW5wdXQuc2V0UGxhY2Vob2xkZXIoXCJUeXBlIGEgbmFtZSBmb3IgdGhpcyBhdHRyaWJ1dGVcIilcblxuICAgICAgICAvL2hlYWRlciBmb3Igc2VsZWN0XG4gICAgICAgIGNvbnN0IHR5cGVTZWxlY3RIZWFkZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKVxuICAgICAgICBjb25zdCBhdHRyTGluZSA9IHR5cGVTZWxlY3RIZWFkZXIuY3JlYXRlRWwoXCJkaXZcIilcbiAgICAgICAgY29uc3QgYXR0ck5hbWUgPSBhdHRyTGluZS5jcmVhdGVFbChcInN0cm9uZ1wiKVxuICAgICAgICBhdHRyTmFtZS5zZXRUZXh0KGA8JHt0aGlzLm5hbWV9PmApXG4gICAgICAgIGF0dHJMaW5lLmFwcGVuZChcIiBmaWVsZHMgaW4gZmlsZXMgd2l0aDpcIilcbiAgICAgICAgU3RyaW5nKGAtLS1cXG5maWxlQ2xhc3M6ICR7dGhpcy5maWxlQ2xhc3MubmFtZX1cXG4uLi5cXG4tLS1gKS5zcGxpdCgnXFxuJykuZm9yRWFjaChsaW5lID0+IHtcbiAgICAgICAgICAgIHR5cGVTZWxlY3RIZWFkZXIuY3JlYXRlRWwoXCJkaXZcIiwgXCJ5YW1sLWZyb250bWF0dGVyLXJlZFwiKS5zZXRUZXh0KGxpbmUpXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gdHlwZSBzZWxlY3RcbiAgICAgICAgY29uc3QgdHlwZVNlbGVjdENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7Y2xzOiAnZnJvbnRtYXR0ZXItdmFsdWUtc2VsZWN0b3ItY29udGFpbmVyJ30pXG4gICAgICAgIGNvbnN0IHR5cGVTZWxlY3RMYWJlbCA9IHR5cGVTZWxlY3RDb250YWluZXIuY3JlYXRlRGl2KHtjbHM6ICdmcm9udG1hdHRlci12YWx1ZS1zZWxlY3Rvci1pbmxpbmUtbGFiZWwnfSlcbiAgICAgICAgdHlwZVNlbGVjdExhYmVsLnNldFRleHQoXCJ3aWxsOiBcIilcbiAgICAgICAgY29uc3QgdHlwZVNlbGVjdERyb3BEb3duID0gdHlwZVNlbGVjdENvbnRhaW5lci5jcmVhdGVEaXYoe2NsczogJ2Zyb250bWF0dGVyLXZhbHVlLXNlbGVjdG9yLXRvZ2dsZXInfSlcbiAgICAgICAgY29uc3QgdHlwZVNlbGVjdCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudCh0eXBlU2VsZWN0RHJvcERvd24pXG4gICAgICAgIE9iamVjdC5rZXlzKHR5cGVzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICB0eXBlU2VsZWN0LmFkZE9wdGlvbihrZXksIHR5cGVzW2tleV0pXG4gICAgICAgIH0pXG4gICAgICAgIGlmKHRoaXMuYXR0cil7XG4gICAgICAgICAgICB0eXBlU2VsZWN0LnNldFZhbHVlKHRoaXMudHlwZSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG9wdGlvbnMgaW5wdXRcbiAgICAgICAgY29uc3Qgb3B0aW9uc0lucHV0Q29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHtjbHM6ICdmcm9udG1hdHRlci12YWx1ZS1zZWxlY3Rvci1jb250YWluZXInfSlcbiAgICAgICAgY29uc3Qgb3B0aW9uc0lucHV0TGFiZWwgPSBvcHRpb25zSW5wdXRDb250YWluZXIuY3JlYXRlRGl2KHtjbHM6ICdmcm9udG1hdHRlci12YWx1ZS1zZWxlY3Rvci1pbmxpbmUtbGFiZWwtdG9wJ30pXG4gICAgICAgIG9wdGlvbnNJbnB1dExhYmVsLnNldFRleHQoXCJWYWx1ZXNcIilcbiAgICAgICAgY29uc3Qgb3B0aW9uc0lucHV0ID0gbmV3IFRleHRBcmVhQ29tcG9uZW50KG9wdGlvbnNJbnB1dENvbnRhaW5lcilcbiAgICAgICAgb3B0aW9uc0lucHV0LmlucHV0RWwucm93cyA9IDNcbiAgICAgICAgb3B0aW9uc0lucHV0LmlucHV0RWwuY29scyA9IDI2XG4gICAgICAgIHRoaXMuYXR0ciA/IG9wdGlvbnNJbnB1dC5zZXRWYWx1ZSh0aGlzLnR5cGUgPT0gXCJpbnB1dFwiID8gXCJcIiA6IHRoaXMub3B0aW9ucy5qb2luKFwiLCBcIikpIDogb3B0aW9uc0lucHV0LnNldFBsYWNlaG9sZGVyKFwiaW5zZXJ0IHZhbHVlcywgY29tbWEgc2VwYXJhdGVkXCIpXG4gICAgICAgICF0aGlzLmF0dHIgfHwgdGhpcy50eXBlID09IFwiaW5wdXRcIiA/IG9wdGlvbnNJbnB1dENvbnRhaW5lci5oaWRlKCkgOiBvcHRpb25zSW5wdXRDb250YWluZXIuc2hvdygpXG5cbiAgICAgICAgLy8gZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgdHlwZVNlbGVjdC5vbkNoYW5nZSh0eXBlID0+IHtcbiAgICAgICAgICAgIHR5cGUgPT0gXCJpbnB1dFwiID8gb3B0aW9uc0lucHV0Q29udGFpbmVyLmhpZGUoKSA6IG9wdGlvbnNJbnB1dENvbnRhaW5lci5zaG93KClcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGVcbiAgICAgICAgfSlcbiAgICAgICAgb3B0aW9uc0lucHV0Lm9uQ2hhbmdlKHZhbHVlID0+IHRoaXMub3B0aW9ucyA9IHZhbHVlLnNwbGl0KFwiLFwiKS5tYXAoaXRlbSA9PiBpdGVtLnRyaW0oKSkpXG4gICAgICAgIG5hbWVJbnB1dC5vbkNoYW5nZSh2YWx1ZSA9PiB7dGhpcy5uYW1lID0gdmFsdWU7IGF0dHJOYW1lLnNldFRleHQoYDwke3ZhbHVlfT5gKX0pXG5cbiAgICAgICAgLy8gZm9vdGVyIGJ1dHRvbnNcbiAgICAgICAgY29uc3QgZm9vdGVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHtjbHM6IFwiZnJvbnRtYXR0ZXItdmFsdWUtZ3JpZC1mb290ZXJcIn0pXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGZvb3RlcilcbiAgICAgICAgc2F2ZUJ1dHRvbi5zZXRJY29uKFwiY2hlY2ttYXJrXCIpXG4gICAgICAgIHNhdmVCdXR0b24ub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZpbGVDbGFzcy51cGRhdGVBdHRyaWJ1dGUodGhpcy50eXBlLCB0aGlzLm9wdGlvbnMsIHRoaXMubmFtZSwgdGhpcy5hdHRyKVxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIH0pXG4gICAgICAgIGlmKHRoaXMuYXR0cil7XG4gICAgICAgICAgICBjb25zdCByZW1vdmVCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGZvb3RlcilcbiAgICAgICAgICAgIHJlbW92ZUJ1dHRvbi5zZXRJY29uKFwidHJhc2hcIilcbiAgICAgICAgICAgIHJlbW92ZUJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApXG4gICAgICAgICAgICAgICAgY29uZmlybU1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIlBsZWFzZSBjb25maXJtXCIpXG4gICAgICAgICAgICAgICAgY29uZmlybU1vZGFsLmNvbnRlbnRFbC5jcmVhdGVEaXYoKS5zZXRUZXh0KGBEbyB5b3UgcmVhbGx5IHdhbnQgdG8gcmVtb3ZlICR7dGhpcy5hdHRyLm5hbWV9IGF0dHJpYnV0ZSBmcm9tICR7dGhpcy5maWxlQ2xhc3MubmFtZX0/YClcbiAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtRm9vdGVyID0gY29uZmlybU1vZGFsLmNvbnRlbnRFbC5jcmVhdGVEaXYoe2NsczogXCJmcm9udG1hdHRlci12YWx1ZS1ncmlkLWZvb3RlclwifSlcbiAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChjb25maXJtRm9vdGVyKVxuICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b24uc2V0SWNvbihcImNoZWNrbWFya1wiKVxuICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b24ub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZUNsYXNzLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmF0dHIpXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1Nb2RhbC5jbG9zZSgpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzbWlzc0J1dHRvbiA9IG5ldyBFeHRyYUJ1dHRvbkNvbXBvbmVudChjb25maXJtRm9vdGVyKVxuICAgICAgICAgICAgICAgIGRpc21pc3NCdXR0b24uc2V0SWNvbihcImNyb3NzXCIpXG4gICAgICAgICAgICAgICAgZGlzbWlzc0J1dHRvbi5vbkNsaWNrKCgpID0+IHRoaXMuY2xvc2UoKSlcbiAgICAgICAgICAgICAgICBjb25maXJtTW9kYWwub3BlbigpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IG5ldyBFeHRyYUJ1dHRvbkNvbXBvbmVudChmb290ZXIpXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5zZXRJY29uKFwiY3Jvc3NcIilcbiAgICAgICAgY2FuY2VsQnV0dG9uLm9uQ2xpY2soKCkgPT4gdGhpcy5jbG9zZSgpKVxuICAgIH1cbn0iLCJpbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3MgZnJvbSBcIm1haW5cIlxuaW1wb3J0IHtEcm9wZG93bkNvbXBvbmVudCwgTW9kYWwsIEFwcCwgVEZpbGV9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQge2NyZWF0ZUZpbGVDbGFzc30gZnJvbSBcInNyYy9maWxlQ2xhc3MvZmlsZUNsYXNzXCJcbmltcG9ydCBGaWxlQ2xhc3NBdHRyaWJ1dGVNb2RhbCBmcm9tIFwic3JjL2ZpbGVDbGFzcy9GaWxlQ2xhc3NBdHRyaWJ1dGVNb2RhbFwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbGVDbGFzc0F0dHJpYnV0ZVNlbGVjdE1vZGFsIGV4dGVuZHMgTW9kYWx7XG5cbiAgICBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzXG4gICAgZmlsZTogVEZpbGVcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIGZpbGU6IFRGaWxlKXtcbiAgICAgICAgc3VwZXIocGx1Z2luLmFwcClcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZVxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxuICAgIH1cblxuICAgIG9uT3Blbigpe1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChgU2VsZWN0IHRoZSBmaWVsZCB0byB1cGRhdGVgKVxuICAgICAgICBjcmVhdGVGaWxlQ2xhc3ModGhpcy5wbHVnaW4sIHRoaXMuZmlsZS5iYXNlbmFtZSkudGhlbihmaWxlQ2xhc3MgPT4ge1xuICAgICAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoYFNlbGVjdCB0aGUgZmllbGQgdG8gdXBkYXRlIGluICR7ZmlsZUNsYXNzLm5hbWV9YClcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpXG4gICAgICAgICAgICBjb25zdCBzZWxlY3QgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoc2VsZWN0Q29udGFpbmVyKVxuICAgICAgICAgICAgc2VsZWN0LmFkZE9wdGlvbihcInNlbGVjdCBhbiBhdHRyaWJ1dGVcIiwgXCItLXNlbGVjdCBhbiBhdHRyaWJ1dGUtLVwiKVxuICAgICAgICAgICAgZmlsZUNsYXNzLmF0dHJpYnV0ZXMuZm9yRWFjaChhdHRyID0+IHtcbiAgICAgICAgICAgICAgICBzZWxlY3QuYWRkT3B0aW9uKGF0dHIubmFtZSwgYXR0ci5uYW1lKVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgc2VsZWN0LmFkZE9wdGlvbihcIisrbmV3QXR0cisrXCIsIFwiKytBZGQgYSBuZXcgYXR0cmlidXRlKytcIilcbiAgICAgICAgICAgIHNlbGVjdC5vbkNoYW5nZSgoYXR0ck5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZihhdHRyTmFtZSA9PSBcIisrbmV3QXR0clwiKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgRmlsZUNsYXNzQXR0cmlidXRlTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBmaWxlQ2xhc3MpXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBGaWxlQ2xhc3NBdHRyaWJ1dGVNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIGZpbGVDbGFzcywgZmlsZUNsYXNzLmF0dHJpYnV0ZXMuZmlsdGVyKGF0dHIgPT4gYXR0ci5uYW1lID09IGF0dHJOYW1lKVswXSlcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwub3BlbigpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxufSIsImltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwibWFpblwiXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBNZW51IH0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCB2YWx1ZU11bHRpU2VsZWN0TW9kYWwgZnJvbSBcInNyYy9vcHRpb25Nb2RhbHMvdmFsdWVNdWx0aVNlbGVjdE1vZGFsXCJcbmltcG9ydCB2YWx1ZVRleHRJbnB1dE1vZGFsIGZyb20gXCJzcmMvb3B0aW9uTW9kYWxzL3ZhbHVlVGV4dElucHV0TW9kYWxcIlxuaW1wb3J0IHZhbHVlVG9nZ2xlTW9kYWwgZnJvbSBcInNyYy9vcHRpb25Nb2RhbHMvdmFsdWVUb2dnbGVNb2RhbFwiXG5pbXBvcnQgdmFsdWVTZWxlY3RNb2RhbCBmcm9tIFwic3JjL29wdGlvbk1vZGFscy92YWx1ZVNlbGVjdE1vZGFsXCJcbmltcG9ydCBGaWVsZCBmcm9tIFwic3JjL0ZpZWxkXCJcbmltcG9ydCBjaG9vc2VTZWN0aW9uTW9kYWwgZnJvbSBcIi4uL29wdGlvbk1vZGFscy9jaG9vc2VTZWN0aW9uTW9kYWxcIlxuaW1wb3J0IFNlbGVjdE1vZGFsIGZyb20gXCJzcmMvb3B0aW9uTW9kYWxzL1NlbGVjdE1vZGFsXCJcbmltcG9ydCB7Y3JlYXRlRmlsZUNsYXNzLCBGaWxlQ2xhc3N9IGZyb20gXCJzcmMvZmlsZUNsYXNzL2ZpbGVDbGFzc1wiXG5pbXBvcnQgeyByZXBsYWNlVmFsdWVzIH0gZnJvbSBcIi4vcmVwbGFjZVZhbHVlc1wiXG5pbXBvcnQgRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwgZnJvbSBcInNyYy9maWxlQ2xhc3MvRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWxcIlxuXG5mdW5jdGlvbiBpc01lbnUoY2F0ZWdvcnk6IE1lbnUgfCBTZWxlY3RNb2RhbCk6IGNhdGVnb3J5IGlzIE1lbnUge1xuICAgIHJldHVybiAoY2F0ZWdvcnkgYXMgTWVudSkuYWRkSXRlbSAhPT0gdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIGlzU2VsZWN0KGNhdGVnb3J5OiBNZW51IHwgU2VsZWN0TW9kYWwpOiBjYXRlZ29yeSBpcyBTZWxlY3RNb2RhbCB7XG4gICAgcmV0dXJuIChjYXRlZ29yeSBhcyBTZWxlY3RNb2RhbCkubW9kYWxzICE9PSB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3B0aW9uc0xpc3R7XG4gICAgYXBwOiBBcHBcbiAgICBmaWxlOiBURmlsZVxuICAgIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3NcbiAgICBwYXRoOiBzdHJpbmdcbiAgICBjYXRlZ29yeTogTWVudSB8IFNlbGVjdE1vZGFsXG5cdGZpbGVDbGFzczogRmlsZUNsYXNzXG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzLCBmaWxlOiBURmlsZSwgY2F0ZWdvcnk6IE1lbnUgfCBTZWxlY3RNb2RhbCl7XG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGVcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5XG4gICAgfVxuXG5cdGNyZWF0ZUV4dHJhT3B0aW9uTGlzdCgpe1xuXHRcdGNvbnN0IGNhY2hlID0gdGhpcy5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Q2FjaGUodGhpcy5maWxlLnBhdGgpXG5cdFx0aWYoY2FjaGUuZnJvbnRtYXR0ZXIpe1xuXHRcdFx0Y29uc3TCoHtwb3NpdGlvbiwgLi4uYXR0cmlidXRlc30gPSBjYWNoZS5mcm9udG1hdHRlclxuXHRcdFx0T2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChrZXkgPT4ge1xuXHRcdFx0XHRpZih0aGlzLnBsdWdpbi5zZXR0aW5ncy5nbG9iYWxseUlnbm9yZWRGaWVsZHMuaW5jbHVkZXMoa2V5KSl7XG5cdFx0XHRcdFx0ZGVsZXRlIGF0dHJpYnV0ZXNba2V5XVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0aWYoaXNNZW51KHRoaXMuY2F0ZWdvcnkpKXt0aGlzLmNhdGVnb3J5LmFkZFNlcGFyYXRvcigpfVxuXHRcdFx0bGV0IGZpbGVDbGFzc0ZvckZpZWxkcyA9IGZhbHNlXG5cdFx0XHRsZXQgZmlsZUNsYXNzRmllbGRzOiBzdHJpbmdbXSA9IFtdXG5cdFx0XHRpZihPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5pbmNsdWRlcygnZmlsZUNsYXNzJykpe1xuXHRcdFx0XHRjb25zdCBmaWxlQ2xhc3MgPSBhdHRyaWJ1dGVzWydmaWxlQ2xhc3MnXVxuXHRcdFx0XHRjcmVhdGVGaWxlQ2xhc3ModGhpcy5wbHVnaW4sIGZpbGVDbGFzcykudGhlbihmaWxlQ2xhc3MgPT4ge1xuXHRcdFx0XHRcdHRoaXMuZmlsZUNsYXNzID0gZmlsZUNsYXNzXG5cdFx0XHRcdFx0ZmlsZUNsYXNzRmllbGRzID0gZmlsZUNsYXNzLmF0dHJpYnV0ZXMubWFwKGF0dHIgPT4gYXR0ci5uYW1lKVxuXHRcdFx0XHRcdGZpbGVDbGFzc0ZvckZpZWxkcyA9IHRydWVcblx0XHRcdFx0XHRPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGtleSA9PiB7XG5cdFx0XHRcdFx0XHRpZighZmlsZUNsYXNzRmllbGRzLmluY2x1ZGVzKGtleSkgJiYga2V5ICE9ICdmaWxlQ2xhc3MnKXtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIGF0dHJpYnV0ZXNba2V5XVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0Y29uc3QgZmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwgPSBuZXcgRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwodGhpcy5wbHVnaW4sIHRoaXMuZmlsZUNsYXNzLmdldENsYXNzRmlsZSgpKVxuXHRcdFx0XHRcdGlmKGlzTWVudSh0aGlzLmNhdGVnb3J5KSl7XG5cdFx0XHRcdFx0XHR0aGlzLmNhdGVnb3J5LmFkZFNlcGFyYXRvcigpXG5cdFx0XHRcdFx0XHR0aGlzLmNhdGVnb3J5LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0XHRcdFx0aXRlbS5zZXRJY29uKFwiZ2VhclwiKVxuXHRcdFx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKGBNYW5hZ2UgPCR7dGhpcy5maWxlQ2xhc3MubmFtZX0+IGZpZWxkc2ApXG5cdFx0XHRcdFx0XHRcdGl0ZW0ub25DbGljaygoZXZ0KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0ZmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwub3BlbigpXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0dGhpcy5jYXRlZ29yeS5hZGRPcHRpb24oXCJtYW5hZ2VfZmlsZUNsYXNzX2F0dHJpYnV0ZXNcIiwgXCJNYW5hZ2UgZmlsZUNsYXNzIGF0dHJpYnV0ZXNcIilcblx0XHRcdFx0XHRcdHRoaXMuY2F0ZWdvcnkubW9kYWxzW1wiYWRkX2ZpZWxkX2F0X3NlY3Rpb25cIl0gPSAoKSA9PiBmaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbC5vcGVuKClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0dGhpcy5jcmVhdGVFeHRyYU9wdGlvbnNMaXN0Rm9yRnJvbnRtYXR0ZXIoYXR0cmlidXRlcywpLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5jcmVhdGVFeHRyYU9wdGlvbnNMaXN0Rm9ySW5saW5lRmllbGRzKHRoaXMuZmlsZSwgZmlsZUNsYXNzRm9yRmllbGRzLCBmaWxlQ2xhc3NGaWVsZHMpLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZihpc01lbnUodGhpcy5jYXRlZ29yeSkpe3RoaXMuY2F0ZWdvcnkuYWRkU2VwYXJhdG9yKCl9XG5cdFx0XHRcdFx0XHRcdHRoaXMuYWRkU2VjdGlvblNlbGVjdE1vZGFsT3B0aW9uKHRoaXMucGx1Z2luKVxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9KS5jYXRjaCgoZXJyb3IpID0+IHtcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZUV4dHJhT3B0aW9uc0xpc3RGb3JGcm9udG1hdHRlcihhdHRyaWJ1dGVzKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY3JlYXRlRXh0cmFPcHRpb25zTGlzdEZvcklubGluZUZpZWxkcyh0aGlzLmZpbGUpLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZihpc01lbnUodGhpcy5jYXRlZ29yeSkpe3RoaXMuY2F0ZWdvcnkuYWRkU2VwYXJhdG9yKCl9XG5cdFx0XHRcdFx0XHRcdHRoaXMuYWRkU2VjdGlvblNlbGVjdE1vZGFsT3B0aW9uKHRoaXMucGx1Z2luKVxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9KVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5jcmVhdGVFeHRyYU9wdGlvbnNMaXN0Rm9yRnJvbnRtYXR0ZXIoYXR0cmlidXRlcykudGhlbigoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5jcmVhdGVFeHRyYU9wdGlvbnNMaXN0Rm9ySW5saW5lRmllbGRzKHRoaXMuZmlsZSkudGhlbigoKSA9PiB7XG5cdFx0XHRcdFx0XHRpZihpc01lbnUodGhpcy5jYXRlZ29yeSkpe3RoaXMuY2F0ZWdvcnkuYWRkU2VwYXJhdG9yKCl9XG5cdFx0XHRcdFx0XHR0aGlzLmFkZFNlY3Rpb25TZWxlY3RNb2RhbE9wdGlvbih0aGlzLnBsdWdpbilcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmNyZWF0ZUV4dHJhT3B0aW9uc0xpc3RGb3JJbmxpbmVGaWVsZHModGhpcy5maWxlKS50aGVuKCgpID0+IHtcblx0XHRcdFx0aWYoaXNNZW51KHRoaXMuY2F0ZWdvcnkpKXt0aGlzLmNhdGVnb3J5LmFkZFNlcGFyYXRvcigpfVxuXHRcdFx0XHR0aGlzLmFkZFNlY3Rpb25TZWxlY3RNb2RhbE9wdGlvbih0aGlzLnBsdWdpbilcblx0XHRcdH0pXG5cdFx0fVxuXHRcdFxuXHR9XG5cblx0YXN5bmMgY3JlYXRlRXh0cmFPcHRpb25zTGlzdEZvcklubGluZUZpZWxkcyhmaWxlOlRGaWxlLCBmaWxlQ2xhc3NGb3JGaWVsZHM6IGJvb2xlYW4gPSBmYWxzZSwgZmlsZUNsYXNzRmllbGRzOiBzdHJpbmdbXSA9IFtdKTpQcm9taXNlPHZvaWQ+e1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRsZXQgYXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9XG5cdFx0XHRjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoL1tfXFwqfmBdKihbMC05XFx3XFxwe0xldHRlcn1cXHB7RW1vamlfUHJlc2VudGF0aW9ufV1bLTAtOVxcd1xccHtMZXR0ZXJ9XFxwe0Vtb2ppX1ByZXNlbnRhdGlvbn1cXHNdKilbX1xcKn5gXSpcXHMqOjooLispPy91KVxuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSkudGhlbigocmVzdWx0OiBzdHJpbmcpID0+IHtcblx0XHRcdFx0cmVzdWx0LnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgcmVnZXhSZXN1bHQgPSBsaW5lLm1hdGNoKHJlZ2V4KVxuXHRcdFx0XHRcdGlmKHJlZ2V4UmVzdWx0IFxuXHRcdFx0XHRcdFx0JiYgcmVnZXhSZXN1bHQubGVuZ3RoID4gMCBcblx0XHRcdFx0XHRcdCYmICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5nbG9iYWxseUlnbm9yZWRGaWVsZHMuaW5jbHVkZXMocmVnZXhSZXN1bHRbMV0udHJpbSgpKSl7XG5cdFx0XHRcdFx0XHRpZihmaWxlQ2xhc3NGb3JGaWVsZHMpe1xuXHRcdFx0XHRcdFx0XHRpZihmaWxlQ2xhc3NGaWVsZHMuaW5jbHVkZXMocmVnZXhSZXN1bHRbMV0udHJpbSgpKSl7XG5cdFx0XHRcdFx0XHRcdFx0YXR0cmlidXRlc1tyZWdleFJlc3VsdFsxXS50cmltKCldID0gcmVnZXhSZXN1bHQubGVuZ3RoID4gMSAmJiByZWdleFJlc3VsdFsyXSA/IHJlZ2V4UmVzdWx0WzJdLnRyaW0oKSA6IFwiXCJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0XHRcdGF0dHJpYnV0ZXNbcmVnZXhSZXN1bHRbMV0udHJpbSgpXSA9IHJlZ2V4UmVzdWx0Lmxlbmd0aCA+IDEgJiYgcmVnZXhSZXN1bHRbMl0gPyByZWdleFJlc3VsdFsyXS50cmltKCkgOiBcIlwiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0XHRpZihPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5sZW5ndGggPiAwKXtcblx0XHRcdFx0XHRpZihpc01lbnUodGhpcy5jYXRlZ29yeSkpe3RoaXMuY2F0ZWdvcnkuYWRkU2VwYXJhdG9yKCl9XG5cdFx0XHRcdFx0dGhpcy5idWlsZEV4dHJhT3B0aW9uc0xpc3QoYXR0cmlidXRlcylcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXNvbHZlKClcblx0XHRcdH0pXG5cdFx0fSlcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZUV4dHJhT3B0aW9uc0xpc3RGb3JGcm9udG1hdHRlcihhdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KXtcblx0XHR0aGlzLmJ1aWxkRXh0cmFPcHRpb25zTGlzdChhdHRyaWJ1dGVzLClcblx0fVxuXG5cdGJ1aWxkRXh0cmFPcHRpb25zTGlzdChhdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KSB7XG5cdFx0T2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaCgoa2V5OiBzdHJpbmcpID0+IHtcblx0XHRcdGNvbnN0IHZhbHVlID0gYXR0cmlidXRlc1trZXldXG5cdFx0XHRjb25zdCBwcm9wZXJ0eVNldHRpbmdzID0gdGhpcy5nZXRQcm9wZXJ0eVNldHRpbmdzKGtleSlcblx0XHRcdGlmKHByb3BlcnR5U2V0dGluZ3MgJiYgcHJvcGVydHlTZXR0aW5ncy52YWx1ZXMpe1xuXHRcdFx0XHRpZihwcm9wZXJ0eVNldHRpbmdzLmlzQ3ljbGUpe1xuXHRcdFx0XHRcdHRoaXMuYWRkQ3ljbGVNZW51T3B0aW9uKGtleSwgdmFsdWUsIHByb3BlcnR5U2V0dGluZ3MpXG5cdFx0XHRcdH0gZWxzZSBpZihwcm9wZXJ0eVNldHRpbmdzLmlzTXVsdGkpe1xuXHRcdFx0XHRcdHRoaXMuYWRkTXVsdGlNZW51T3B0aW9uKGtleSwgdmFsdWUsIHByb3BlcnR5U2V0dGluZ3MpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5hZGRTZWxlY3RNZW51T3B0aW9uKGtleSwgdmFsdWUsIHByb3BlcnR5U2V0dGluZ3MpXG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZihpc0Jvb2xlYW4odmFsdWUpIHx8IC90cnVlL2kudGVzdCh2YWx1ZSkgfHwgL2ZhbHNlL2kudGVzdCh2YWx1ZSkpe1xuXHRcdFx0XHRsZXQgdG9Cb29sZWFuVmFsdWU6IGJvb2xlYW5cblx0XHRcdFx0aWYoaXNCb29sZWFuKHZhbHVlKSl7XG5cdFx0XHRcdFx0dG9Cb29sZWFuVmFsdWUgPSB2YWx1ZVxuXHRcdFx0XHR9IGVsc2UgaWYoL3RydWUvaS50ZXN0KHZhbHVlKSl7XG5cdFx0XHRcdFx0dG9Cb29sZWFuVmFsdWUgPSB0cnVlXG5cdFx0XHRcdH0gZWxzZSBpZigvZmFsc2UvaS50ZXN0KHZhbHVlKSl7XG5cdFx0XHRcdFx0dG9Cb29sZWFuVmFsdWUgPSBmYWxzZVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuYWRkVG9nZ2xlTWVudU9wdGlvbihrZXksIHRvQm9vbGVhblZhbHVlKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5hZGRUZXh0SW5wdXRNZW51T3B0aW9uKGtleSwgdmFsdWUgPyB2YWx1ZS50b1N0cmluZygpIDogXCJcIilcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdGFkZFNlY3Rpb25TZWxlY3RNb2RhbE9wdGlvbihwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzKTogdm9pZHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBjaG9vc2VTZWN0aW9uTW9kYWwodGhpcy5wbHVnaW4sIHRoaXMuZmlsZSlcbiAgICAgICAgaWYoaXNNZW51KHRoaXMuY2F0ZWdvcnkpKXtcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0SWNvbihcInBlbmNpbFwiKVxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJBZGQgZmllbGQgYXQgc2VjdGlvbi4uLlwiKVxuICAgICAgICAgICAgICAgIGl0ZW0ub25DbGljaygoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2UgaWYoaXNTZWxlY3QodGhpcy5jYXRlZ29yeSkpe1xuICAgICAgICAgICAgdGhpcy5jYXRlZ29yeS5hZGRPcHRpb24oXCJhZGRfZmllbGRfYXRfc2VjdGlvblwiLCBcIkFkZCBmaWVsZCBhdCBzZWN0aW9uLi4uXCIpXG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5Lm1vZGFsc1tcImFkZF9maWVsZF9hdF9zZWN0aW9uXCJdID0gKCkgPT4gbW9kYWwub3BlbigpXG4gICAgICAgIH1cblx0fVxuXG5cdGFkZEN5Y2xlTWVudU9wdGlvbihuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIHByb3BlcnR5U2V0dGluZ3M6IEZpZWxkKTogdm9pZHtcblx0XHRjb25zdCB2YWx1ZXMgPSBwcm9wZXJ0eVNldHRpbmdzLnZhbHVlc1xuXHRcdGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZXMpXG5cdFx0Y29uc3Qga2V5Rm9yVmFsdWUgPSBrZXlzLmZpbmQoa2V5ID0+IHZhbHVlc1trZXldID09PSB2YWx1ZSlcblx0XHRsZXQgbmV4dFZhbHVlOiBzdHJpbmdcblx0XHRpZihrZXlGb3JWYWx1ZSl7XG5cdFx0XHRjb25zdCBuZXh0S2V5ID0ga2V5c1soa2V5cy5pbmRleE9mKGtleUZvclZhbHVlKSsxKSAlIGtleXMubGVuZ3RoXVxuXHRcdFx0bmV4dFZhbHVlID0gdmFsdWVzW25leHRLZXldXG5cdFx0fSBlbHNlIHtcblx0XHRcdG5leHRWYWx1ZSA9IHZhbHVlc1tPYmplY3Qua2V5cyh2YWx1ZXMpWzBdXVxuXHRcdH1cbiAgICAgICAgaWYoaXNNZW51KHRoaXMuY2F0ZWdvcnkpKXtcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoYCR7bmFtZX0gOiAke3ZhbHVlfSDilrcgJHtuZXh0VmFsdWV9YClcbiAgICAgICAgICAgICAgICBpdGVtLnNldEljb24oJ3N3aXRjaCcpXG4gICAgICAgICAgICAgICAgaXRlbS5vbkNsaWNrKChldnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZVZhbHVlcyh0aGlzLnBsdWdpbi5hcHAsIHRoaXMuZmlsZSwgbmFtZSwgbmV4dFZhbHVlKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2UgaWYoaXNTZWxlY3QodGhpcy5jYXRlZ29yeSkpe1xuICAgICAgICAgICAgdGhpcy5jYXRlZ29yeS5hZGRPcHRpb24oYCR7bmFtZX1fJHt2YWx1ZX1fJHtuZXh0VmFsdWV9YCwgYCR7bmFtZX0gOiAke3ZhbHVlfSDilrcgJHtuZXh0VmFsdWV9YClcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkubW9kYWxzW2Ake25hbWV9XyR7dmFsdWV9XyR7bmV4dFZhbHVlfWBdID0gKCkgPT4gXG4gICAgICAgICAgICByZXBsYWNlVmFsdWVzKHRoaXMucGx1Z2luLmFwcCwgdGhpcy5maWxlLCBuYW1lLCBuZXh0VmFsdWUpXG4gICAgICAgIH1cblx0fVxuXG5cdGFkZE11bHRpTWVudU9wdGlvbihuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIHByb3BlcnR5U2V0dGluZ3M6IEZpZWxkKTogdm9pZHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyB2YWx1ZU11bHRpU2VsZWN0TW9kYWwodGhpcy5wbHVnaW4uYXBwLCB0aGlzLmZpbGUsIG5hbWUsIHZhbHVlLCBwcm9wZXJ0eVNldHRpbmdzKVxuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIlNlbGVjdCB2YWx1ZXNcIilcbiAgICAgICAgaWYoaXNNZW51KHRoaXMuY2F0ZWdvcnkpKXtcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoYFVwZGF0ZSA8JHtuYW1lfT5gKVxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0SWNvbignYnVsbGV0LWxpc3QnKVxuICAgICAgICAgICAgICAgIGl0ZW0ub25DbGljaygoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgIH0gZWxzZSBpZihpc1NlbGVjdCh0aGlzLmNhdGVnb3J5KSl7XG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5LmFkZE9wdGlvbihgdXBkYXRlXyR7bmFtZX1gLCBgVXBkYXRlIDwke25hbWV9PmApXG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5Lm1vZGFsc1tgdXBkYXRlXyR7bmFtZX1gXSA9ICgpID0+IG1vZGFsLm9wZW4oKVxuICAgICAgIH1cblx0fVxuXG5cdGFkZFNlbGVjdE1lbnVPcHRpb24obmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBwcm9wZXJ0eVNldHRpbmdzOiBGaWVsZCk6IHZvaWR7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgdmFsdWVTZWxlY3RNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIHRoaXMuZmlsZSwgbmFtZSwgdmFsdWUsIHByb3BlcnR5U2V0dGluZ3MpXG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiU2VsZWN0IHZhbHVlXCIpXG4gICAgICAgIGlmKGlzTWVudSh0aGlzLmNhdGVnb3J5KSl7XG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKGBVcGRhdGUgJHtuYW1lfWApXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRJY29uKCdyaWdodC10cmlhbmdsZScpXG4gICAgICAgICAgICAgICAgaXRlbS5vbkNsaWNrKChldnQ6IE1vdXNlRXZlbnQpID0+IG1vZGFsLm9wZW4oKSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZihpc1NlbGVjdCh0aGlzLmNhdGVnb3J5KSl7XG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5LmFkZE9wdGlvbihgdXBkYXRlXyR7bmFtZX1gLCBgVXBkYXRlIDwke25hbWV9PmApXG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5Lm1vZGFsc1tgdXBkYXRlXyR7bmFtZX1gXSA9ICgpID0+IG1vZGFsLm9wZW4oKVxuICAgICAgICB9XG5cdH1cblxuXHRhZGRUb2dnbGVNZW51T3B0aW9uKG5hbWU6IHN0cmluZywgdmFsdWU6IGJvb2xlYW4pOiB2b2lke1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IHZhbHVlVG9nZ2xlTW9kYWwodGhpcy5wbHVnaW4uYXBwLCB0aGlzLmZpbGUsIG5hbWUsIHZhbHVlKVxuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChgQ2hhbmdlIFZhbHVlIGZvciA8JHtuYW1lfT5gKVxuICAgICAgICBpZihpc01lbnUodGhpcy5jYXRlZ29yeSkpe1xuICAgICAgICAgICAgdGhpcy5jYXRlZ29yeS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShgVXBkYXRlIDwke25hbWV9PmApXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRJY29uKCdjaGVja21hcmsnKVxuICAgICAgICAgICAgICAgIGl0ZW0ub25DbGljaygoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7bW9kYWwub3BlbigpfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZihpc1NlbGVjdCh0aGlzLmNhdGVnb3J5KSl7XG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5LmFkZE9wdGlvbihgdXBkYXRlXyR7bmFtZX1gLCBgVXBkYXRlIDwke25hbWV9PmApXG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5Lm1vZGFsc1tgdXBkYXRlXyR7bmFtZX1gXSA9ICgpID0+IG1vZGFsLm9wZW4oKVxuICAgICAgICB9XG5cdH1cblxuXHRhZGRUZXh0SW5wdXRNZW51T3B0aW9uKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHZvaWR7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgdmFsdWVUZXh0SW5wdXRNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIHRoaXMuZmlsZSwgbmFtZSwgdmFsdWUpXG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KGBDaGFuZ2UgVmFsdWUgZm9yIDwke25hbWV9PmApXG4gICAgICAgIGlmKGlzTWVudSh0aGlzLmNhdGVnb3J5KSl7XG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKGBVcGRhdGUgPCR7bmFtZX0+YClcbiAgICAgICAgICAgICAgICBpdGVtLnNldEljb24oJ3BlbmNpbCcpXG4gICAgICAgICAgICAgICAgaXRlbS5vbkNsaWNrKChldnQ6IE1vdXNlRXZlbnQpID0+IG1vZGFsLm9wZW4oKSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZihpc1NlbGVjdCh0aGlzLmNhdGVnb3J5KSl7XG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5LmFkZE9wdGlvbihgdXBkYXRlXyR7bmFtZX1gLCBgVXBkYXRlIDwke25hbWV9PmApXG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5Lm1vZGFsc1tgdXBkYXRlXyR7bmFtZX1gXSA9ICgpID0+IG1vZGFsLm9wZW4oKVxuICAgICAgICB9XG5cdH1cblxuXHRnZXRQcm9wZXJ0eVNldHRpbmdzKHByb3BlcnR5TmFtZTogc3RyaW5nKTogRmllbGR7XG5cdFx0Y29uc3QgbWF0Y2hpbmdTZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByZXNldEZpZWxkcy5maWx0ZXIocCA9PiBwLm5hbWUgPT0gcHJvcGVydHlOYW1lKVxuXHRcdGlmKHRoaXMuZmlsZUNsYXNzKXtcblx0XHRcdGNvbnN0IGZpbGVDbGFzc0F0dHJpYnV0ZXNXaXRoTmFtZSA9IHRoaXMuZmlsZUNsYXNzLmF0dHJpYnV0ZXMuZmlsdGVyKGF0dHIgPT4gYXR0ci5uYW1lID09IHByb3BlcnR5TmFtZSlcblx0XHRcdGlmKGZpbGVDbGFzc0F0dHJpYnV0ZXNXaXRoTmFtZS5sZW5ndGggPiAwKXtcblx0XHRcdFx0Y29uc3QgZmlsZUNsYXNzQXR0cmlidXRlID0gZmlsZUNsYXNzQXR0cmlidXRlc1dpdGhOYW1lWzBdXG5cdFx0XHRcdGlmKGZpbGVDbGFzc0F0dHJpYnV0ZS5vcHRpb25zKXtcblx0XHRcdFx0XHRyZXR1cm4gZmlsZUNsYXNzQXR0cmlidXRlLmdldEZpZWxkKClcblx0XHRcdFx0fSBlbHNlIGlmKG1hdGNoaW5nU2V0dGluZ3MubGVuZ3RoID4gMCl7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoaW5nU2V0dGluZ3NbMF1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZihtYXRjaGluZ1NldHRpbmdzLmxlbmd0aCA+IDApe1xuXHRcdFx0XHRyZXR1cm4gbWF0Y2hpbmdTZXR0aW5nc1swXVxuXHRcdH1cblx0fVxufSIsImltcG9ydCB7VEZpbGV9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3MgZnJvbSBcIm1haW5cIlxuaW1wb3J0IE9wdGlvbnNMaXN0IGZyb20gXCJzcmMvb3B0aW9ucy9PcHRpb25zTGlzdFwiXG5pbXBvcnQgRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwgZnJvbSBcInNyYy9maWxlQ2xhc3MvRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWxcIlxuXG5jbGFzcyBsaW5rQ29udGV4dE1lbnUge1xuICAgIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3Ncblx0ZmlsZTogVEZpbGVcblx0b3B0aW9uc0xpc3Q6IE9wdGlvbnNMaXN0XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzKXtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cbiAgICAgICAgdGhpcy5jcmVhdGVDb250ZXh0TWVudSgpXG4gICAgfVxuXG5cdGNyZWF0ZUNvbnRleHRNZW51KCk6IHZvaWR7XG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtbWVudScsIChtZW51LCBhYnN0cmFjdEZpbGUsIHNvdXJjZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMucGx1Z2luLnNldHRpbmdzLmRpc3BsYXlGaWVsZHNJbkNvbnRleHRNZW51ICYmIChcblx0XHRcdFx0XHRzb3VyY2UgPT09IFwibGluay1jb250ZXh0LW1lbnVcIiB8fCBcblx0XHRcdFx0XHRzb3VyY2UgPT09IFwiY2FsZW5kYXItY29udGV4dC1tZW51XCIgfHwgXG5cdFx0XHRcdFx0c291cmNlID09PSAncGFuZS1tb3JlLW9wdGlvbnMnIHx8XG5cdFx0XHRcdFx0c291cmNlID09PSAnZmlsZS1leHBsb3Jlci1jb250ZXh0LW1lbnUnKSl7XG5cdFx0XHRcdFx0Y29uc3QgZmlsZXMgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihtZEZpbGUgPT4gbWRGaWxlLnBhdGggPT0gYWJzdHJhY3RGaWxlLnBhdGgpXG5cdFx0XHRcdFx0aWYoZmlsZXMubGVuZ3RoID4gMCl7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlID0gZmlsZXNbMF1cblx0XHRcdFx0XHRcdHRoaXMuZmlsZSA9IGZpbGVcblx0XHRcdFx0XHRcdGlmKGZpbGUucGFyZW50LnBhdGggKyBcIi9cIiA9PSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jbGFzc0ZpbGVzUGF0aCl7XG5cdFx0XHRcdFx0XHRcdG1lbnUuYWRkU2VwYXJhdG9yKClcblx0XHRcdFx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aXRlbS5zZXRJY29uKFwiZ2VhclwiKVxuXHRcdFx0XHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoYE1hbmFnZSA8JHtmaWxlLmJhc2VuYW1lfT4gZmllbGRzYClcblx0XHRcdFx0XHRcdFx0XHRpdGVtLm9uQ2xpY2soKGV2dCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwgPSBuZXcgRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwodGhpcy5wbHVnaW4sIGZpbGUpXG5cdFx0XHRcdFx0XHRcdFx0XHRmaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbC5vcGVuKClcblx0XHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5vcHRpb25zTGlzdCA9IG5ldyBPcHRpb25zTGlzdCh0aGlzLnBsdWdpbiwgdGhpcy5maWxlLCBtZW51KVxuXHRcdFx0XHRcdFx0XHR0aGlzLm9wdGlvbnNMaXN0LmNyZWF0ZUV4dHJhT3B0aW9uTGlzdCgpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG4gICAgICAgICAgICB9KVxuXHRcdCk7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbGlua0NvbnRleHRNZW51IiwiaW1wb3J0IHtEcm9wZG93bkNvbXBvbmVudH0gZnJvbSBcIm9ic2lkaWFuXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VsZWN0TW9kYWwgZXh0ZW5kcyBEcm9wZG93bkNvbXBvbmVudCB7XG4gICAgbW9kYWxzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG5cbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQpe1xuICAgICAgICBzdXBlcihjb250YWluZXJFbClcbiAgICAgICAgdGhpcy5tb2RhbHMgPSB7fVxuICAgIH1cbn0iLCJpbXBvcnQge0FwcCwgTW9kYWwsIFRGaWxlfSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IFN1cGVyY2hhcmdlZExpbmtzIGZyb20gXCJtYWluXCJcbmltcG9ydCBPcHRpb25zTGlzdCBmcm9tIFwic3JjL29wdGlvbnMvT3B0aW9uc0xpc3RcIlxuaW1wb3J0IFNlbGVjdE1vZGFsIGZyb20gXCJzcmMvb3B0aW9uTW9kYWxzL1NlbGVjdE1vZGFsXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90ZUZpZWxkc0NvbW1hbmRzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHVibGljIGFwcDogQXBwO1xuICAgIHByaXZhdGUgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcztcbiAgICBwcml2YXRlIGZpbGU6IFRGaWxlXG4gICAgcHJpdmF0ZSBzZWxlY3Q6IFNlbGVjdE1vZGFsXG4gICAgb3B0aW9uc0xpc3Q6IE9wdGlvbnNMaXN0XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgZmlsZTogVEZpbGUpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmZpbGUgPSBmaWxlXG4gICAgfVxuXG4gICAgb25PcGVuKCl7XG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KGBTZWxlY3QgdGhlIGZpZWxkIHRvIG1hbmFnZWApXG4gICAgICAgIGNvbnN0IG9wdGlvbnNMaXN0Q29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KClcbiAgICAgICAgdGhpcy5zZWxlY3QgPSBuZXcgU2VsZWN0TW9kYWwob3B0aW9uc0xpc3RDb250YWluZXIpXG4gICAgICAgIHRoaXMuc2VsZWN0LmFkZE9wdGlvbihcIi0tLVwiLCBcIkNob29zZSBGaWVsZFwiKVxuICAgICAgICB0aGlzLm9wdGlvbnNMaXN0ID0gbmV3IE9wdGlvbnNMaXN0KHRoaXMucGx1Z2luLCB0aGlzLmZpbGUsIHRoaXMuc2VsZWN0KVxuICAgICAgICB0aGlzLm9wdGlvbnNMaXN0LmNyZWF0ZUV4dHJhT3B0aW9uTGlzdCgpXG4gICAgICAgIHRoaXMuc2VsZWN0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3QubW9kYWxzW3ZhbHVlXSgpXG4gICAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5zZWxlY3Quc2VsZWN0RWwuZm9jdXMoKVxuICAgIH1cbn0iLCJpbXBvcnQge0FwcCwgZWRpdG9yVmlld0ZpZWxkLCBNYXJrZG93blZpZXd9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzfSBmcm9tIFwiLi4vc2V0dGluZ3MvU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nc1wiO1xuaW1wb3J0IHtEZWNvcmF0aW9uLCBEZWNvcmF0aW9uU2V0LCBFZGl0b3JWaWV3LCBWaWV3UGx1Z2luLCBWaWV3VXBkYXRlLCBXaWRnZXRUeXBlfSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xuaW1wb3J0IHtSYW5nZVNldEJ1aWxkZXJ9IGZyb20gXCJAY29kZW1pcnJvci9yYW5nZXNldFwiO1xuaW1wb3J0IHtzeW50YXhUcmVlfSBmcm9tIFwiQGNvZGVtaXJyb3IvbGFuZ3VhZ2VcIjtcbmltcG9ydCB7dG9rZW5DbGFzc05vZGVQcm9wfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RyZWFtLXBhcnNlclwiO1xuaW1wb3J0IHtmZXRjaFRhcmdldEF0dHJpYnV0ZXNTeW5jfSBmcm9tIFwiLi9saW5rQXR0cmlidXRlc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRDTVZpZXdQbHVnaW4oYXBwOiBBcHAsIF9zZXR0aW5nczogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncylcbntcbiAgICAvLyBJbXBsZW1lbnRzIHRoZSBsaXZlIHByZXZpZXcgc3VwZXJjaGFyZ2luZ1xuICAgIC8vIENvZGUgc3RydWN0dXJlIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9ub3RoaW5naXNsb3N0L29ic2lkaWFuLWNtNi1hdHRyaWJ1dGVzL2Jsb2IvNzQzZDcxYjBhYTYxNjQwNzE0OWEwYjZlYTVmZmVhMjhlMjE1NDE1OC9zcmMvbWFpbi50c1xuICAgIC8vIENvZGUgaGVscCBjcmVkaXRzIHRvIEBOb3RoaW5nSXNMb3N0ISBUaGV5IGhhdmUgYmVlbiBhIGdyZWF0IGhlbHAgZ2V0dGluZyB0aGlzIHRvIHdvcmsgcHJvcGVybHkuXG4gICAgY2xhc3MgSGVhZGVyV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgICAgIGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cbiAgICAgICAgYWZ0ZXI6IGJvb2xlYW5cblxuICAgICAgICBjb25zdHJ1Y3RvcihhdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LCBhZnRlcjogYm9vbGVhbikge1xuICAgICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXIgPSBhZnRlclxuICAgICAgICB9XG5cbiAgICAgICAgdG9ET00oKSB7XG4gICAgICAgICAgICBsZXQgaGVhZGVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgIGhlYWRlckVsLnNldEF0dHJzKHRoaXMuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5hZnRlcikge1xuICAgICAgICAgICAgICAgIGhlYWRlckVsLmFkZENsYXNzKCdkYXRhLWxpbmstaWNvbi1hZnRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyRWwuYWRkQ2xhc3MoJ2RhdGEtbGluay1pY29uJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIG5haXZlIGJyZWFkIGNydW1iXG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyRWw7XG4gICAgICAgIH1cblxuICAgICAgICBpZ25vcmVFdmVudCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2V0dGluZ3MgPSBfc2V0dGluZ3M7XG4gICAgY29uc3Qgdmlld1BsdWdpbiA9IFZpZXdQbHVnaW4uZnJvbUNsYXNzKFxuICAgICAgICBjbGFzcyB7XG4gICAgICAgICAgICBkZWNvcmF0aW9uczogRGVjb3JhdGlvblNldDtcblxuICAgICAgICAgICAgY29uc3RydWN0b3IodmlldzogRWRpdG9yVmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmJ1aWxkRGVjb3JhdGlvbnModmlldyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHVwZGF0ZSh1cGRhdGU6IFZpZXdVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLnZpZXdwb3J0Q2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5idWlsZERlY29yYXRpb25zKHVwZGF0ZS52aWV3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlc3Ryb3koKSB7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1aWxkRGVjb3JhdGlvbnModmlldzogRWRpdG9yVmlldykge1xuICAgICAgICAgICAgICAgIGxldCBidWlsZGVyID0gbmV3IFJhbmdlU2V0QnVpbGRlcjxEZWNvcmF0aW9uPigpO1xuICAgICAgICAgICAgICAgIGlmICghc2V0dGluZ3MuZW5hYmxlRWRpdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBtZFZpZXcgPSB2aWV3LnN0YXRlLmZpZWxkKGVkaXRvclZpZXdGaWVsZCkgYXMgTWFya2Rvd25WaWV3O1xuICAgICAgICAgICAgICAgIGxldCBsYXN0QXR0cmlidXRlcyA9IHt9O1xuICAgICAgICAgICAgICAgIGxldCBpY29uRGVjb0FmdGVyOiBEZWNvcmF0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICBsZXQgaWNvbkRlY29BZnRlcldoZXJlOiBudW1iZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHtmcm9tLCB0b30gb2Ygdmlldy52aXNpYmxlUmFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHN5bnRheFRyZWUodmlldy5zdGF0ZSkuaXRlcmF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG8sXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRlcjogKHR5cGUsIGZyb20sIHRvKSA9PiB7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUHJvcHMgPSB0eXBlLnByb3AodG9rZW5DbGFzc05vZGVQcm9wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5Qcm9wcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wcyA9IG5ldyBTZXQodG9rZW5Qcm9wcy5zcGxpdChcIiBcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0xpbmsgPSBwcm9wcy5oYXMoXCJobWQtaW50ZXJuYWwtbGlua1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBbGlhcyA9IHByb3BzLmhhcyhcImxpbmstYWxpYXNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzUGlwZSA9IHByb3BzLmhhcyhcImxpbmstYWxpYXMtcGlwZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1BpcGUgJiYgIWlzQWxpYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpY29uRGVjb0FmdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5hZGQodG8sIHRvLCBpY29uRGVjb0FmdGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uRGVjb0FmdGVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uRGVjb0FmdGVyV2hlcmUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0xpbmsgJiYgIWlzQWxpYXMgJiYgIWlzUGlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmtUZXh0ID0gdmlldy5zdGF0ZS5kb2Muc2xpY2VTdHJpbmcoZnJvbSwgdG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua1RleHQgPSBsaW5rVGV4dC5zcGxpdChcIiNcIilbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGxpbmtUZXh0LCBtZFZpZXcuZmlsZS5iYXNlbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBfYXR0cmlidXRlcyA9IGZldGNoVGFyZ2V0QXR0cmlidXRlc1N5bmMoYXBwLCBzZXR0aW5ncywgZmlsZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gX2F0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlc1tcImRhdGEtbGluay1cIiArIGtleV0gPSBfYXR0cmlidXRlc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVjbyA9IERlY29yYXRpb24ubWFyayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImRhdGEtbGluay10ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWNvbkRlY29CZWZvcmUgPSBEZWNvcmF0aW9uLndpZGdldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldDogbmV3IEhlYWRlcldpZGdldChhdHRyaWJ1dGVzLCBmYWxzZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkRlY29BZnRlciA9IERlY29yYXRpb24ud2lkZ2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0OiBuZXcgSGVhZGVyV2lkZ2V0KGF0dHJpYnV0ZXMsIHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKGZyb20sIGZyb20sIGljb25EZWNvQmVmb3JlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLmFkZChmcm9tLCB0bywgZGVjbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25EZWNvQWZ0ZXJXaGVyZSA9IHRvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzTGluayAmJiBpc0FsaWFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVjbyA9IERlY29yYXRpb24ubWFyayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogbGFzdEF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiZGF0YS1saW5rLXRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKGZyb20sIHRvLCBkZWNvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpY29uRGVjb0FmdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5hZGQodG8sIHRvLCBpY29uRGVjb0FmdGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uRGVjb0FmdGVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uRGVjb0FmdGVyV2hlcmUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBkZWNvcmF0aW9uczogdiA9PiB2LmRlY29yYXRpb25zXG4gICAgICAgIH1cbiAgICApO1xuICAgIHJldHVybiB2aWV3UGx1Z2luO1xufSIsImltcG9ydCB7UGx1Z2luLCBNYXJrZG93blZpZXcsIE5vdGljZSwgZGVib3VuY2V9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ1RhYiBmcm9tIFwic3JjL3NldHRpbmdzL1N1cGVyY2hhcmdlZExpbmtzU2V0dGluZ1RhYlwiXHJcbmltcG9ydCB7XHJcblx0dXBkYXRlRWxMaW5rcyxcclxuXHR1cGRhdGVWaXNpYmxlTGlua3MsXHJcblx0Y2xlYXJFeHRyYUF0dHJpYnV0ZXMsXHJcblx0dXBkYXRlRGl2RXh0cmFBdHRyaWJ1dGVzLFxyXG59IGZyb20gXCJzcmMvbGlua0F0dHJpYnV0ZXMvbGlua0F0dHJpYnV0ZXNcIlxyXG5pbXBvcnQgeyBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcInNyYy9zZXR0aW5ncy9TdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzXCJcclxuaW1wb3J0IEZpZWxkIGZyb20gJ3NyYy9GaWVsZCc7XHJcbmltcG9ydCBsaW5rQ29udGV4dE1lbnUgZnJvbSBcInNyYy9vcHRpb25zL2xpbmtDb250ZXh0TWVudVwiXHJcbmltcG9ydCBOb3RlRmllbGRzQ29tbWFuZHNNb2RhbCBmcm9tIFwic3JjL29wdGlvbnMvTm90ZUZpZWxkc0NvbW1hbmRzTW9kYWxcIlxyXG5pbXBvcnQgRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwgZnJvbSAnc3JjL2ZpbGVDbGFzcy9GaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCc7XHJcbmltcG9ydCB7IFByZWMgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RhdGVcIjtcclxuaW1wb3J0IHtidWlsZENNVmlld1BsdWdpbn0gZnJvbSBcIi4vc3JjL2xpbmtBdHRyaWJ1dGVzL2xpdmVQcmV2aWV3XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdXBlcmNoYXJnZWRMaW5rcyBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3M6IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3M7XHJcblx0aW5pdGlhbFByb3BlcnRpZXM6IEFycmF5PEZpZWxkPiA9IFtdXHJcblx0c2V0dGluZ1RhYjogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nVGFiXHJcblx0cHJpdmF0ZSBvYnNlcnZlcnM6IFtNdXRhdGlvbk9ic2VydmVyLCBzdHJpbmcsIHN0cmluZ11bXTtcclxuXHRwcml2YXRlIG1vZGFsT2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXI7XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnNvbGUubG9nKCdTdXBlcmNoYXJnZWQgbGlua3MgbG9hZGVkJyk7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHJcblx0XHR0aGlzLnNldHRpbmdzLnByZXNldEZpZWxkcy5mb3JFYWNoKHByb3AgPT4ge1xyXG5cdFx0XHRjb25zdCBwcm9wZXJ0eSA9IG5ldyBGaWVsZCgpXHJcblx0XHRcdE9iamVjdC5hc3NpZ24ocHJvcGVydHksIHByb3ApXHJcblx0XHRcdHRoaXMuaW5pdGlhbFByb3BlcnRpZXMucHVzaChwcm9wZXJ0eSlcclxuXHRcdH0pXHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duUG9zdFByb2Nlc3NvcigoZWwsIGN0eCkgPT4ge1xyXG5cdFx0XHR1cGRhdGVFbExpbmtzKHRoaXMuYXBwLCB0aGlzLCBlbCwgY3R4KVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUGx1Z2lucyB3YXRjaGluZ1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUub24oJ2NoYW5nZWQnLCBkZWJvdW5jZSgoX2ZpbGUpID0+IHtcclxuXHRcdFx0dXBkYXRlVmlzaWJsZUxpbmtzKHRoaXMuYXBwLCB0aGlzKTtcclxuXHRcdFx0dGhpcy5vYnNlcnZlcnMuZm9yRWFjaCgoW29ic2VydmVyLCB0eXBlLCBvd25fY2xhc3MgXSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUodHlwZSk7XHJcblx0XHRcdFx0bGVhdmVzLmZvckVhY2gobGVhZiA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUNvbnRhaW5lcihsZWFmLnZpZXcuY29udGFpbmVyRWwsIHRoaXMsIG93bl9jbGFzcyk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0fSk7XHJcblx0XHRcdC8vIERlYm91bmNlZCB0byBwcmV2ZW50IGxhZyB3aGVuIHdyaXRpbmdcclxuXHRcdH0sIDQ1MDAsIHRydWUpKSk7XHJcblxyXG5cclxuXHRcdC8vIExpdmUgcHJldmlld1xyXG5cdFx0Y29uc3QgZXh0ID0gUHJlYy5sb3dlc3QoYnVpbGRDTVZpZXdQbHVnaW4odGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MpKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24oZXh0KTtcclxuXHJcblx0XHR0aGlzLm9ic2VydmVycyA9IFtdO1xyXG5cclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcclxuXHRcdFx0dGhpcy5pbml0Vmlld09ic2VydmVycyh0aGlzKTtcclxuXHRcdFx0dGhpcy5pbml0TW9kYWxPYnNlcnZlcnModGhpcyk7XHJcblx0XHR9KTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJsYXlvdXQtY2hhbmdlXCIsICgpID0+IHRoaXMuaW5pdFZpZXdPYnNlcnZlcnModGhpcykpKTtcclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogXCJmaWVsZF9vcHRpb25zXCIsXHJcblx0XHRcdG5hbWU6IFwiZmllbGQgb3B0aW9uc1wiLFxyXG5cdFx0XHRob3RrZXlzOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0bW9kaWZpZXJzOiBbXCJBbHRcIl0sXHJcblx0XHRcdFx0XHRrZXk6ICdPJyxcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRdLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZlxyXG5cdFx0XHRcdGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgJiYgbGVhZi52aWV3LmZpbGUpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGZpZWxkc09wdGlvbnNNb2RhbCA9IG5ldyBOb3RlRmllbGRzQ29tbWFuZHNNb2RhbCh0aGlzLmFwcCwgdGhpcywgbGVhZi52aWV3LmZpbGUpXHJcblx0XHRcdFx0XHRmaWVsZHNPcHRpb25zTW9kYWwub3BlbigpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0LyogVE9ETyA6IGFkZCBhIGNvbnRleHQgbWVudSBmb3IgZmlsZUNsYXNzIGZpbGVzIHRvIHNob3cgdGhlIHNhbWUgb3B0aW9ucyBhcyBpbiBGaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCovXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogXCJmaWxlQ2xhc3NBdHRyX29wdGlvbnNcIixcclxuXHRcdFx0bmFtZTogXCJmaWxlQ2xhc3MgYXR0cmlidXRlcyBvcHRpb25zXCIsXHJcblx0XHRcdGhvdGtleXM6IFtcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRtb2RpZmllcnM6IFtcIkFsdFwiXSxcclxuXHRcdFx0XHRcdGtleTogJ1AnLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdF0sXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmXHJcblx0XHRcdFx0aWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldyAmJiBsZWFmLnZpZXcuZmlsZSAmJiBgJHtsZWFmLnZpZXcuZmlsZS5wYXJlbnQucGF0aH0vYCA9PSB0aGlzLnNldHRpbmdzLmNsYXNzRmlsZXNQYXRoKSB7XHJcblx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBGaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCh0aGlzLCBsZWFmLnZpZXcuZmlsZSlcclxuXHRcdFx0XHRcdG1vZGFsLm9wZW4oKVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKFwiVGhpcyBpcyBub3QgYSBmaWxlQ2xhc3NcIiwgMjUwMClcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgbGlua0NvbnRleHRNZW51KHRoaXMpXHJcblx0fVxyXG5cclxuXHRpbml0Vmlld09ic2VydmVycyhwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzKSB7XHJcblx0XHQvLyBSZXNldCBvYnNlcnZlcnNcclxuXHRcdHBsdWdpbi5vYnNlcnZlcnMuZm9yRWFjaCgoW29ic2VydmVyLCB0eXBlIF0pID0+IHtcclxuXHRcdFx0b2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0fSk7XHJcblx0XHRwbHVnaW4ub2JzZXJ2ZXJzID0gW107XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgbmV3IG9ic2VydmVyc1xyXG5cdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ2JhY2tsaW5rJywgcGx1Z2luLCBcIi50cmVlLWl0ZW0taW5uZXJcIiwgdHJ1ZSk7XHJcblx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnb3V0Z29pbmctbGluaycsIHBsdWdpbiwgXCIudHJlZS1pdGVtLWlubmVyXCIsIHRydWUpO1xyXG5cdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ3NlYXJjaCcsIHBsdWdpbiwgXCIudHJlZS1pdGVtLWlubmVyXCIpO1xyXG5cdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ0JDLW1hdHJpeCcsIHBsdWdpbiwgJy5CQy1MaW5rJyk7XHJcblx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnQkMtZHVja3MnLCBwbHVnaW4sICcuaW50ZXJuYWwtbGluaycpO1xyXG5cdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ0JDLXRyZWUnLCBwbHVnaW4sICdhLmludGVybmFsLWxpbmsnKTtcclxuXHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdncmFwaC1hbmFseXNpcycsIHBsdWdpbiwgJy5pbnRlcm5hbC1saW5rJyk7XHJcblx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnc3RhcnJlZCcsIHBsdWdpbiwgJy5uYXYtZmlsZS10aXRsZS1jb250ZW50Jyk7XHJcblx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnZmlsZS1leHBsb3JlcicsIHBsdWdpbiwgJy5uYXYtZmlsZS10aXRsZS1jb250ZW50Jyk7XHJcblx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgncmVjZW50LWZpbGVzJywgcGx1Z2luLCAnLm5hdi1maWxlLXRpdGxlLWNvbnRlbnQnKTtcclxuXHRcdC8vIElmIGJhY2tsaW5rcyBpbiBlZGl0b3IgaXMgb25cclxuXHRcdC8vIEB0cy1pZ25vcmVcclxuXHRcdGlmIChwbHVnaW4uYXBwPy5pbnRlcm5hbFBsdWdpbnM/LnBsdWdpbnM/LmJhY2tsaW5rPy5pbnN0YW5jZT8ub3B0aW9ucz8uYmFja2xpbmtJbkRvY3VtZW50KSB7XHJcblx0XHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdtYXJrZG93bicsIHBsdWdpbiwgJy50cmVlLWl0ZW0taW5uZXInLCB0cnVlKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGluaXRNb2RhbE9ic2VydmVycyhwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzKSB7XHJcblx0XHRjb25zdCBjb25maWcgPSB7XHJcblx0XHRcdHN1YnRyZWU6IGZhbHNlLFxyXG5cdFx0XHRjaGlsZExpc3Q6IHRydWUsXHJcblx0XHRcdGF0dHJpYnV0ZXM6IGZhbHNlXHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMubW9kYWxPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHJlY29yZHMgPT4ge1xyXG5cdFx0XHRyZWNvcmRzLmZvckVhY2goKG11dGF0aW9uKSA9PiB7XHJcblx0XHRcdFx0aWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnKSB7XHJcblx0XHRcdFx0XHRtdXRhdGlvbi5hZGRlZE5vZGVzLmZvckVhY2gobiA9PiB7XHJcblx0XHRcdFx0XHRcdGlmICgnY2xhc3NOYW1lJyBpbiBuICYmXHJcblx0XHRcdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0XHRcdFx0XHRcdChuLmNsYXNzTmFtZS5pbmNsdWRlcygnbW9kYWwtY29udGFpbmVyJykgJiYgcGx1Z2luLnNldHRpbmdzLmVuYWJsZVF1aWNrU3dpdGNoZXJcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcclxuXHRcdFx0XHRcdFx0XHRcdHx8IG4uY2xhc3NOYW1lLmluY2x1ZGVzKCdzdWdnZXN0aW9uLWNvbnRhaW5lcicpICYmIHBsdWdpbi5zZXR0aW5ncy5lbmFibGVTdWdnZXN0b3IpKSB7XHJcblx0XHRcdFx0XHRcdFx0bGV0IHNlbGVjdG9yID0gXCIuc3VnZ2VzdGlvbi1pdGVtLCAuc3VnZ2VzdGlvbi1ub3RlLCAuYW5vdGhlci1xdWljay1zd2l0Y2hlcl9faXRlbV9fZmlsZVwiO1xyXG5cdFx0XHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcclxuXHRcdFx0XHRcdFx0XHRpZiAobi5jbGFzc05hbWUuaW5jbHVkZXMoJ3N1Z2dlc3Rpb24tY29udGFpbmVyJykpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGVjdG9yID0gXCIuc3VnZ2VzdGlvbi1jb250ZW50LCAuc3VnZ2VzdGlvbi1ub3RlXCI7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdHBsdWdpbi51cGRhdGVDb250YWluZXIobiBhcyBIVE1MRWxlbWVudCwgcGx1Z2luLCBzZWxlY3Rvcik7XHJcblx0XHRcdFx0XHRcdFx0cGx1Z2luLl93YXRjaENvbnRhaW5lcihudWxsLCBuIGFzIEhUTUxFbGVtZW50LCBwbHVnaW4sIHNlbGVjdG9yKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5tb2RhbE9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwgY29uZmlnKTtcclxuXHR9XHJcblxyXG5cdHJlZ2lzdGVyVmlld1R5cGUodmlld1R5cGVOYW1lOiBzdHJpbmcsIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIHNlbGVjdG9yOiBzdHJpbmcsIHVwZGF0ZUR5bmFtaWMgPSBmYWxzZSApe1xyXG5cdFx0Y29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSh2aWV3VHlwZU5hbWUpO1xyXG5cdFx0aWYgKGxlYXZlcy5sZW5ndGggPiAxKSB7XHJcblx0XHRcdGZvciAobGV0IGk9MDsgaSA8IGxlYXZlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGNvbnN0IGNvbnRhaW5lciA9IGxlYXZlc1tpXS52aWV3LmNvbnRhaW5lckVsO1xyXG5cdFx0XHRcdGlmICh1cGRhdGVEeW5hbWljKSB7XHJcblx0XHRcdFx0XHRwbHVnaW4uX3dhdGNoQ29udGFpbmVyRHluYW1pYyh2aWV3VHlwZU5hbWUgKyBpLCBjb250YWluZXIsIHBsdWdpbiwgc2VsZWN0b3IpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0cGx1Z2luLl93YXRjaENvbnRhaW5lcih2aWV3VHlwZU5hbWUgKyBpLCBjb250YWluZXIsIHBsdWdpbiwgc2VsZWN0b3IpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAobGVhdmVzLmxlbmd0aCA8IDEpIHJldHVybjtcclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRjb25zdCBjb250YWluZXIgPSBsZWF2ZXNbMF0udmlldy5jb250YWluZXJFbDtcclxuXHRcdFx0dGhpcy51cGRhdGVDb250YWluZXIoY29udGFpbmVyLCBwbHVnaW4sIHNlbGVjdG9yKTtcclxuXHRcdFx0aWYgKHVwZGF0ZUR5bmFtaWMpIHtcclxuXHRcdFx0XHRwbHVnaW4uX3dhdGNoQ29udGFpbmVyRHluYW1pYyh2aWV3VHlwZU5hbWUsIGNvbnRhaW5lciwgcGx1Z2luLCBzZWxlY3RvcilcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRwbHVnaW4uX3dhdGNoQ29udGFpbmVyKHZpZXdUeXBlTmFtZSwgY29udGFpbmVyLCBwbHVnaW4sIHNlbGVjdG9yKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dXBkYXRlQ29udGFpbmVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIHNlbGVjdG9yOiBzdHJpbmcpIHtcclxuXHRcdGlmICghcGx1Z2luLnNldHRpbmdzLmVuYWJsZUJhY2tsaW5rcykgcmV0dXJuO1xyXG5cdFx0Y29uc3Qgbm9kZXMgPSBjb250YWluZXIuZmluZEFsbChzZWxlY3Rvcik7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgKytpKSAge1xyXG5cdFx0XHRjb25zdCBlbCA9IG5vZGVzW2ldIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHR1cGRhdGVEaXZFeHRyYUF0dHJpYnV0ZXMocGx1Z2luLmFwcCwgcGx1Z2luLnNldHRpbmdzLCBlbCwgXCJcIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZW1vdmVGcm9tQ29udGFpbmVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHNlbGVjdG9yOiBzdHJpbmcpIHtcclxuXHRcdGNvbnN0IG5vZGVzID0gY29udGFpbmVyLmZpbmRBbGwoc2VsZWN0b3IpO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7ICsraSkgIHtcclxuXHRcdCAgICBjb25zdCBlbCA9IG5vZGVzW2ldIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRjbGVhckV4dHJhQXR0cmlidXRlcyhlbCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRfd2F0Y2hDb250YWluZXIodmlld1R5cGU6IHN0cmluZywgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgc2VsZWN0b3I6IHN0cmluZykge1xyXG5cdFx0bGV0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKHJlY29yZHMsIF8pID0+IHtcclxuXHRcdFx0IHBsdWdpbi51cGRhdGVDb250YWluZXIoY29udGFpbmVyLCBwbHVnaW4sIHNlbGVjdG9yKTtcclxuXHRcdH0pO1xyXG5cdFx0b2JzZXJ2ZXIub2JzZXJ2ZShjb250YWluZXIsIHsgc3VidHJlZTogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlLCBhdHRyaWJ1dGVzOiBmYWxzZSB9KTtcclxuXHRcdGlmICh2aWV3VHlwZSkge1xyXG5cdFx0XHRwbHVnaW4ub2JzZXJ2ZXJzLnB1c2goW29ic2VydmVyLCB2aWV3VHlwZSwgc2VsZWN0b3JdKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdF93YXRjaENvbnRhaW5lckR5bmFtaWModmlld1R5cGU6IHN0cmluZywgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgc2VsZWN0b3I6IHN0cmluZywgb3duX2NsYXNzPSd0cmVlLWl0ZW0taW5uZXInLCBwYXJlbnRfY2xhc3M9J3RyZWUtaXRlbScpIHtcclxuXHRcdC8vIFVzZWQgZm9yIGVmZmljaWVudCB1cGRhdGluZyBvZiB0aGUgYmFja2xpbmtzIHBhbmVsXHJcblx0XHQvLyBPbmx5IGxvb3BzIHRocm91Z2ggbmV3bHkgYWRkZWQgRE9NIG5vZGVzIGluc3RlYWQgb2YgY2hhbmdpbmcgYWxsIG9mIHRoZW1cclxuXHRcdGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChyZWNvcmRzLCBfKSA9PiB7XHJcblx0XHRcdHJlY29yZHMuZm9yRWFjaCgobXV0YXRpb24pID0+IHtcclxuXHRcdFx0XHRpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcpIHtcclxuXHRcdFx0XHRcdG11dGF0aW9uLmFkZGVkTm9kZXMuZm9yRWFjaCgobikgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAoJ2NsYXNzTmFtZScgaW4gbikge1xyXG5cdFx0XHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcclxuXHRcdFx0XHRcdFx0XHRpZiAobi5jbGFzc05hbWUuaW5jbHVkZXMgJiYgdHlwZW9mIG4uY2xhc3NOYW1lLmluY2x1ZGVzID09PSAnZnVuY3Rpb24nICYmIG4uY2xhc3NOYW1lLmluY2x1ZGVzKHBhcmVudF9jbGFzcykpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGZpbGVEaXZzID0gKG4gYXMgSFRNTEVsZW1lbnQpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUob3duX2NsYXNzKTtcclxuXHRcdFx0XHRcdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZURpdnMubGVuZ3RoOyArK2kpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgbGluayA9IGZpbGVEaXZzW2ldIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR1cGRhdGVEaXZFeHRyYUF0dHJpYnV0ZXMocGx1Z2luLmFwcCwgcGx1Z2luLnNldHRpbmdzLCBsaW5rLCBcIlwiKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHRcdG9ic2VydmVyLm9ic2VydmUoY29udGFpbmVyLCB7IHN1YnRyZWU6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSwgYXR0cmlidXRlczogZmFsc2UgfSk7XHJcblx0XHRwbHVnaW4ub2JzZXJ2ZXJzLnB1c2goW29ic2VydmVyLCB2aWV3VHlwZSwgc2VsZWN0b3JdKTtcclxuXHR9XHJcblxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHRcdHRoaXMub2JzZXJ2ZXJzLmZvckVhY2goKFtvYnNlcnZlciwgdHlwZSwgb3duX2NsYXNzIF0pID0+IHtcclxuXHRcdFx0b2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0XHRjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKHR5cGUpO1xyXG5cdFx0XHRsZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcclxuXHRcdFx0XHR0aGlzLnJlbW92ZUZyb21Db250YWluZXIobGVhZi52aWV3LmNvbnRhaW5lckVsLCBvd25fY2xhc3MpO1xyXG5cdFx0XHR9KVxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLm1vZGFsT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0Y29uc29sZS5sb2coJ1N1cGVyY2hhcmdlZCBsaW5rcyB1bmxvYWRlZCcpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzLnByZXNldEZpZWxkcyA9IHRoaXMuaW5pdGlhbFByb3BlcnRpZXNcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG59Il0sIm5hbWVzIjpbIlNldHRpbmciLCJNb2RhbCIsIlRleHRDb21wb25lbnQiLCJUb2dnbGVDb21wb25lbnQiLCJCdXR0b25Db21wb25lbnQiLCJOb3RpY2UiLCJQbHVnaW5TZXR0aW5nVGFiIiwiZGVib3VuY2UiLCJnZXRBbGxUYWdzIiwiZ2V0TGlua3BhdGgiLCJNYXJrZG93blZpZXciLCJFeHRyYUJ1dHRvbkNvbXBvbmVudCIsInZhbHVlVG9nZ2xlTW9kYWwiLCJEcm9wZG93bkNvbXBvbmVudCIsInZhbHVlU2VsZWN0TW9kYWwiLCJUZXh0QXJlYUNvbXBvbmVudCIsIldpZGdldFR5cGUiLCJWaWV3UGx1Z2luIiwidmlldyIsIlJhbmdlU2V0QnVpbGRlciIsImVkaXRvclZpZXdGaWVsZCIsInN5bnRheFRyZWUiLCJ0b2tlbkNsYXNzTm9kZVByb3AiLCJEZWNvcmF0aW9uIiwiUGx1Z2luIiwiUHJlYyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBNEJBO0FBQ08sU0FBUyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUM3QixJQUFJLElBQUksQ0FBQyxH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
